# Which number line model represents the expression 5/2 + 3?

- **analysisId**: 8a29bab4-c73d-48ab-afdf-60cf05ba88e6
- **questionId**: x621482e0914d615c
- **severity**: major

### Issue
The answer choices' widget used to visually solve this problem have been replaced with text descriptions instead.

### Perseus (original)
```json
{
  "hints": [
    {
      "images": {},
      "content": "Let's plot the addends one at a time.\n\n\n[[☃ image 1]]\n\n",
      "replace": false,
      "widgets": {
        "image 1": {
          "type": "image",
          "graded": true,
          "static": false,
          "options": {
            "alt": "A vertical number line from 6 to negative 6 with evenly spaced tick marks. An arrow from 0 to 2.5 points 2.5 tick marks is on right of the number line goes upwards. Five over two is written on right of this arrow. Dotted line connects the end of the arrowhead to the respective point on the number line. The number line reads from bottom to top: negative 6, negative 4, negative 2, 0, 2, 4 and 6.",
            "box": [
              103,
              240
            ],
            "range": [
              [
                0,
                10
              ],
              [
                0,
                10
              ]
            ],
            "title": "",
            "labels": [],
            "static": false,
            "caption": "",
            "backgroundImage": {
              "url": "web+graphie://cdn.kastatic.org/ka-perseus-graphie/9369fceb6dd232b85baf74b60b238ae8f44ee3db",
              "width": 103,
              "height": 240
            }
          },
          "version": {
            "major": 0,
            "minor": 0
          },
          "alignment": "block"
        }
      }
    },
    {
      "images": {},
      "content": "[[☃ image 1]]\n\n",
      "replace": false,
      "widgets": {
        "image 1": {
          "type": "image",
          "graded": true,
          "static": false,
          "options": {
            "alt": "A vertical number line from 6 to negative 6 with evenly spaced tick marks. An arrow from 0 to 2.5 points 2.5 tick marks is on right of the number line goes upwards. Another arrow on right of this arrow from 2.5 to 5.5 points 3 tick marks goes upwards. Plus 3 is written on right of this arrow. Dotted lines connect the end of the arrowheads to the respective points on the number line. The number line reads from bottom to top: negative 6, negative 4, negative 2, 0, 2, 4 and 6.",
            "box": [
              133,
              240
            ],
            "range": [
              [
                0,
                10
              ],
              [
                0,
                10
              ]
            ],
            "title": "",
            "labels": [],
            "static": false,
            "caption": "",
            "backgroundImage": {
              "url": "web+graphie://cdn.kastatic.org/ka-perseus-graphie/585c86ec781f7226309994653de60b6db2fdc5ba",
              "width": 133,
              "height": 240
            }
          },
          "version": {
            "major": 0,
            "minor": 0
          },
          "alignment": "block"
        }
      }
    },
    {
      "images": {},
      "content": "The following number line model represents the expression $\\dfrac{5}{2} + 3$.  \n\n[[☃ image 1]]\n\n",
      "replace": false,
      "widgets": {
        "image 1": {
          "type": "image",
          "graded": true,
          "static": false,
          "options": {
            "alt": "A vertical number line from 6 to negative 6 with evenly spaced tick marks. An arrow from 0 to 2.5 points 2.5 tick marks is on right of the number line goes upwards. Another arrow on right of this arrow from 2.5 to 5.5 points 3 tick marks goes upwards. Dotted lines connect the end of the arrowheads to the respective points on the number line. The number line reads from bottom to top: negative 6, negative 4, negative 2, 0, 2, 4 and 6.",
            "box": [
              120,
              240
            ],
            "range": [
              [
                0,
                10
              ],
              [
                0,
                10
              ]
            ],
            "title": "",
            "labels": [],
            "static": false,
            "caption": "",
            "backgroundImage": {
              "url": "web+graphie://cdn.kastatic.org/ka-perseus-graphie/1c40072d9c7d74cb576671a3f8f05cc63327727c",
              "width": 120,
              "height": 240
            }
          },
          "version": {
            "major": 0,
            "minor": 0
          },
          "alignment": "block"
        }
      }
    }
  ],
  "question": {
    "images": {},
    "content": "**Which number line model represents the expression $\\dfrac{5}{2} + 3$?** \n\n\n[[☃ radio 1]]\n\n\n",
    "widgets": {
      "radio 1": {
        "type": "radio",
        "graded": true,
        "static": false,
        "options": {
          "choices": [
            {
              "content": "![A vertical number line from 6 to negative 6 with evenly spaced tick marks. An arrow from 0 to 2.5 points 2.5 tick marks is on right of the number line goes upwards. Another arrow on right of this arrow from 2.5 to 5.5 points 3 tick marks goes upwards. Dotted lines connect the end of the arrowheads to the respective points on the number line. The number line reads from bottom to top: negative 6, negative 4, negative 2, 0, 2, 4 and 6.](web+graphie://cdn.kastatic.org/ka-perseus-graphie/1c40072d9c7d74cb576671a3f8f05cc63327727c)",
              "correct": true
            },
            {
              "content": "![A vertical number line from 6 to negative 6 with evenly spaced tick marks. An arrow from 0 to negative 2.5 points 2.5 tick marks is on right of the number line and goes downwards. Another arrow on right of this arrow from negative 2.5 to negative 5.5 points 3 tick marks goes downwards. Dotted lines connect the end of the arrowheads to the respective points on the number line. The number line reads from bottom to top: negative 6, negative 4, negative 2, 0, 2, 4 and 6.](web+graphie://cdn.kastatic.org/ka-perseus-graphie/db4757beff65c7c1888632412c3f3336d4195c9b)",
              "correct": false
            },
            {
              "content": "![A vertical number line from 6 to negative 6 with evenly spaced tick marks. An arrow from 0 to negative 2.5 points 2.5 tick marks is on right of the number line and goes downwards. Another arrow on right of this arrow from negative 2.5 to 0.5 points 3 tick marks goes upwards. Dotted lines connect the end of the arrowheads to the respective points on the number line. The number line reads from bottom to top: negative 6, negative 4, negative 2, 0, 2, 4 and 6.](web+graphie://cdn.kastatic.org/ka-perseus-graphie/5a6541bb14bb4c6bd164a0e75b83fb114c2be37b)",
              "correct": false
            }
          ],
          "randomize": true,
          "onePerLine": false,
          "countChoices": false,
          "displayCount": null,
          "multipleSelect": false,
          "deselectEnabled": false,
          "hasNoneOfTheAbove": false
        },
        "version": {
          "major": 1,
          "minor": 0
        },
        "alignment": "default"
      }
    }
  },
  "answerArea": {
    "type": "multiple",
    "options": {
      "images": {},
      "content": "",
      "widgets": {}
    },
    "calculator": false
  },
  "itemDataVersion": {
    "major": 0,
    "minor": 1
  }
}
```

### Structured JSON (generated)
```json
{
  "body": [
    {
      "type": "paragraph",
      "content": [
        {
          "type": "text",
          "content": "Which number line model represents the expression "
        },
        {
          "type": "math",
          "mathml": "<mfrac><mn>5</mn><mn>2</mn></mfrac><mo>+</mo><mn>3</mn>"
        },
        {
          "type": "text",
          "content": "?"
        }
      ]
    },
    {
      "type": "blockSlot",
      "slotId": "choice_interaction"
    }
  ],
  "title": "Which number line model represents the expression 5/2 + 3?",
  "widgets": {},
  "feedback": {
    "correct": [
      {
        "type": "paragraph",
        "content": [
          {
            "type": "text",
            "content": "Correct! The correct model starts at 0, moves up by "
          },
          {
            "type": "math",
            "mathml": "<mfrac><mn>5</mn><mn>2</mn></mfrac>"
          },
          {
            "type": "text",
            "content": ", then up by "
          },
          {
            "type": "math",
            "mathml": "<mn>3</mn>"
          },
          {
            "type": "text",
            "content": ", landing at "
          },
          {
            "type": "math",
            "mathml": "<mfrac><mn>11</mn><mn>2</mn></mfrac>"
          },
          {
            "type": "text",
            "content": "."
          }
        ]
      }
    ],
    "incorrect": [
      {
        "type": "paragraph",
        "content": [
          {
            "type": "text",
            "content": "Not quite. Think of the expression as two upward moves on the number line: first move up "
          },
          {
            "type": "math",
            "mathml": "<mfrac><mn>5</mn><mn>2</mn></mfrac>"
          },
          {
            "type": "text",
            "content": " (which is "
          },
          {
            "type": "math",
            "mathml": "<mn>2.5</mn>"
          },
          {
            "type": "text",
            "content": "), then move up "
          },
          {
            "type": "math",
            "mathml": "<mn>3</mn>"
          },
          {
            "type": "text",
            "content": " more to land at "
          },
          {
            "type": "math",
            "mathml": "<mfrac><mn>11</mn><mn>2</mn></mfrac><mo>=</mo><mn>5.5</mn>"
          },
          {
            "type": "text",
            "content": ". Choose the model showing two arrows upward from 0 to 2.5 and then to 5.5."
          }
        ]
      }
    ]
  },
  "identifier": "which-number-line-model-5-2-plus-3",
  "interactions": {
    "choice_interaction": {
      "type": "choiceInteraction",
      "prompt": [
        {
          "type": "text",
          "content": "Choose the correct number line model."
        }
      ],
      "choices": [
        {
          "content": [
            {
              "type": "paragraph",
              "content": [
                {
                  "type": "text",
                  "content": "A vertical number line from 6 to negative 6 with evenly spaced tick marks. An arrow from 0 to 2.5 points 2.5 tick marks is on right of the number line goes upwards. Another arrow on right of this arrow from 2.5 to 5.5 points 3 tick marks goes upwards. Dotted lines connect the end of the arrowheads to the respective points on the number line. The number line reads from bottom to top: negative 6, negative 4, negative 2, 0, 2, 4 and 6."
                }
              ]
            }
          ],
          "feedback": null,
          "identifier": "A"
        },
        {
          "content": [
            {
              "type": "paragraph",
              "content": [
                {
                  "type": "text",
                  "content": "A vertical number line from 6 to negative 6 with evenly spaced tick marks. An arrow from 0 to negative 2.5 points 2.5 tick marks is on right of the number line and goes downwards. Another arrow on right of this arrow from negative 2.5 to negative 5.5 points 3 tick marks goes downwards. Dotted lines connect the end of the arrowheads to the respective points on the number line. The number line reads from bottom to top: negative 6, negative 4, negative 2, 0, 2, 4 and 6."
                }
              ]
            }
          ],
          "feedback": null,
          "identifier": "B"
        },
        {
          "content": [
            {
              "type": "paragraph",
              "content": [
                {
                  "type": "text",
                  "content": "A vertical number line from 6 to negative 6 with evenly spaced tick marks. An arrow from 0 to negative 2.5 points 2.5 tick marks is on right of the number line and goes downwards. Another arrow on right of this arrow from negative 2.5 to 0.5 points 3 tick marks goes upwards. Dotted lines connect the end of the arrowheads to the respective points on the number line. The number line reads from bottom to top: negative 6, negative 4, negative 2, 0, 2, 4 and 6."
                }
              ]
            }
          ],
          "feedback": null,
          "identifier": "C"
        }
      ],
      "shuffle": true,
      "maxChoices": 1,
      "minChoices": 1,
      "responseIdentifier": "RESPONSE"
    }
  },
  "responseDeclarations": [
    {
      "correct": "A",
      "baseType": "identifier",
      "identifier": "RESPONSE",
      "cardinality": "single"
    }
  ]
}
```

### Relevant code
- Widget registry — src/lib/widgets/generators/index.ts
```
import { generateVennDiagram, VennDiagramPropsSchema } from "./venn-diagram"
import { generateVerticalArithmeticSetup, VerticalArithmeticSetupPropsSchema } from "./vertical-arithmetic-setup"

// The `type` field is now included in the base schemas, so we remove .extend()
export const typedSchemas = {
	"3dIntersectionDiagram": ThreeDIntersectionDiagramPropsSchema,
	absoluteValueNumberLine: AbsoluteValueNumberLinePropsSchema,
	angleDiagram: AngleDiagramPropsSchema,
	barChart: BarChartPropsSchema,
	boxGrid: BoxGridPropsSchema,
	boxPlot: BoxPlotPropsSchema,
	circleDiagram: CircleDiagramPropsSchema,
	compositeShapeDiagram: CompositeShapeDiagramPropsSchema,
	coordinatePlane: CoordinatePlaneComprehensivePropsSchema,
	distanceFormulaGraph: DistanceFormulaGraphPropsSchema,
	functionPlotGraph: FunctionPlotGraphPropsSchema,
	lineEquationGraph: LineEquationGraphPropsSchema,
	pointPlotGraph: PointPlotGraphPropsSchema,
	polygonGraph: PolygonGraphPropsSchema,
	shapeTransformationGraph: ShapeTransformationGraphPropsSchema,
	dataTable: DataTablePropsSchema,
	discreteObjectRatioDiagram: DiscreteObjectRatioDiagramPropsSchema,
	dotPlot: DotPlotPropsSchema,
	doubleNumberLine: DoubleNumberLinePropsSchema,
	emojiImage: EmojiImagePropsSchema,
	figureComparisonDiagram: FigureComparisonDiagramPropsSchema,
	fractionNumberLine: FractionNumberLinePropsSchema,
	geometricSolidDiagram: GeometricSolidDiagramPropsSchema,
	hangerDiagram: HangerDiagramPropsSchema,
	histogram: HistogramPropsSchema,
	inequalityNumberLine: InequalityNumberLinePropsSchema,
	numberLine: NumberLinePropsSchema,
	numberLineForOpposites: NumberLineForOppositesPropsSchema,
	numberLineWithAction: NumberLineWithActionPropsSchema,
	numberLineWithFractionGroups: NumberLineWithFractionGroupsPropsSchema,
	numberSetDiagram: NumberSetDiagramPropsSchema,
	partitionedShape: PartitionedShapePropsSchema,
	pentagonIntersectionDiagram: PentagonIntersectionDiagramPropsSchema,
	pictograph: PictographPropsSchema,
	polyhedronDiagram: PolyhedronDiagramPropsSchema,
	probabilitySpinner: ProbabilitySpinnerPropsSchema,
	polyhedronNetDiagram: PolyhedronNetDiagramPropsSchema,
	pythagoreanProofDiagram: PythagoreanProofDiagramPropsSchema,
	ratioBoxDiagram: RatioBoxDiagramPropsSchema,
	rectangularFrameDiagram: RectangularFrameDiagramPropsSchema,
	scaleCopiesSlider: ScaleCopiesSliderPropsSchema,
```

- Compiler finalization (missing URL hardening) — src/lib/qti-generation/compiler.ts
```
	finalXml = stripXmlComments(finalXml, logger)
	finalXml = removeDoubleNewlines(finalXml, logger)
	finalXml = fixMathMLOperators(finalXml, logger)
	finalXml = fixInequalityOperators(finalXml, logger)
	// Convert HTML entities to Unicode characters at the very end
	return convertHtmlEntities(finalXml, logger)
}

```
