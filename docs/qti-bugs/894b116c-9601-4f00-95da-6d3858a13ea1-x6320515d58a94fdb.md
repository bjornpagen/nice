# Find 40% of 10

- **analysisId**: 894b116c-9601-4f00-95da-6d3858a13ea1
- **questionId**: x6320515d58a94fdb
- **severity**: patch

### Issue
The mathml text "40per hundred" should have a space between "40" and "per".

### Perseus (original)
```json
{
  "hints": [
    {
      "images": {},
      "content": "To find $40\\%$ of $10$, we can multiply $40\\%$ by $10$.\n\nHow do we multiply by a percent?",
      "replace": false,
      "widgets": {}
    },
    {
      "images": {},
      "content": "Percent means per-hundred.\n\n$40\\%=40\\text{ per hundred} =\\dfrac{40}{100}$",
      "replace": false,
      "widgets": {}
    },
    {
      "images": {},
      "content": "$\\begin{align} \n40\\%\\times 10&=\\dfrac{40}{100}\\times10\\\\\n\\\\\n&=\\dfrac{40\\times 10}{100} \\\\\n\\\\\n&= \\dfrac{ 40 ~~\\times \\stackrel{1}{\\cancel{10}}}{  \\underset{10}{}{\\cancel{100}}}  \\\\\n\\\\\n&=\\dfrac{40\\times1}{10}\\\\\n\\\\\n&=4 \\end{align}$",
      "replace": false,
      "widgets": {}
    },
    {
      "images": {},
      "content": "$40\\%$ of $10$ is $4$.",
      "replace": false,
      "widgets": {}
    }
  ],
  "question": {
    "images": {},
    "content": "** What is $40\\%$ of $10$? **\n\n[[☃ numeric-input 1]]",
    "widgets": {
      "numeric-input 1": {
        "type": "numeric-input",
        "graded": true,
        "static": false,
        "options": {
          "size": "normal",
          "static": false,
          "answers": [
            {
              "value": 4,
              "status": "correct",
              "strict": false,
              "message": "",
              "maxError": 0,
              "simplify": "optional"
            }
          ],
          "labelText": "",
          "coefficient": false,
          "multipleNumberInput": false
        },
        "version": {
          "major": 0,
          "minor": 0
        },
        "alignment": "default"
      }
    }
  },
  "answerArea": {
    "tTable": false,
    "zTable": false,
    "chi2Table": false,
    "calculator": false,
    "periodicTable": false
  },
  "itemDataVersion": {
    "major": 0,
    "minor": 1
  }
}
```

### Structured JSON (generated)
```json
{
  "body": [
    {
      "type": "paragraph",
      "content": [
        {
          "type": "text",
          "content": "What is "
        },
        {
          "type": "math",
          "mathml": "<mn>40</mn><mo>%</mo>"
        },
        {
          "type": "text",
          "content": " of "
        },
        {
          "type": "math",
          "mathml": "<mn>10</mn>"
        },
        {
          "type": "text",
          "content": "? "
        },
        {
          "type": "inlineSlot",
          "slotId": "text_entry"
        }
      ]
    }
  ],
  "title": "Find 40% of 10",
  "widgets": {},
  "feedback": {
    "correct": [
      {
        "type": "paragraph",
        "content": [
          {
            "type": "text",
            "content": "Correct! "
          },
          {
            "type": "math",
            "mathml": "<mn>40</mn><mo>%</mo>"
          },
          {
            "type": "text",
            "content": " of "
          },
          {
            "type": "math",
            "mathml": "<mn>10</mn>"
          },
          {
            "type": "text",
            "content": " is "
          },
          {
            "type": "math",
            "mathml": "<mn>4</mn>"
          },
          {
            "type": "text",
            "content": "."
          }
        ]
      }
    ],
    "incorrect": [
      {
        "type": "paragraph",
        "content": [
          {
            "type": "text",
            "content": "To find "
          },
          {
            "type": "math",
            "mathml": "<mn>40</mn><mo>%</mo>"
          },
          {
            "type": "text",
            "content": " of "
          },
          {
            "type": "math",
            "mathml": "<mn>10</mn>"
          },
          {
            "type": "text",
            "content": ", we can multiply "
          },
          {
            "type": "math",
            "mathml": "<mn>40</mn><mo>%</mo>"
          },
          {
            "type": "text",
            "content": " by "
          },
          {
            "type": "math",
            "mathml": "<mn>10</mn>"
          },
          {
            "type": "text",
            "content": ". How do we multiply by a percent?"
          }
        ]
      },
      {
        "type": "paragraph",
        "content": [
          {
            "type": "text",
            "content": "Percent means per-hundred. "
          },
          {
            "type": "math",
            "mathml": "<mn>40</mn><mo>%</mo><mo>=</mo><mn>40</mn><mtext> per hundred</mtext><mo>=</mo><mfrac><mn>40</mn><mn>100</mn></mfrac>"
          }
        ]
      },
      {
        "type": "paragraph",
        "content": [
          {
            "type": "math",
            "mathml": "<mrow><mn>40</mn><mo>%</mo><mo>×</mo><mn>10</mn><mo>=</mo><mrow><mo>(</mo><mfrac><mn>40</mn><mn>100</mn></mfrac><mo>)</mo></mrow><mo>×</mo><mn>10</mn><mo>=</mo><mfrac><mrow><mn>40</mn><mo>×</mo><mn>10</mn></mrow><mn>100</mn></mfrac><mo>=</mo><mn>4</mn></mrow>"
          }
        ]
      },
      {
        "type": "paragraph",
        "content": [
          {
            "type": "math",
            "mathml": "<mn>40</mn><mo>%</mo>"
          },
          {
            "type": "text",
            "content": " of "
          },
          {
            "type": "math",
            "mathml": "<mn>10</mn>"
          },
          {
            "type": "text",
            "content": " is "
          },
          {
            "type": "math",
            "mathml": "<mn>4</mn>"
          },
          {
            "type": "text",
            "content": "."
          }
        ]
      }
    ]
  },
  "identifier": "percent-of-number-numeric-input",
  "interactions": {
    "text_entry": {
      "type": "textEntryInteraction",
      "expectedLength": null,
      "responseIdentifier": "RESPONSE"
    }
  },
  "responseDeclarations": [
    {
      "correct": 4,
      "baseType": "integer",
      "identifier": "RESPONSE",
      "cardinality": "single"
    }
  ]
}
```

### Relevant code
- Compiler finalization (missing URL hardening) — src/lib/qti-generation/compiler.ts
```
	finalXml = stripXmlComments(finalXml, logger)
	finalXml = removeDoubleNewlines(finalXml, logger)
	finalXml = fixMathMLOperators(finalXml, logger)
	finalXml = fixInequalityOperators(finalXml, logger)
	// Convert HTML entities to Unicode characters at the very end
	return convertHtmlEntities(finalXml, logger)
}

```

### Root cause analysis
- Needs manual triage; automatic classifier found no known category.

### Proposed fixes
- Add a targeted test and create a dedicated validator/prompt constraint for this pattern.
