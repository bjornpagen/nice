{
	"generatedAt": "2025-08-09T16:02:31.181Z",
	"summary": {
		"totalErrors": 945,
		"categories": {
			"slot_consistency_validation_failed": 146,
			"slot_declaration_mismatch": 292,
			"unsupported_interaction_type_detected": 124,
			"unsupported_interaction_compilation_failed": 124,
			"unsupported_interaction_compilation_wrapper": 114,
			"compiler_missing_block_slot_content": 106,
			"raw_currency_percent_in_text": 13,
			"currency_percent_must_be_mathml": 26
		},
		"unsupportedInteractionTypes": {
			"matcher": 163,
			"label-image": 101,
			"sorter": 72,
			"phet-simulation": 26
		},
		"slotNameFrequencies": {
			"unusedDeclaredSlots": {
				"choice_interaction__A__v1": 25,
				"choice_interaction__B__v1": 25,
				"choice_interaction__C__v1": 25,
				"choice_a_image": 22,
				"choice_b_image": 22,
				"choice_c_image": 22,
				"choice_a_graph": 17,
				"choice_b_graph": 17,
				"choice_c_graph": 17,
				"choice_a_diagram": 16,
				"choice_b_diagram": 16,
				"choice_c_diagram": 16,
				"choice_d_graph": 10,
				"choice_interaction__D__v1": 9,
				"choice_a_tree": 9,
				"choice_b_tree": 9,
				"choice_c_tree": 9,
				"choice_a_model": 9,
				"choice_b_model": 9,
				"choice_c_model": 9
			},
			"missingBlockSlotContent": {
				"RESPONSE__A__v1": 106
			}
		}
	},
	"errors": [
		{
			"id": "slot_consistency",
			"name": "Slot consistency validation failed",
			"count": 146,
			"description": "Slots declared in widgets/interactions not used in body after Shot 1. Enforced strict consistency in structured pipeline.",
			"code": ["src/lib/qti-generation/structured/client.ts:355-405"],
			"samples": [
				{
					"line": 53601,
					"excerpt": " PUT /api/inngest 200 in 242ms\nDEBUG shot 1 complete identifier=plate-boundary-mountains-radio widgetSlots=[RESPONSE__A__v1,RESPONSE__B__v1,RESPONSE__C__v1] interactionSlots=[RESPONSE]\nDEBUG validating consistency between declared slots and body content\nERROR slot consistency validation failed undeclaredSlots=[] unusedSlots=[RESPONSE__A__v1,RESPONSE__B__v1,RESPONSE__C__v1]\nERROR focused structured item generation failed error=Slot declaration mismatch detected after shell generation.\n- Slots used in content but not declared in widget/interaction arrays: []\n- Slots declared in arrays but not used in any content field: [RESPONSE__A__v1, RESPONSE__B__v1, RESPONSE__C__v1]"
				},
				{
					"line": 77745,
					"excerpt": "DEBUG calling openai for interaction content generation with multimodal input interactionSlotNames=[matcher_1]\nDEBUG shot 1 complete identifier=poecilia-xiphophorus-relatedness-tree widgetSlots=[choice_interaction__A__v1,choice_interaction__B__v1,choice_interaction__C__v1] interactionSlots=[choice_interaction]\nDEBUG validating consistency between declared slots and body content\nERROR slot consistency validation failed undeclaredSlots=[] unusedSlots=[choice_interaction__A__v1,choice_interaction__B__v1,choice_interaction__C__v1]\nERROR focused structured item generation failed error=Slot declaration mismatch detected after shell generation.\n- Slots used in content but not declared in widget/interaction arrays: []\n- Slots declared in arrays but not used in any content field: [choice_interaction__A__v1, choice_interaction__B__v1, choice_interaction__C__v1]"
				},
				{
					"line": 80678,
					"excerpt": "DEBUG calling openai for slot-to-widget mapping slotNames=[image_1]\nDEBUG shot 1 complete identifier=transcription-identify-mrna-radio widgetSlots=[dna_diagram,choice_interaction__A__v1,choice_interaction__B__v1,choice_interaction__C__v1,choice_interaction__D__v1] interactionSlots=[choice_interaction]\nDEBUG validating consistency between declared slots and body content\nERROR slot consistency validation failed undeclaredSlots=[] unusedSlots=[choice_interaction__A__v1,choice_interaction__B__v1,choice_interaction__C__v1,choice_interaction__D__v1]\nERROR focused structured item generation failed error=Slot declaration mismatch detected after shell generation.\n- Slots used in content but not declared in widget/interaction arrays: []\n- Slots declared in arrays but not used in any content field: [choice_interaction__A__v1, choice_interaction__B__v1, choice_interaction__C__v1, choice_interaction__D__v1]"
				}
			]
		},
		{
			"id": "slot_mismatch",
			"name": "Slot declaration mismatch",
			"count": 292,
			"description": "Summary error emitted alongside consistency failure; includes undeclared/unused slot details.",
			"code": ["src/lib/qti-generation/structured/client.ts:397-404"],
			"samples": [
				{
					"line": 53602,
					"excerpt": "DEBUG shot 1 complete identifier=plate-boundary-mountains-radio widgetSlots=[RESPONSE__A__v1,RESPONSE__B__v1,RESPONSE__C__v1] interactionSlots=[RESPONSE]\nDEBUG validating consistency between declared slots and body content\nERROR slot consistency validation failed undeclaredSlots=[] unusedSlots=[RESPONSE__A__v1,RESPONSE__B__v1,RESPONSE__C__v1]\nERROR focused structured item generation failed error=Slot declaration mismatch detected after shell generation.\n- Slots used in content but not declared in widget/interaction arrays: []\n- Slots declared in arrays but not used in any content field: [RESPONSE__A__v1, RESPONSE__B__v1, RESPONSE__C__v1]\nERROR focused generation: Slot declaration mismatch detected after shell generation."
				},
				{
					"line": 53605,
					"excerpt": "ERROR focused structured item generation failed error=Slot declaration mismatch detected after shell generation.\n- Slots used in content but not declared in widget/interaction arrays: []\n- Slots declared in arrays but not used in any content field: [RESPONSE__A__v1, RESPONSE__B__v1, RESPONSE__C__v1]\nERROR focused generation: Slot declaration mismatch detected after shell generation.\n- Slots used in content but not declared in widget/interaction arrays: []\n- Slots declared in arrays but not used in any content field: [RESPONSE__A__v1, RESPONSE__B__v1, RESPONSE__C__v1]\nDEBUG shot 1 complete identifier=humans-chimpanzees-common-ancestor widgetSlots=[] interactionSlots=[choice_interaction]"
				},
				{
					"line": 77746,
					"excerpt": "DEBUG shot 1 complete identifier=poecilia-xiphophorus-relatedness-tree widgetSlots=[choice_interaction__A__v1,choice_interaction__B__v1,choice_interaction__C__v1] interactionSlots=[choice_interaction]\nDEBUG validating consistency between declared slots and body content\nERROR slot consistency validation failed undeclaredSlots=[] unusedSlots=[choice_interaction__A__v1,choice_interaction__B__v1,choice_interaction__C__v1]\nERROR focused structured item generation failed error=Slot declaration mismatch detected after shell generation.\n- Slots used in content but not declared in widget/interaction arrays: []\n- Slots declared in arrays but not used in any content field: [choice_interaction__A__v1, choice_interaction__B__v1, choice_interaction__C__v1]\nERROR focused generation: Slot declaration mismatch detected after shell generation."
				}
			]
		},
		{
			"id": "unsupported_interaction",
			"name": "Unsupported Perseus interaction type",
			"count": 248,
			"description": "Perseus widgets flagged as unsupported (matcher, label-image, sorter, phet-simulation). Items fail compilation.",
			"code": [
				"src/lib/qti-generation/compiler.ts:271-286",
				"src/lib/qti-generation/structured/prompts.ts:1136-1166",
				"src/inngest/functions/orchestrate-focused-qti-generation.ts:44-54"
			],
			"breakdown": {
				"matcher": 163,
				"label-image": 101,
				"sorter": 72,
				"phet-simulation": 26
			},
			"samples": [
				{
					"line": 82414,
					"excerpt": "DEBUG no widgets to generate, skipping shot 4\nDEBUG shot 4 complete generatedWidgetKeys=[]\nINFO structured qti generation process successful identifier=order-body-organization-least-to-most-complex\nERROR unsupported interaction type detected, failing compilation identifier=order-body-organization-least-to-most-complex perseusType=sorter\nERROR focused qti compilation failed error=item contains unsupported Perseus interaction: sorter: unsupported interaction type found\nERROR compilation: item contains unsupported Perseus interaction: sorter: unsupported interaction type found\nDEBUG shot 1 complete identifier=anolis-relatedness-tree-choice widgetSlots=[choice_interaction__A__v1,choice_interaction__B__v1,choice_interaction__C__v1] interactionSlots=[choice_interaction]"
				},
				{
					"line": 93049,
					"excerpt": "DEBUG no widgets to generate, skipping shot 4\nDEBUG shot 4 complete generatedWidgetKeys=[]\nINFO structured qti generation process successful identifier=negative-feedback-matching\nERROR unsupported interaction type detected, failing compilation identifier=negative-feedback-matching perseusType=matcher\nERROR focused qti compilation failed error=item contains unsupported Perseus interaction: matcher: unsupported interaction type found\nERROR compilation: item contains unsupported Perseus interaction: matcher: unsupported interaction type found\nDEBUG shot 1 complete identifier=sea-cucumber-living-characteristics widgetSlots=[image_1] interactionSlots=[choice_interaction]"
				},
				{
					"line": 106363,
					"excerpt": "DEBUG no widgets to generate, skipping shot 4\nDEBUG shot 4 complete generatedWidgetKeys=[]\nINFO structured qti generation process successful identifier=consumer-types-matcher\nERROR unsupported interaction type detected, failing compilation identifier=consumer-types-matcher perseusType=matcher\nERROR focused qti compilation failed error=item contains unsupported Perseus interaction: matcher: unsupported interaction type found\nERROR compilation: item contains unsupported Perseus interaction: matcher: unsupported interaction type found\nDEBUG shot 3 complete generatedInteractionKeys=[dropdown_1,dropdown_2]"
				}
			]
		},
		{
			"id": "compiler_missing_block_slot_content",
			"name": "Compiler: block slot content missing",
			"count": 106,
			"description": "Render step cannot find content for a declared block slot ID; indicates merge/mapping omissions.",
			"code": ["src/lib/qti-generation/content-renderer.ts:45-51"],
			"topSlots": {
				"RESPONSE__A__v1": 106
			},
			"samples": [
				{
					"line": 1123275,
					"excerpt": "DEBUG no widgets to generate, skipping shot 4\nDEBUG shot 4 complete generatedWidgetKeys=[]\nINFO structured qti generation process successful identifier=rift-valleys-plate-movement-diagram\nERROR focused qti compilation failed error=Compiler Error: Content for block slot 'RESPONSE__A__v1' not found.\nERROR compilation: Compiler Error: Content for block slot 'RESPONSE__A__v1' not found.\n POST /api/inngest?fnId=nice-orchestrate-focused-qti-generation&stepId=step 500 in 94793ms\nDEBUG shot 3 complete generatedInteractionKeys=[choice_interaction]"
				},
				{
					"line": 1123276,
					"excerpt": "DEBUG shot 4 complete generatedWidgetKeys=[]\nINFO structured qti generation process successful identifier=rift-valleys-plate-movement-diagram\nERROR focused qti compilation failed error=Compiler Error: Content for block slot 'RESPONSE__A__v1' not found.\nERROR compilation: Compiler Error: Content for block slot 'RESPONSE__A__v1' not found.\n POST /api/inngest?fnId=nice-orchestrate-focused-qti-generation&stepId=step 500 in 94793ms\nDEBUG shot 3 complete generatedInteractionKeys=[choice_interaction]\nDEBUG shot 4: generating widget content"
				},
				{
					"line": 1130185,
					"excerpt": "DEBUG no widgets to generate, skipping shot 4\nDEBUG shot 4 complete generatedWidgetKeys=[]\nINFO structured qti generation process successful identifier=solar-eclipse-positions-diagram\nERROR focused qti compilation failed error=Compiler Error: Content for block slot 'RESPONSE__A__v1' not found.\nERROR compilation: Compiler Error: Content for block slot 'RESPONSE__A__v1' not found.\nINFO starting focused qti generation questionId=xe6709d6a173dec5f collection=simple-visual\nINFO starting structured qti generation process widgetCollection=simple-visual"
				}
			]
		},
		{
			"id": "currency_percent",
			"name": "Currency/percent must use MathML",
			"count": 26,
			"description": "Strict rule requiring MathML for $ and %; detected in pre-validator and causes compilation failure.",
			"code": ["src/lib/qti-generation/pre-validator.ts:76-89"],
			"samples": [
				{
					"line": 239694,
					"excerpt": "DEBUG shot 4 complete generatedWidgetKeys=[image_1,image_2]\nINFO structured qti generation process successful identifier=shark-fins-vs-dolphin-flippers-homology-analogy\nDEBUG deduplicated prompt text from body count=1\nERROR raw currency/percent in text content context=item.body.paragraph text=\"[Tiburón azul (Prionace glauca), canal Fayal-Pico, islas Azores, Portugal, 2020-07-27, DD 28](https://commons.wikimedia\nERROR focused qti compilation failed error=currency and percent must be expressed in MathML, not raw text (use <mo>$</mo><mn>n</mn> and <mn>n</mn><mo>%</mo>)\nERROR compilation: currency and percent must be expressed in MathML, not raw text (use <mo>$</mo><mn>n</mn> and <mn>n</mn><mo>%</mo>)\nDEBUG shot 3 complete generatedInteractionKeys=[choice_interaction]"
				},
				{
					"line": 254323,
					"excerpt": "DEBUG shot 4 complete generatedWidgetKeys=[fish_body_size_table]\nINFO structured qti generation process successful identifier=fish-body-size-selection-radio\nDEBUG deduplicated prompt text from body count=1\nERROR raw currency/percent in text content context=interaction[choice_interaction].choice[A].feedback text=The percentage of fish with a large body size increased from 15% to 90% after the environment changed. So, fish with a l\nERROR focused qti compilation failed error=currency and percent must be expressed in MathML, not raw text (use <mo>$</mo><mn>n</mn> and <mn>n</mn><mo>%</mo>)\nERROR compilation: currency and percent must be expressed in MathML, not raw text (use <mo>$</mo><mn>n</mn> and <mn>n</mn><mo>%</mo>)\nINFO successfully mapped slots to widgets mapping={\"stimulus_image\":urlImage} count=1"
				},
				{
					"line": 258797,
					"excerpt": " POST /api/inngest?fnId=nice-orchestrate-focused-qti-generation&stepId=step 200 in 90008ms\nDEBUG shot 4 complete generatedWidgetKeys=[image_1]\nINFO structured qti generation process successful identifier=bear-species-relatedness\nERROR raw currency/percent in text content context=item.body.paragraph text=“Polar bear, Svalbard (Norway) 2013” — https://commons.wikimedia.org/wiki/File:Medv%C4%9Bd_ledn%C3%AD_(Ursus_maritimus).\nERROR focused qti compilation failed error=currency and percent must be expressed in MathML, not raw text (use <mo>$</mo><mn>n</mn> and <mn>n</mn><mo>%</mo>)\nERROR compilation: currency and percent must be expressed in MathML, not raw text (use <mo>$</mo><mn>n</mn> and <mn>n</mn><mo>%</mo>)\n POST /api/inngest?fnId=nice-orchestrate-focused-qti-generation&stepId=step 200 in 182923ms"
				}
			]
		}
	]
}
