// ============================================================================
// EXTRACTED TEST FILE - AUTO-GENERATED
// ============================================================================
// This file was automatically generated from database structured_json data
// Generated on: 2025-09-18T05:17:02.151Z
// Widget Type: compositeShapeDiagram
// Source: Real questions from database
//
// These tests use actual widget configurations extracted from production data
// to ensure comprehensive test coverage with realistic scenarios.
//
// Note: Database data may not perfectly match current widget schemas, so these
// tests rely on runtime validation within generateWidget() for flexibility.
//
// DO NOT EDIT THIS FILE DIRECTLY - it will be overwritten on regeneration
//
// Run tests: bun test tests/widgets/composite-shape-diagram.extracted.test.ts
// Update snapshots: bun test tests/widgets/composite-shape-diagram.extracted.test.ts --update-snapshots
// ============================================================================

import { describe, test, expect } from "bun:test"
import { generateWidget } from "@superbuilders/qti-assessment-item-generator/widgets/widget-generator"
import type { Widget, WidgetInput } from "@superbuilders/qti-assessment-item-generator/widgets/registry"
import * as errors from "@superbuilders/errors"
import * as logger from "@superbuilders/slog"

describe("compositeShapeDiagram widget tests", () => {
	// Extracted from question: xb9a2f2df68f7f278
	// Question: Area of the shaded region (rectangle and circle)
	// Widget key: image_1
	test("composite-shape-diagram - [xb9a2f2df68f7f278] Area of the shaded region (rectangle and circle)", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "fit": "auto",
		  "type": "compositeShapeDiagram",
		  "width": 350,
		  "height": 300,
		  "shapes": [
		    {
		      "id": "rect1",
		      "type": "polygon",
		      "vertexIds": [
		        "TL",
		        "TR",
		        "BR",
		        "BL"
		      ]
		    },
		    {
		      "id": "circle1",
		      "type": "circle",
		      "radius": 3,
		      "centerId": "C"
		    }
		  ],
		  "vertices": [
		    {
		      "x": 0,
		      "y": 0,
		      "id": "TL"
		    },
		    {
		      "x": 8,
		      "y": 0,
		      "id": "TR"
		    },
		    {
		      "x": 8,
		      "y": 7,
		      "id": "BR"
		    },
		    {
		      "x": 0,
		      "y": 7,
		      "id": "BL"
		    },
		    {
		      "x": 4,
		      "y": 3.5,
		      "id": "C"
		    },
		    {
		      "x": 7,
		      "y": 3.5,
		      "id": "R"
		    }
		  ],
		  "regionLabels": null,
		  "boundaryEdges": [
		    {
		      "to": "TR",
		      "from": "TL",
		      "type": "simple",
		      "label": {
		        "unit": "cm",
		        "value": 8
		      }
		    },
		    {
		      "to": "BR",
		      "from": "TR",
		      "type": "simple",
		      "label": null
		    },
		    {
		      "to": "BL",
		      "from": "BR",
		      "type": "simple",
		      "label": null
		    },
		    {
		      "to": "TL",
		      "from": "BL",
		      "type": "simple",
		      "label": {
		        "unit": "cm",
		        "value": 7
		      }
		    }
		  ],
		  "shadedRegions": [
		    {
		      "path": [
		        {
		          "shapeId": "rect1",
		          "pathType": "outer"
		        },
		        {
		          "shapeId": "circle1",
		          "pathType": "inner"
		        }
		      ],
		      "fillColor": "#ccfaff80"
		    }
		  ],
		  "internalSegments": [
		    {
		      "label": {
		        "unit": "cm",
		        "value": 3
		      },
		      "style": "solid",
		      "toVertexId": "R",
		      "fromVertexId": "C"
		    }
		  ],
		  "rightAngleMarkers": null
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for compositeShapeDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

	// Extracted from question: xdd3424e759f98328
	// Question: Area of a shaded region (circle and rectangle)
	// Widget key: image_1
	test("composite-shape-diagram - [xdd3424e759f98328] Area of a shaded region (circle and rectangle)", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "fit": "auto",
		  "type": "compositeShapeDiagram",
		  "width": 360,
		  "height": 360,
		  "shapes": [
		    {
		      "id": "rect",
		      "type": "polygon",
		      "vertexIds": [
		        "topLeft",
		        "topRight",
		        "bottomRight",
		        "bottomLeft"
		      ]
		    },
		    {
		      "id": "circ",
		      "type": "circle",
		      "radius": 11,
		      "centerId": "O"
		    }
		  ],
		  "vertices": [
		    {
		      "x": 0,
		      "y": 0,
		      "id": "O"
		    },
		    {
		      "x": 11,
		      "y": 0,
		      "id": "C"
		    },
		    {
		      "x": -2,
		      "y": -3,
		      "id": "topLeft"
		    },
		    {
		      "x": 2,
		      "y": -3,
		      "id": "topRight"
		    },
		    {
		      "x": 2,
		      "y": 3,
		      "id": "bottomRight"
		    },
		    {
		      "x": -2,
		      "y": 3,
		      "id": "bottomLeft"
		    }
		  ],
		  "regionLabels": null,
		  "boundaryEdges": [
		    {
		      "to": "topRight",
		      "from": "topLeft",
		      "type": "simple",
		      "label": {
		        "unit": "cm",
		        "value": 4
		      }
		    },
		    {
		      "to": "bottomRight",
		      "from": "topRight",
		      "type": "simple",
		      "label": null
		    },
		    {
		      "to": "bottomLeft",
		      "from": "bottomRight",
		      "type": "simple",
		      "label": null
		    },
		    {
		      "to": "topLeft",
		      "from": "bottomLeft",
		      "type": "simple",
		      "label": {
		        "unit": "cm",
		        "value": 6
		      }
		    }
		  ],
		  "shadedRegions": [
		    {
		      "path": [
		        {
		          "shapeId": "circ",
		          "pathType": "outer"
		        },
		        {
		          "shapeId": "rect",
		          "pathType": "inner"
		        }
		      ],
		      "fillColor": "#ccfaff80"
		    }
		  ],
		  "internalSegments": [
		    {
		      "label": {
		        "unit": "cm",
		        "value": 11
		      },
		      "style": "solid",
		      "toVertexId": "C",
		      "fromVertexId": "O"
		    }
		  ],
		  "rightAngleMarkers": null
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for compositeShapeDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

	// Extracted from question: x9b74005f28d0b824
	// Question: Area of a shaded region between a circle and a rectangle
	// Widget key: image_1
	test("composite-shape-diagram - [x9b74005f28d0b824] Area of a shaded region between a circle and a rectangle", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "fit": "auto",
		  "type": "compositeShapeDiagram",
		  "width": 360,
		  "height": 360,
		  "shapes": [
		    {
		      "id": "circle1",
		      "type": "circle",
		      "radius": 120,
		      "centerId": "center"
		    },
		    {
		      "id": "rect1",
		      "type": "polygon",
		      "vertexIds": [
		        "r_tl",
		        "r_tr",
		        "r_br",
		        "r_bl"
		      ]
		    }
		  ],
		  "vertices": [
		    {
		      "x": 130,
		      "y": 130,
		      "id": "center"
		    },
		    {
		      "x": 250,
		      "y": 130,
		      "id": "east"
		    },
		    {
		      "x": 105,
		      "y": 75,
		      "id": "r_tl"
		    },
		    {
		      "x": 155,
		      "y": 75,
		      "id": "r_tr"
		    },
		    {
		      "x": 155,
		      "y": 185,
		      "id": "r_br"
		    },
		    {
		      "x": 105,
		      "y": 185,
		      "id": "r_bl"
		    }
		  ],
		  "regionLabels": null,
		  "boundaryEdges": [],
		  "shadedRegions": [
		    {
		      "path": [
		        {
		          "shapeId": "circle1",
		          "pathType": "outer"
		        },
		        {
		          "shapeId": "rect1",
		          "pathType": "inner"
		        }
		      ],
		      "fillColor": "#ccfaff80"
		    }
		  ],
		  "internalSegments": [
		    {
		      "label": {
		        "unit": "cm",
		        "value": 12
		      },
		      "style": "solid",
		      "toVertexId": "east",
		      "fromVertexId": "center"
		    },
		    {
		      "label": {
		        "unit": "cm",
		        "value": 11
		      },
		      "style": "solid",
		      "toVertexId": "r_br",
		      "fromVertexId": "r_tr"
		    },
		    {
		      "label": {
		        "unit": "cm",
		        "value": 5
		      },
		      "style": "solid",
		      "toVertexId": "r_tr",
		      "fromVertexId": "r_tl"
		    }
		  ],
		  "rightAngleMarkers": null
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for compositeShapeDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

	// Extracted from question: x70ade9874035cc08
	// Question: Area of a shaded region between a square and an inscribed circle
	// Widget key: image_1
	test("composite-shape-diagram - [x70ade9874035cc08] Area of a shaded region between a square and an inscribed circle", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "fit": "auto",
		  "type": "compositeShapeDiagram",
		  "width": 420,
		  "height": 350,
		  "shapes": [
		    {
		      "id": "square",
		      "type": "polygon",
		      "vertexIds": [
		        "topLeft",
		        "topRight",
		        "bottomRight",
		        "bottomLeft"
		      ]
		    },
		    {
		      "id": "circle",
		      "type": "circle",
		      "radius": 35,
		      "centerId": "center"
		    }
		  ],
		  "vertices": [
		    {
		      "x": 35,
		      "y": 35,
		      "id": "topLeft"
		    },
		    {
		      "x": 140,
		      "y": 35,
		      "id": "topRight"
		    },
		    {
		      "x": 140,
		      "y": 140,
		      "id": "bottomRight"
		    },
		    {
		      "x": 35,
		      "y": 140,
		      "id": "bottomLeft"
		    },
		    {
		      "x": 87.5,
		      "y": 87.5,
		      "id": "center"
		    },
		    {
		      "x": 122.5,
		      "y": 87.5,
		      "id": "circleRight"
		    }
		  ],
		  "regionLabels": null,
		  "boundaryEdges": [
		    {
		      "to": "topRight",
		      "from": "topLeft",
		      "type": "simple",
		      "label": {
		        "unit": "cm",
		        "value": 3
		      }
		    },
		    {
		      "to": "bottomRight",
		      "from": "topRight",
		      "type": "simple",
		      "label": null
		    },
		    {
		      "to": "bottomLeft",
		      "from": "bottomRight",
		      "type": "simple",
		      "label": null
		    },
		    {
		      "to": "topLeft",
		      "from": "bottomLeft",
		      "type": "simple",
		      "label": {
		        "unit": "cm",
		        "value": 3
		      }
		    }
		  ],
		  "shadedRegions": [
		    {
		      "path": [
		        {
		          "shapeId": "square",
		          "pathType": "outer"
		        },
		        {
		          "shapeId": "circle",
		          "pathType": "inner"
		        }
		      ],
		      "fillColor": "#ccfaff80"
		    }
		  ],
		  "internalSegments": [
		    {
		      "label": {
		        "unit": "cm",
		        "value": 1
		      },
		      "style": "solid",
		      "toVertexId": "circleRight",
		      "fromVertexId": "center"
		    }
		  ],
		  "rightAngleMarkers": null
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for compositeShapeDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

	// Extracted from question: x7893c043131fd6d6
	// Question: Area of a shaded region (circle and rectangle)
	// Widget key: image_1
	test("composite-shape-diagram - [x7893c043131fd6d6] Area of a shaded region (circle and rectangle)", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "fit": "auto",
		  "type": "compositeShapeDiagram",
		  "width": 360,
		  "height": 360,
		  "shapes": [
		    {
		      "id": "outerCircle",
		      "type": "circle",
		      "radius": 160,
		      "centerId": "O"
		    },
		    {
		      "id": "innerRect",
		      "type": "polygon",
		      "vertexIds": [
		        "rectTL",
		        "rectTR",
		        "rectBR",
		        "rectBL"
		      ]
		    }
		  ],
		  "vertices": [
		    {
		      "x": 180,
		      "y": 180,
		      "id": "O"
		    },
		    {
		      "x": 340,
		      "y": 180,
		      "id": "R"
		    },
		    {
		      "x": 60,
		      "y": 160,
		      "id": "rectTL"
		    },
		    {
		      "x": 300,
		      "y": 160,
		      "id": "rectTR"
		    },
		    {
		      "x": 300,
		      "y": 200,
		      "id": "rectBR"
		    },
		    {
		      "x": 60,
		      "y": 200,
		      "id": "rectBL"
		    }
		  ],
		  "regionLabels": null,
		  "boundaryEdges": [],
		  "shadedRegions": [
		    {
		      "path": [
		        {
		          "shapeId": "outerCircle",
		          "pathType": "outer"
		        },
		        {
		          "shapeId": "innerRect",
		          "pathType": "inner"
		        }
		      ],
		      "fillColor": "#ccfaff80"
		    }
		  ],
		  "internalSegments": [
		    {
		      "label": {
		        "unit": "cm",
		        "value": 8
		      },
		      "style": "solid",
		      "toVertexId": "R",
		      "fromVertexId": "O"
		    },
		    {
		      "label": {
		        "unit": "cm",
		        "value": 12
		      },
		      "style": "solid",
		      "toVertexId": "rectTR",
		      "fromVertexId": "rectTL"
		    },
		    {
		      "label": {
		        "unit": "cm",
		        "value": 2
		      },
		      "style": "solid",
		      "toVertexId": "rectBR",
		      "fromVertexId": "rectTR"
		    }
		  ],
		  "rightAngleMarkers": null
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for compositeShapeDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

	// Extracted from question: x3a68667079fdffdd
	// Question: Area of a shaded region (circle minus rectangle)
	// Widget key: image_1
	test("composite-shape-diagram - [x3a68667079fdffdd] Area of a shaded region (circle minus rectangle)", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "fit": "auto",
		  "type": "compositeShapeDiagram",
		  "width": 400,
		  "height": 400,
		  "shapes": [
		    {
		      "id": "circle1",
		      "type": "circle",
		      "radius": 8,
		      "centerId": "O"
		    },
		    {
		      "id": "rect1",
		      "type": "polygon",
		      "vertexIds": [
		        "A",
		        "B",
		        "C",
		        "D"
		      ]
		    }
		  ],
		  "vertices": [
		    {
		      "x": 0,
		      "y": 0,
		      "id": "O"
		    },
		    {
		      "x": 8,
		      "y": 0,
		      "id": "R"
		    },
		    {
		      "x": -3,
		      "y": -2,
		      "id": "A"
		    },
		    {
		      "x": 3,
		      "y": -2,
		      "id": "B"
		    },
		    {
		      "x": 3,
		      "y": 2,
		      "id": "C"
		    },
		    {
		      "x": -3,
		      "y": 2,
		      "id": "D"
		    }
		  ],
		  "regionLabels": null,
		  "boundaryEdges": [
		    {
		      "to": "B",
		      "from": "A",
		      "type": "simple",
		      "label": {
		        "unit": "cm",
		        "value": 3
		      }
		    },
		    {
		      "to": "C",
		      "from": "B",
		      "type": "simple",
		      "label": {
		        "unit": "cm",
		        "value": 2
		      }
		    }
		  ],
		  "shadedRegions": [
		    {
		      "path": [
		        {
		          "shapeId": "circle1",
		          "pathType": "outer"
		        },
		        {
		          "shapeId": "rect1",
		          "pathType": "inner"
		        }
		      ],
		      "fillColor": "#ccfaff80"
		    }
		  ],
		  "internalSegments": [
		    {
		      "label": {
		        "unit": "cm",
		        "value": 4
		      },
		      "style": "solid",
		      "toVertexId": "R",
		      "fromVertexId": "O"
		    }
		  ],
		  "rightAngleMarkers": null
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for compositeShapeDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

	// Extracted from question: x55061cb6ed4c4ee5
	// Question: Area of a shaded region (rectangle and circle)
	// Widget key: image_1
	test("composite-shape-diagram - [x55061cb6ed4c4ee5] Area of a shaded region (rectangle and circle)", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "fit": "auto",
		  "type": "compositeShapeDiagram",
		  "width": 350,
		  "height": 350,
		  "shapes": [
		    {
		      "id": "rect1",
		      "type": "polygon",
		      "vertexIds": [
		        "A",
		        "B",
		        "C",
		        "D"
		      ]
		    },
		    {
		      "id": "circ1",
		      "type": "circle",
		      "radius": 25,
		      "centerId": "O"
		    }
		  ],
		  "vertices": [
		    {
		      "x": 25,
		      "y": 25,
		      "id": "A"
		    },
		    {
		      "x": 300,
		      "y": 25,
		      "id": "B"
		    },
		    {
		      "x": 300,
		      "y": 325,
		      "id": "C"
		    },
		    {
		      "x": 25,
		      "y": 325,
		      "id": "D"
		    },
		    {
		      "x": 162.5,
		      "y": 175,
		      "id": "O"
		    },
		    {
		      "x": 187.5,
		      "y": 175,
		      "id": "R"
		    }
		  ],
		  "regionLabels": null,
		  "boundaryEdges": [
		    {
		      "to": "B",
		      "from": "A",
		      "type": "simple",
		      "label": {
		        "unit": "cm",
		        "value": 11
		      }
		    },
		    {
		      "to": "C",
		      "from": "B",
		      "type": "simple",
		      "label": null
		    },
		    {
		      "to": "D",
		      "from": "C",
		      "type": "simple",
		      "label": null
		    },
		    {
		      "to": "A",
		      "from": "D",
		      "type": "simple",
		      "label": {
		        "unit": "cm",
		        "value": 12
		      }
		    }
		  ],
		  "shadedRegions": [
		    {
		      "path": [
		        {
		          "shapeId": "rect1",
		          "pathType": "outer"
		        },
		        {
		          "shapeId": "circ1",
		          "pathType": "inner"
		        }
		      ],
		      "fillColor": "#ccfaff80"
		    }
		  ],
		  "internalSegments": [
		    {
		      "label": {
		        "unit": "cm",
		        "value": 1
		      },
		      "style": "solid",
		      "toVertexId": "R",
		      "fromVertexId": "O"
		    }
		  ],
		  "rightAngleMarkers": null
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for compositeShapeDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

	// Extracted from question: xc12b923ac5d6ad9e
	// Question: Area of a shaded region between a rectangle and a circle
	// Widget key: image_1
	test("composite-shape-diagram - [xc12b923ac5d6ad9e] Area of a shaded region between a rectangle and a circle", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "fit": "auto",
		  "type": "compositeShapeDiagram",
		  "width": 360,
		  "height": 360,
		  "shapes": [
		    {
		      "id": "rect",
		      "type": "polygon",
		      "vertexIds": [
		        "topLeft",
		        "topRight",
		        "bottomRight",
		        "bottomLeft"
		      ]
		    },
		    {
		      "id": "circle",
		      "type": "circle",
		      "radius": 35,
		      "centerId": "center"
		    }
		  ],
		  "vertices": [
		    {
		      "x": 35,
		      "y": 35,
		      "id": "topLeft"
		    },
		    {
		      "x": 140,
		      "y": 35,
		      "id": "topRight"
		    },
		    {
		      "x": 140,
		      "y": 175,
		      "id": "bottomRight"
		    },
		    {
		      "x": 35,
		      "y": 175,
		      "id": "bottomLeft"
		    },
		    {
		      "x": 87.5,
		      "y": 105,
		      "id": "center"
		    },
		    {
		      "x": 122.5,
		      "y": 105,
		      "id": "circleRight"
		    }
		  ],
		  "regionLabels": null,
		  "boundaryEdges": [
		    {
		      "to": "topRight",
		      "from": "topLeft",
		      "type": "simple",
		      "label": {
		        "unit": "cm",
		        "value": 3
		      }
		    },
		    {
		      "to": "bottomRight",
		      "from": "topRight",
		      "type": "simple",
		      "label": null
		    },
		    {
		      "to": "bottomLeft",
		      "from": "bottomRight",
		      "type": "simple",
		      "label": null
		    },
		    {
		      "to": "topLeft",
		      "from": "bottomLeft",
		      "type": "simple",
		      "label": {
		        "unit": "cm",
		        "value": 4
		      }
		    }
		  ],
		  "shadedRegions": [
		    {
		      "path": [
		        {
		          "shapeId": "rect",
		          "pathType": "outer"
		        },
		        {
		          "shapeId": "circle",
		          "pathType": "inner"
		        }
		      ],
		      "fillColor": "#ccfaff80"
		    }
		  ],
		  "internalSegments": [
		    {
		      "label": {
		        "unit": "cm",
		        "value": 1
		      },
		      "style": "solid",
		      "toVertexId": "circleRight",
		      "fromVertexId": "center"
		    }
		  ],
		  "rightAngleMarkers": null
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for compositeShapeDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

	// Extracted from question: x9b473530bde85c53
	// Question: Area of a shaded region (rectangle and circle)
	// Widget key: image_1
	test("composite-shape-diagram - [x9b473530bde85c53] Area of a shaded region (rectangle and circle)", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "fit": "auto",
		  "type": "compositeShapeDiagram",
		  "width": 350,
		  "height": 350,
		  "shapes": [
		    {
		      "id": "rect1",
		      "type": "polygon",
		      "vertexIds": [
		        "topLeft",
		        "topRight",
		        "bottomRight",
		        "bottomLeft"
		      ]
		    },
		    {
		      "id": "circle1",
		      "type": "circle",
		      "radius": 50,
		      "centerId": "center"
		    }
		  ],
		  "vertices": [
		    {
		      "x": 25,
		      "y": 25,
		      "id": "topLeft"
		    },
		    {
		      "x": 300,
		      "y": 25,
		      "id": "topRight"
		    },
		    {
		      "x": 300,
		      "y": 325,
		      "id": "bottomRight"
		    },
		    {
		      "x": 25,
		      "y": 325,
		      "id": "bottomLeft"
		    },
		    {
		      "x": 162.5,
		      "y": 175,
		      "id": "center"
		    },
		    {
		      "x": 212.5,
		      "y": 175,
		      "id": "circleRight"
		    }
		  ],
		  "regionLabels": null,
		  "boundaryEdges": [
		    {
		      "to": "topRight",
		      "from": "topLeft",
		      "type": "simple",
		      "label": {
		        "unit": "cm",
		        "value": 12
		      }
		    },
		    {
		      "to": "bottomRight",
		      "from": "topRight",
		      "type": "simple",
		      "label": null
		    },
		    {
		      "to": "bottomLeft",
		      "from": "bottomRight",
		      "type": "simple",
		      "label": null
		    },
		    {
		      "to": "topLeft",
		      "from": "bottomLeft",
		      "type": "simple",
		      "label": {
		        "unit": "cm",
		        "value": 11
		      }
		    }
		  ],
		  "shadedRegions": [
		    {
		      "path": [
		        {
		          "shapeId": "rect1",
		          "pathType": "outer"
		        },
		        {
		          "shapeId": "circle1",
		          "pathType": "inner"
		        }
		      ],
		      "fillColor": "#ccfaff80"
		    }
		  ],
		  "internalSegments": [
		    {
		      "label": {
		        "unit": "cm",
		        "value": 2
		      },
		      "style": "solid",
		      "toVertexId": "circleRight",
		      "fromVertexId": "center"
		    }
		  ],
		  "rightAngleMarkers": null
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for compositeShapeDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

	// Extracted from question: xf0438c2e9eb979cd
	// Question: Area of a shaded region with a circle inside a square
	// Widget key: image_1
	test("composite-shape-diagram - [xf0438c2e9eb979cd] Area of a shaded region with a circle inside a square", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "fit": "none",
		  "type": "compositeShapeDiagram",
		  "width": 350,
		  "height": 325,
		  "shapes": [
		    {
		      "id": "square",
		      "type": "polygon",
		      "vertexIds": [
		        "A",
		        "B",
		        "C",
		        "D"
		      ]
		    },
		    {
		      "id": "circle",
		      "type": "circle",
		      "radius": 125,
		      "centerId": "center"
		    }
		  ],
		  "vertices": [
		    {
		      "x": 25,
		      "y": 25,
		      "id": "A"
		    },
		    {
		      "x": 300,
		      "y": 25,
		      "id": "B"
		    },
		    {
		      "x": 300,
		      "y": 300,
		      "id": "C"
		    },
		    {
		      "x": 25,
		      "y": 300,
		      "id": "D"
		    },
		    {
		      "x": 162.5,
		      "y": 162.5,
		      "id": "center"
		    },
		    {
		      "x": 287.5,
		      "y": 162.5,
		      "id": "circleRight"
		    }
		  ],
		  "regionLabels": null,
		  "boundaryEdges": [
		    {
		      "to": "B",
		      "from": "A",
		      "type": "simple",
		      "label": {
		        "unit": "cm",
		        "value": 11
		      }
		    },
		    {
		      "to": "C",
		      "from": "B",
		      "type": "simple",
		      "label": null
		    },
		    {
		      "to": "D",
		      "from": "C",
		      "type": "simple",
		      "label": null
		    },
		    {
		      "to": "A",
		      "from": "D",
		      "type": "simple",
		      "label": {
		        "unit": "cm",
		        "value": 11
		      }
		    }
		  ],
		  "shadedRegions": [
		    {
		      "path": [
		        {
		          "shapeId": "square",
		          "pathType": "outer"
		        },
		        {
		          "shapeId": "circle",
		          "pathType": "inner"
		        }
		      ],
		      "fillColor": "#ccfaff80"
		    }
		  ],
		  "internalSegments": [
		    {
		      "label": {
		        "unit": "cm",
		        "value": 5
		      },
		      "style": "solid",
		      "toVertexId": "circleRight",
		      "fromVertexId": "center"
		    }
		  ],
		  "rightAngleMarkers": null
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for compositeShapeDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

	// Extracted from question: xba5a78efccb96b8e
	// Question: Area of a shaded region (rectangle minus circle)
	// Widget key: image_1
	test("composite-shape-diagram - [xba5a78efccb96b8e] Area of a shaded region (rectangle minus circle)", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "fit": "auto",
		  "type": "compositeShapeDiagram",
		  "width": 300,
		  "height": 390,
		  "shapes": [
		    {
		      "id": "rect1",
		      "type": "polygon",
		      "vertexIds": [
		        "A",
		        "B",
		        "C",
		        "D"
		      ]
		    },
		    {
		      "id": "circle1",
		      "type": "circle",
		      "radius": 50,
		      "centerId": "center"
		    }
		  ],
		  "vertices": [
		    {
		      "x": 25,
		      "y": 25,
		      "id": "A"
		    },
		    {
		      "x": 200,
		      "y": 25,
		      "id": "B"
		    },
		    {
		      "x": 200,
		      "y": 300,
		      "id": "C"
		    },
		    {
		      "x": 25,
		      "y": 300,
		      "id": "D"
		    },
		    {
		      "x": 112.5,
		      "y": 162.5,
		      "id": "center"
		    },
		    {
		      "x": 162.5,
		      "y": 162.5,
		      "id": "circleRight"
		    }
		  ],
		  "regionLabels": null,
		  "boundaryEdges": [
		    {
		      "to": "B",
		      "from": "A",
		      "type": "simple",
		      "label": {
		        "unit": "cm",
		        "value": 7
		      }
		    },
		    {
		      "to": "C",
		      "from": "B",
		      "type": "simple",
		      "label": {
		        "unit": "cm",
		        "value": 11
		      }
		    },
		    {
		      "to": "D",
		      "from": "C",
		      "type": "simple",
		      "label": null
		    },
		    {
		      "to": "A",
		      "from": "D",
		      "type": "simple",
		      "label": null
		    }
		  ],
		  "shadedRegions": [
		    {
		      "path": [
		        {
		          "shapeId": "rect1",
		          "pathType": "outer"
		        },
		        {
		          "shapeId": "circle1",
		          "pathType": "inner"
		        }
		      ],
		      "fillColor": "#ccfaff80"
		    }
		  ],
		  "internalSegments": [
		    {
		      "label": {
		        "unit": "cm",
		        "value": 2
		      },
		      "style": "solid",
		      "toVertexId": "circleRight",
		      "fromVertexId": "center"
		    }
		  ],
		  "rightAngleMarkers": null
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for compositeShapeDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

	// Extracted from question: x7a1aff151bb13cf8
	// Question: How many tile packages for a patio extension
	// Widget key: image_1
	test("composite-shape-diagram - [x7a1aff151bb13cf8] How many tile packages for a patio extension", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "fit": "auto",
		  "type": "compositeShapeDiagram",
		  "width": 320,
		  "height": 320,
		  "shapes": [
		    {
		      "id": "outer",
		      "type": "polygon",
		      "vertexIds": [
		        "O1",
		        "O2",
		        "O3",
		        "O4"
		      ]
		    },
		    {
		      "id": "inner",
		      "type": "polygon",
		      "vertexIds": [
		        "I1",
		        "I2",
		        "I3",
		        "I4"
		      ]
		    }
		  ],
		  "vertices": [
		    {
		      "x": 0,
		      "y": 0,
		      "id": "O1"
		    },
		    {
		      "x": 9.25,
		      "y": 0,
		      "id": "O2"
		    },
		    {
		      "x": 9.25,
		      "y": 7.75,
		      "id": "O3"
		    },
		    {
		      "x": 0,
		      "y": 7.75,
		      "id": "O4"
		    },
		    {
		      "x": 1.5,
		      "y": 0,
		      "id": "I1"
		    },
		    {
		      "x": 7.75,
		      "y": 0,
		      "id": "I2"
		    },
		    {
		      "x": 7.75,
		      "y": 6.25,
		      "id": "I3"
		    },
		    {
		      "x": 1.5,
		      "y": 6.25,
		      "id": "I4"
		    }
		  ],
		  "regionLabels": [
		    {
		      "text": "Patio",
		      "position": {
		        "x": 4.625,
		        "y": 3.125
		      }
		    },
		    {
		      "text": "Extension",
		      "position": {
		        "x": 4.625,
		        "y": 7.1
		      }
		    }
		  ],
		  "boundaryEdges": [
		    {
		      "to": "O2",
		      "from": "O1",
		      "type": "simple",
		      "label": null
		    },
		    {
		      "to": "O3",
		      "from": "O2",
		      "type": "simple",
		      "label": null
		    },
		    {
		      "to": "O4",
		      "from": "O3",
		      "type": "simple",
		      "label": null
		    },
		    {
		      "to": "O1",
		      "from": "O4",
		      "type": "simple",
		      "label": null
		    }
		  ],
		  "shadedRegions": [
		    {
		      "path": [
		        {
		          "shapeId": "outer",
		          "pathType": "outer"
		        },
		        {
		          "shapeId": "inner",
		          "pathType": "inner"
		        }
		      ],
		      "fillColor": "#ccfaff"
		    }
		  ],
		  "internalSegments": null,
		  "rightAngleMarkers": null
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for compositeShapeDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

	// Extracted from question: xcfa9b7a54cfbf6a1
	// Question: Volume of movable storage steps
	// Widget key: image_1
	test("composite-shape-diagram - [xcfa9b7a54cfbf6a1] Volume of movable storage steps", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "fit": "auto",
		  "type": "compositeShapeDiagram",
		  "width": 420,
		  "height": 360,
		  "shapes": null,
		  "vertices": [
		    {
		      "x": 0,
		      "y": 0,
		      "id": "TL"
		    },
		    {
		      "x": 20,
		      "y": 0,
		      "id": "MT"
		    },
		    {
		      "x": 20,
		      "y": 15,
		      "id": "IT"
		    },
		    {
		      "x": 40,
		      "y": 15,
		      "id": "RT"
		    },
		    {
		      "x": 40,
		      "y": 30,
		      "id": "BR"
		    },
		    {
		      "x": 0,
		      "y": 30,
		      "id": "BL"
		    },
		    {
		      "x": 55,
		      "y": 10,
		      "id": "depth1"
		    }
		  ],
		  "regionLabels": null,
		  "boundaryEdges": [
		    {
		      "to": "BR",
		      "from": "BL",
		      "type": "simple",
		      "label": {
		        "unit": "m",
		        "value": 0.4
		      }
		    },
		    {
		      "to": "RT",
		      "from": "BR",
		      "type": "simple",
		      "label": {
		        "unit": "m",
		        "value": 0.15
		      }
		    },
		    {
		      "to": "IT",
		      "from": "RT",
		      "type": "simple",
		      "label": {
		        "unit": "m",
		        "value": 0.2
		      }
		    },
		    {
		      "to": "MT",
		      "from": "IT",
		      "type": "simple",
		      "label": null
		    },
		    {
		      "to": "TL",
		      "from": "MT",
		      "type": "simple",
		      "label": null
		    },
		    {
		      "to": "BL",
		      "from": "TL",
		      "type": "simple",
		      "label": {
		        "unit": "m",
		        "value": 0.3
		      }
		    }
		  ],
		  "shadedRegions": null,
		  "internalSegments": [
		    {
		      "label": {
		        "unit": "m",
		        "value": 0.5
		      },
		      "style": "dashed",
		      "toVertexId": "depth1",
		      "fromVertexId": "RT"
		    }
		  ],
		  "rightAngleMarkers": null
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for compositeShapeDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

	// Extracted from question: xaee2680b7bbe6277
	// Question: Find the areas of the parts and the whole figure
	// Widget key: image_1
	test("composite-shape-diagram - [xaee2680b7bbe6277] Find the areas of the parts and the whole figure", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "fit": "auto",
		  "type": "compositeShapeDiagram",
		  "width": 360,
		  "height": 360,
		  "shapes": null,
		  "vertices": [
		    {
		      "x": 103.662,
		      "y": 2.254,
		      "id": "top"
		    },
		    {
		      "x": 24.789,
		      "y": 205.07,
		      "id": "leftMid"
		    },
		    {
		      "x": 182.535,
		      "y": 205.07,
		      "id": "rightMid"
		    },
		    {
		      "x": 103.662,
		      "y": 317.746,
		      "id": "bottom"
		    },
		    {
		      "x": 16.789,
		      "y": 2.254,
		      "id": "leftScaleTop"
		    },
		    {
		      "x": 16.789,
		      "y": 205.07,
		      "id": "leftScaleMid"
		    },
		    {
		      "x": 16.789,
		      "y": 317.746,
		      "id": "leftScaleBottom"
		    }
		  ],
		  "regionLabels": [
		    {
		      "text": "A",
		      "position": {
		        "x": 103.662,
		        "y": 120
		      }
		    },
		    {
		      "text": "B",
		      "position": {
		        "x": 103.662,
		        "y": 270
		      }
		    }
		  ],
		  "boundaryEdges": [
		    {
		      "to": "rightMid",
		      "from": "top",
		      "type": "simple",
		      "label": null
		    },
		    {
		      "to": "bottom",
		      "from": "rightMid",
		      "type": "simple",
		      "label": null
		    },
		    {
		      "to": "leftMid",
		      "from": "bottom",
		      "type": "simple",
		      "label": null
		    },
		    {
		      "to": "top",
		      "from": "leftMid",
		      "type": "simple",
		      "label": null
		    }
		  ],
		  "shadedRegions": null,
		  "internalSegments": [
		    {
		      "label": {
		        "unit": "units",
		        "value": 7
		      },
		      "style": "dashed",
		      "toVertexId": "rightMid",
		      "fromVertexId": "leftMid"
		    },
		    {
		      "label": {
		        "unit": "units",
		        "value": 9
		      },
		      "style": "solid",
		      "toVertexId": "leftScaleTop",
		      "fromVertexId": "leftScaleMid"
		    },
		    {
		      "label": {
		        "unit": "units",
		        "value": 5
		      },
		      "style": "solid",
		      "toVertexId": "leftScaleBottom",
		      "fromVertexId": "leftScaleMid"
		    }
		  ],
		  "rightAngleMarkers": null
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for compositeShapeDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

	// Extracted from question: x317e33403062daa2
	// Question: Find areas of parts of a composite figure
	// Widget key: image_1
	test("composite-shape-diagram - [x317e33403062daa2] Find areas of parts of a composite figure", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "fit": "auto",
		  "type": "compositeShapeDiagram",
		  "width": 400,
		  "height": 300,
		  "shapes": null,
		  "vertices": [
		    {
		      "x": 28.829,
		      "y": 2.883,
		      "id": "T"
		    },
		    {
		      "x": 28.829,
		      "y": 118.198,
		      "id": "L"
		    },
		    {
		      "x": 86.487,
		      "y": 175.856,
		      "id": "BL"
		    },
		    {
		      "x": 144.144,
		      "y": 175.856,
		      "id": "BR"
		    },
		    {
		      "x": 317.117,
		      "y": 118.198,
		      "id": "R"
		    },
		    {
		      "x": 86.487,
		      "y": 118.198,
		      "id": "V1top"
		    },
		    {
		      "x": 144.144,
		      "y": 118.198,
		      "id": "V2top"
		    }
		  ],
		  "regionLabels": [
		    {
		      "text": "A",
		      "position": {
		        "x": 150,
		        "y": 70
		      }
		    },
		    {
		      "text": "B",
		      "position": {
		        "x": 60,
		        "y": 150
		      }
		    },
		    {
		      "text": "C",
		      "position": {
		        "x": 115,
		        "y": 150
		      }
		    },
		    {
		      "text": "D",
		      "position": {
		        "x": 230,
		        "y": 150
		      }
		    }
		  ],
		  "boundaryEdges": [
		    {
		      "to": "L",
		      "from": "T",
		      "type": "simple",
		      "label": {
		        "unit": "units",
		        "value": 4
		      }
		    },
		    {
		      "to": "BL",
		      "from": "L",
		      "type": "simple",
		      "label": null
		    },
		    {
		      "to": "BR",
		      "from": "BL",
		      "type": "simple",
		      "label": null
		    },
		    {
		      "to": "R",
		      "from": "BR",
		      "type": "simple",
		      "label": null
		    },
		    {
		      "to": "T",
		      "from": "R",
		      "type": "simple",
		      "label": null
		    }
		  ],
		  "shadedRegions": null,
		  "internalSegments": [
		    {
		      "label": {
		        "unit": "units",
		        "value": 2
		      },
		      "style": "dashed",
		      "toVertexId": "V1top",
		      "fromVertexId": "L"
		    },
		    {
		      "label": {
		        "unit": "units",
		        "value": 2
		      },
		      "style": "dashed",
		      "toVertexId": "V2top",
		      "fromVertexId": "V1top"
		    },
		    {
		      "label": {
		        "unit": "units",
		        "value": 6
		      },
		      "style": "dashed",
		      "toVertexId": "R",
		      "fromVertexId": "V2top"
		    },
		    {
		      "label": {
		        "unit": "units",
		        "value": 2
		      },
		      "style": "dashed",
		      "toVertexId": "BL",
		      "fromVertexId": "V1top"
		    },
		    {
		      "label": {
		        "unit": "units",
		        "value": 2
		      },
		      "style": "dashed",
		      "toVertexId": "BR",
		      "fromVertexId": "V2top"
		    }
		  ],
		  "rightAngleMarkers": [
		    {
		      "cornerVertexId": "L",
		      "adjacentVertex1Id": "T",
		      "adjacentVertex2Id": "V1top"
		    },
		    {
		      "cornerVertexId": "V1top",
		      "adjacentVertex1Id": "L",
		      "adjacentVertex2Id": "BL"
		    },
		    {
		      "cornerVertexId": "V2top",
		      "adjacentVertex1Id": "R",
		      "adjacentVertex2Id": "BR"
		    },
		    {
		      "cornerVertexId": "BL",
		      "adjacentVertex1Id": "V1top",
		      "adjacentVertex2Id": "BR"
		    },
		    {
		      "cornerVertexId": "BR",
		      "adjacentVertex1Id": "V2top",
		      "adjacentVertex2Id": "BL"
		    }
		  ]
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for compositeShapeDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

	// Extracted from question: x1a7f41561b0f2295
	// Question: Areas of parts of a composite figure
	// Widget key: image_1
	test("composite-shape-diagram - [x1a7f41561b0f2295] Areas of parts of a composite figure", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "fit": "auto",
		  "type": "compositeShapeDiagram",
		  "width": 360,
		  "height": 400,
		  "shapes": null,
		  "vertices": [
		    {
		      "x": 28.852,
		      "y": 238.689,
		      "id": "A_leftBottom"
		    },
		    {
		      "x": 28.852,
		      "y": 133.77,
		      "id": "B_leftTop"
		    },
		    {
		      "x": 186.23,
		      "y": 2.623,
		      "id": "C_topRight"
		    },
		    {
		      "x": 186.23,
		      "y": 238.689,
		      "id": "D_rightBottom"
		    },
		    {
		      "x": 107.541,
		      "y": 317.377,
		      "id": "E_bottomApex"
		    },
		    {
		      "x": 186.23,
		      "y": 133.77,
		      "id": "R_topDash"
		    },
		    {
		      "x": 186.23,
		      "y": 317.377,
		      "id": "R_extBottom"
		    }
		  ],
		  "regionLabels": [
		    {
		      "text": "A",
		      "position": {
		        "x": 100,
		        "y": 90
		      }
		    },
		    {
		      "text": "B",
		      "position": {
		        "x": 100,
		        "y": 190
		      }
		    },
		    {
		      "text": "C",
		      "position": {
		        "x": 120,
		        "y": 280
		      }
		    }
		  ],
		  "boundaryEdges": [
		    {
		      "to": "B_leftTop",
		      "from": "A_leftBottom",
		      "type": "simple",
		      "label": null
		    },
		    {
		      "to": "C_topRight",
		      "from": "B_leftTop",
		      "type": "simple",
		      "label": null
		    },
		    {
		      "path": [
		        "C_topRight",
		        "R_topDash",
		        "D_rightBottom"
		      ],
		      "type": "partitioned",
		      "segments": [
		        {
		          "label": {
		            "unit": "units",
		            "value": 5
		          },
		          "style": "solid"
		        },
		        {
		          "label": {
		            "unit": "units",
		            "value": 4
		          },
		          "style": "solid"
		        }
		      ]
		    },
		    {
		      "to": "E_bottomApex",
		      "from": "D_rightBottom",
		      "type": "simple",
		      "label": null
		    },
		    {
		      "to": "A_leftBottom",
		      "from": "E_bottomApex",
		      "type": "simple",
		      "label": null
		    }
		  ],
		  "shadedRegions": null,
		  "internalSegments": [
		    {
		      "label": {
		        "unit": "units",
		        "value": 6
		      },
		      "style": "dashed",
		      "toVertexId": "R_topDash",
		      "fromVertexId": "B_leftTop"
		    },
		    {
		      "label": {
		        "unit": "units",
		        "value": 6
		      },
		      "style": "dashed",
		      "toVertexId": "D_rightBottom",
		      "fromVertexId": "A_leftBottom"
		    },
		    {
		      "label": {
		        "unit": "units",
		        "value": 3
		      },
		      "style": "dashed",
		      "toVertexId": "R_extBottom",
		      "fromVertexId": "D_rightBottom"
		    }
		  ],
		  "rightAngleMarkers": [
		    {
		      "cornerVertexId": "B_leftTop",
		      "adjacentVertex1Id": "A_leftBottom",
		      "adjacentVertex2Id": "R_topDash"
		    },
		    {
		      "cornerVertexId": "A_leftBottom",
		      "adjacentVertex1Id": "B_leftTop",
		      "adjacentVertex2Id": "D_rightBottom"
		    }
		  ]
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for compositeShapeDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

	// Extracted from question: xd9db17552e59568e
	// Question: Area of a composite figure (triangle and rectangles)
	// Widget key: image_1
	test("composite-shape-diagram - [xd9db17552e59568e] Area of a composite figure (triangle and rectangles)", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "fit": "auto",
		  "type": "compositeShapeDiagram",
		  "width": 320,
		  "height": 306,
		  "shapes": null,
		  "vertices": [
		    {
		      "x": 0,
		      "y": 0,
		      "id": "BL"
		    },
		    {
		      "x": 6,
		      "y": 0,
		      "id": "BM"
		    },
		    {
		      "x": 9,
		      "y": 0,
		      "id": "BR"
		    },
		    {
		      "x": 9,
		      "y": 7,
		      "id": "CR"
		    },
		    {
		      "x": 6,
		      "y": 7,
		      "id": "CL"
		    },
		    {
		      "x": 6,
		      "y": 9,
		      "id": "TT"
		    },
		    {
		      "x": 0,
		      "y": 9,
		      "id": "TL"
		    }
		  ],
		  "regionLabels": [
		    {
		      "text": "A",
		      "position": {
		        "x": 3,
		        "y": 4.5
		      }
		    },
		    {
		      "text": "B",
		      "position": {
		        "x": 7.5,
		        "y": 8.4
		      }
		    },
		    {
		      "text": "C",
		      "position": {
		        "x": 7.5,
		        "y": 3.5
		      }
		    }
		  ],
		  "boundaryEdges": [
		    {
		      "path": [
		        "BL",
		        "BM",
		        "BR"
		      ],
		      "type": "partitioned",
		      "segments": [
		        {
		          "label": {
		            "unit": "units",
		            "value": 6
		          },
		          "style": "solid"
		        },
		        {
		          "label": null,
		          "style": "solid"
		        }
		      ]
		    },
		    {
		      "to": "CR",
		      "from": "BR",
		      "type": "simple",
		      "label": null
		    },
		    {
		      "to": "TT",
		      "from": "CR",
		      "type": "simple",
		      "label": null
		    },
		    {
		      "to": "TL",
		      "from": "TT",
		      "type": "simple",
		      "label": null
		    },
		    {
		      "to": "BL",
		      "from": "TL",
		      "type": "simple",
		      "label": {
		        "unit": "units",
		        "value": 9
		      }
		    }
		  ],
		  "shadedRegions": null,
		  "internalSegments": [
		    {
		      "label": {
		        "unit": "units",
		        "value": 2
		      },
		      "style": "dashed",
		      "toVertexId": "CL",
		      "fromVertexId": "TT"
		    },
		    {
		      "label": {
		        "unit": "units",
		        "value": 7
		      },
		      "style": "dashed",
		      "toVertexId": "BM",
		      "fromVertexId": "CL"
		    },
		    {
		      "label": null,
		      "style": "dashed",
		      "toVertexId": "CR",
		      "fromVertexId": "CL"
		    }
		  ],
		  "rightAngleMarkers": [
		    {
		      "cornerVertexId": "CL",
		      "adjacentVertex1Id": "TT",
		      "adjacentVertex2Id": "CR"
		    }
		  ]
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for compositeShapeDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

	// Extracted from question: x618d8cf7ccef9284
	// Question: Areas of parts and whole for a composite figure
	// Widget key: image_1
	test("composite-shape-diagram - [x618d8cf7ccef9284] Areas of parts and whole for a composite figure", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "fit": "auto",
		  "type": "compositeShapeDiagram",
		  "width": 360,
		  "height": 360,
		  "shapes": [
		    {
		      "id": "outer",
		      "type": "polygon",
		      "vertexIds": [
		        "LT",
		        "RT",
		        "RB",
		        "M",
		        "LB"
		      ]
		    }
		  ],
		  "vertices": [
		    {
		      "x": 0,
		      "y": 0,
		      "id": "LT"
		    },
		    {
		      "x": 8,
		      "y": 0,
		      "id": "RT"
		    },
		    {
		      "x": 8,
		      "y": 10,
		      "id": "RB"
		    },
		    {
		      "x": 6,
		      "y": 5,
		      "id": "M"
		    },
		    {
		      "x": 0,
		      "y": 10,
		      "id": "LB"
		    },
		    {
		      "x": 0,
		      "y": 5,
		      "id": "Lmid"
		    },
		    {
		      "x": 8,
		      "y": 5,
		      "id": "Rmid"
		    }
		  ],
		  "regionLabels": [
		    {
		      "text": "A",
		      "position": {
		        "x": 4,
		        "y": 2.5
		      }
		    },
		    {
		      "text": "B",
		      "position": {
		        "x": 2.2,
		        "y": 7.2
		      }
		    },
		    {
		      "text": "C",
		      "position": {
		        "x": 7.2,
		        "y": 7.2
		      }
		    }
		  ],
		  "boundaryEdges": [
		    {
		      "to": "RT",
		      "from": "LT",
		      "type": "simple",
		      "label": {
		        "unit": "units",
		        "value": 8
		      }
		    },
		    {
		      "to": "RB",
		      "from": "RT",
		      "type": "simple",
		      "label": null
		    },
		    {
		      "to": "M",
		      "from": "RB",
		      "type": "simple",
		      "label": null
		    },
		    {
		      "to": "LB",
		      "from": "M",
		      "type": "simple",
		      "label": null
		    },
		    {
		      "to": "LT",
		      "from": "LB",
		      "type": "simple",
		      "label": null
		    }
		  ],
		  "shadedRegions": null,
		  "internalSegments": [
		    {
		      "label": {
		        "unit": "units",
		        "value": 6
		      },
		      "style": "dashed",
		      "toVertexId": "M",
		      "fromVertexId": "Lmid"
		    },
		    {
		      "label": {
		        "unit": "units",
		        "value": 2
		      },
		      "style": "dashed",
		      "toVertexId": "Rmid",
		      "fromVertexId": "M"
		    },
		    {
		      "label": {
		        "unit": "units",
		        "value": 5
		      },
		      "style": "dashed",
		      "toVertexId": "LB",
		      "fromVertexId": "Lmid"
		    },
		    {
		      "label": {
		        "unit": "units",
		        "value": 5
		      },
		      "style": "dashed",
		      "toVertexId": "RB",
		      "fromVertexId": "Rmid"
		    }
		  ],
		  "rightAngleMarkers": [
		    {
		      "cornerVertexId": "Lmid",
		      "adjacentVertex1Id": "LB",
		      "adjacentVertex2Id": "M"
		    },
		    {
		      "cornerVertexId": "Rmid",
		      "adjacentVertex1Id": "RB",
		      "adjacentVertex2Id": "M"
		    }
		  ]
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for compositeShapeDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

	// Extracted from question: x52a99356a5daec25
	// Question: Areas of parts and whole for a composite figure
	// Widget key: image_1
	test("composite-shape-diagram - [x52a99356a5daec25] Areas of parts and whole for a composite figure", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "fit": "auto",
		  "type": "compositeShapeDiagram",
		  "width": 400,
		  "height": 400,
		  "shapes": [
		    {
		      "id": "rectangle_B",
		      "type": "polygon",
		      "vertexIds": [
		        "rect_top_left",
		        "rect_top_right",
		        "rect_bottom_right",
		        "rect_bottom_left"
		      ]
		    },
		    {
		      "id": "triangle_A",
		      "type": "polygon",
		      "vertexIds": [
		        "triangle_left",
		        "rect_bottom_left",
		        "rect_top_left"
		      ]
		    }
		  ],
		  "vertices": [
		    {
		      "x": 2.038,
		      "y": 165.096,
		      "id": "triangle_left"
		    },
		    {
		      "x": 42.803,
		      "y": 63.185,
		      "id": "rect_top_left"
		    },
		    {
		      "x": 185.478,
		      "y": 63.185,
		      "id": "rect_top_right"
		    },
		    {
		      "x": 185.478,
		      "y": 287.389,
		      "id": "rect_bottom_right"
		    },
		    {
		      "x": 42.803,
		      "y": 287.389,
		      "id": "rect_bottom_left"
		    },
		    {
		      "x": 42.803,
		      "y": 165.096,
		      "id": "foot_on_base"
		    }
		  ],
		  "regionLabels": [
		    {
		      "text": "A",
		      "position": {
		        "x": 18,
		        "y": 165
		      }
		    },
		    {
		      "text": "B",
		      "position": {
		        "x": 114,
		        "y": 175
		      }
		    }
		  ],
		  "boundaryEdges": [
		    {
		      "to": "rect_bottom_left",
		      "from": "triangle_left",
		      "type": "simple",
		      "label": null
		    },
		    {
		      "to": "rect_bottom_right",
		      "from": "rect_bottom_left",
		      "type": "simple",
		      "label": null
		    },
		    {
		      "to": "rect_top_right",
		      "from": "rect_bottom_right",
		      "type": "simple",
		      "label": {
		        "unit": "units",
		        "value": 11
		      }
		    },
		    {
		      "to": "rect_top_left",
		      "from": "rect_top_right",
		      "type": "simple",
		      "label": {
		        "unit": "units",
		        "value": 7
		      }
		    },
		    {
		      "to": "triangle_left",
		      "from": "rect_top_left",
		      "type": "simple",
		      "label": null
		    }
		  ],
		  "shadedRegions": null,
		  "internalSegments": [
		    {
		      "label": null,
		      "style": "dashed",
		      "toVertexId": "rect_bottom_left",
		      "fromVertexId": "rect_top_left"
		    },
		    {
		      "label": {
		        "unit": "units",
		        "value": 2
		      },
		      "style": "dashed",
		      "toVertexId": "foot_on_base",
		      "fromVertexId": "triangle_left"
		    }
		  ],
		  "rightAngleMarkers": null
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for compositeShapeDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

	// Extracted from question: xb0f43fd03d2eff7c
	// Question: Area of a shape with one pair of parallel sides
	// Widget key: image_1
	test("composite-shape-diagram - [xb0f43fd03d2eff7c] Area of a shape with one pair of parallel sides", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "fit": "auto",
		  "type": "compositeShapeDiagram",
		  "width": 320,
		  "height": 320,
		  "shapes": null,
		  "vertices": [
		    {
		      "x": 20,
		      "y": 260,
		      "id": "A"
		    },
		    {
		      "x": 300,
		      "y": 260,
		      "id": "B"
		    },
		    {
		      "x": 300,
		      "y": 160,
		      "id": "C"
		    },
		    {
		      "x": 20,
		      "y": 160,
		      "id": "D"
		    },
		    {
		      "x": 160,
		      "y": 80,
		      "id": "E"
		    },
		    {
		      "x": 160,
		      "y": 160,
		      "id": "M"
		    }
		  ],
		  "regionLabels": null,
		  "boundaryEdges": [
		    {
		      "to": "B",
		      "from": "A",
		      "type": "simple",
		      "label": {
		        "unit": "units",
		        "value": 9
		      }
		    },
		    {
		      "to": "C",
		      "from": "B",
		      "type": "simple",
		      "label": {
		        "unit": "units",
		        "value": 6
		      }
		    },
		    {
		      "to": "E",
		      "from": "C",
		      "type": "simple",
		      "label": null
		    },
		    {
		      "to": "D",
		      "from": "E",
		      "type": "simple",
		      "label": null
		    },
		    {
		      "to": "A",
		      "from": "D",
		      "type": "simple",
		      "label": null
		    }
		  ],
		  "shadedRegions": null,
		  "internalSegments": [
		    {
		      "label": null,
		      "style": "dashed",
		      "toVertexId": "C",
		      "fromVertexId": "D"
		    },
		    {
		      "label": {
		        "unit": "units",
		        "value": 3
		      },
		      "style": "dashed",
		      "toVertexId": "M",
		      "fromVertexId": "E"
		    }
		  ],
		  "rightAngleMarkers": null
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for compositeShapeDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

	// Extracted from question: xc24275a8d9e83363
	// Question: Area of a composite shape
	// Widget key: image_1
	test("composite-shape-diagram - [xc24275a8d9e83363] Area of a composite shape", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "fit": "auto",
		  "type": "compositeShapeDiagram",
		  "width": 320,
		  "height": 320,
		  "shapes": null,
		  "vertices": [
		    {
		      "x": 31.429,
		      "y": 288.571,
		      "id": "A"
		    },
		    {
		      "x": 31.429,
		      "y": 2.857,
		      "id": "B"
		    },
		    {
		      "x": 117.143,
		      "y": 117.143,
		      "id": "C"
		    },
		    {
		      "x": 231.429,
		      "y": 2.857,
		      "id": "D"
		    },
		    {
		      "x": 231.429,
		      "y": 288.571,
		      "id": "E"
		    },
		    {
		      "x": 117.143,
		      "y": 288.571,
		      "id": "F"
		    }
		  ],
		  "regionLabels": null,
		  "boundaryEdges": [
		    {
		      "to": "B",
		      "from": "A",
		      "type": "simple",
		      "label": {
		        "unit": "units",
		        "value": 10
		      }
		    },
		    {
		      "to": "C",
		      "from": "B",
		      "type": "simple",
		      "label": null
		    },
		    {
		      "to": "D",
		      "from": "C",
		      "type": "simple",
		      "label": null
		    },
		    {
		      "to": "E",
		      "from": "D",
		      "type": "simple",
		      "label": null
		    },
		    {
		      "to": "A",
		      "from": "E",
		      "type": "simple",
		      "label": {
		        "unit": "units",
		        "value": 7
		      }
		    }
		  ],
		  "shadedRegions": [
		    {
		      "fillColor": "#aa87ff4D",
		      "vertexIds": [
		        "A",
		        "B",
		        "C",
		        "D",
		        "E"
		      ]
		    }
		  ],
		  "internalSegments": [
		    {
		      "label": {
		        "unit": "units",
		        "value": 6
		      },
		      "style": "dashed",
		      "toVertexId": "F",
		      "fromVertexId": "C"
		    }
		  ],
		  "rightAngleMarkers": null
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for compositeShapeDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

	// Extracted from question: x5dc8c670f44d1837
	// Question: Find the area of a composite shape with parallel sides
	// Widget key: image_1
	test("composite-shape-diagram - [x5dc8c670f44d1837] Find the area of a composite shape with parallel sides", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "fit": "auto",
		  "type": "compositeShapeDiagram",
		  "width": 360,
		  "height": 480,
		  "shapes": null,
		  "vertices": [
		    {
		      "x": 32,
		      "y": 288,
		      "id": "A"
		    },
		    {
		      "x": 96,
		      "y": 288,
		      "id": "B"
		    },
		    {
		      "x": 160,
		      "y": 160,
		      "id": "C"
		    },
		    {
		      "x": 160,
		      "y": 32,
		      "id": "D"
		    },
		    {
		      "x": 32,
		      "y": 32,
		      "id": "E"
		    }
		  ],
		  "regionLabels": null,
		  "boundaryEdges": [
		    {
		      "to": "B",
		      "from": "A",
		      "type": "simple",
		      "label": {
		        "unit": "units",
		        "value": 2
		      }
		    },
		    {
		      "to": "C",
		      "from": "B",
		      "type": "simple",
		      "label": null
		    },
		    {
		      "to": "D",
		      "from": "C",
		      "type": "simple",
		      "label": {
		        "unit": "units",
		        "value": 4
		      }
		    },
		    {
		      "to": "E",
		      "from": "D",
		      "type": "simple",
		      "label": {
		        "unit": "units",
		        "value": 4
		      }
		    },
		    {
		      "to": "A",
		      "from": "E",
		      "type": "simple",
		      "label": {
		        "unit": "units",
		        "value": 8
		      }
		    }
		  ],
		  "shadedRegions": [
		    {
		      "fillColor": "#aa87ff55",
		      "vertexIds": [
		        "A",
		        "B",
		        "C",
		        "D",
		        "E"
		      ]
		    }
		  ],
		  "internalSegments": null,
		  "rightAngleMarkers": null
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for compositeShapeDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

	// Extracted from question: x161673a7853ec0b5
	// Question: Area of a composite shape (rectangle with right triangles removed)
	// Widget key: image_1
	test("composite-shape-diagram - [x161673a7853ec0b5] Area of a composite shape (rectangle with right triangles removed)", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "fit": "auto",
		  "type": "compositeShapeDiagram",
		  "width": 320,
		  "height": 320,
		  "shapes": null,
		  "vertices": [
		    {
		      "x": 0,
		      "y": 0,
		      "id": "topLeft"
		    },
		    {
		      "x": 9,
		      "y": 0,
		      "id": "topRight"
		    },
		    {
		      "x": 0,
		      "y": 5,
		      "id": "leftCut"
		    },
		    {
		      "x": 9,
		      "y": 4,
		      "id": "rightCut"
		    },
		    {
		      "x": 0,
		      "y": 9,
		      "id": "bottomLeft"
		    },
		    {
		      "x": 9,
		      "y": 9,
		      "id": "bottomRight"
		    },
		    {
		      "x": 3,
		      "y": 9,
		      "id": "leftBaseEnd"
		    },
		    {
		      "x": 5,
		      "y": 9,
		      "id": "rightBaseEnd"
		    }
		  ],
		  "regionLabels": null,
		  "boundaryEdges": [
		    {
		      "to": "topRight",
		      "from": "topLeft",
		      "type": "simple",
		      "label": {
		        "unit": "units",
		        "value": 9
		      }
		    },
		    {
		      "to": "rightCut",
		      "from": "topRight",
		      "type": "simple",
		      "label": {
		        "unit": "units",
		        "value": 4
		      }
		    },
		    {
		      "to": "rightBaseEnd",
		      "from": "rightCut",
		      "type": "simple",
		      "label": null
		    },
		    {
		      "to": "leftBaseEnd",
		      "from": "rightBaseEnd",
		      "type": "simple",
		      "label": null
		    },
		    {
		      "to": "leftCut",
		      "from": "leftBaseEnd",
		      "type": "simple",
		      "label": null
		    },
		    {
		      "to": "topLeft",
		      "from": "leftCut",
		      "type": "simple",
		      "label": {
		        "unit": "units",
		        "value": 5
		      }
		    }
		  ],
		  "shadedRegions": null,
		  "internalSegments": [
		    {
		      "label": {
		        "unit": "units",
		        "value": 4
		      },
		      "style": "dashed",
		      "toVertexId": "bottomLeft",
		      "fromVertexId": "leftCut"
		    },
		    {
		      "label": {
		        "unit": "units",
		        "value": 3
		      },
		      "style": "dashed",
		      "toVertexId": "leftBaseEnd",
		      "fromVertexId": "bottomLeft"
		    },
		    {
		      "label": {
		        "unit": "units",
		        "value": 5
		      },
		      "style": "dashed",
		      "toVertexId": "bottomRight",
		      "fromVertexId": "rightCut"
		    },
		    {
		      "label": {
		        "unit": "units",
		        "value": 4
		      },
		      "style": "dashed",
		      "toVertexId": "rightBaseEnd",
		      "fromVertexId": "bottomRight"
		    }
		  ],
		  "rightAngleMarkers": [
		    {
		      "cornerVertexId": "bottomLeft",
		      "adjacentVertex1Id": "leftCut",
		      "adjacentVertex2Id": "leftBaseEnd"
		    },
		    {
		      "cornerVertexId": "bottomRight",
		      "adjacentVertex1Id": "rightCut",
		      "adjacentVertex2Id": "rightBaseEnd"
		    }
		  ]
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for compositeShapeDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

	// Extracted from question: x22d4780e785c0741
	// Question: Find the area of a composite shape
	// Widget key: image_1
	test("composite-shape-diagram - [x22d4780e785c0741] Find the area of a composite shape", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "fit": "auto",
		  "type": "compositeShapeDiagram",
		  "width": 400,
		  "height": 400,
		  "shapes": null,
		  "vertices": [
		    {
		      "x": 4,
		      "y": -2,
		      "id": "topApex"
		    },
		    {
		      "x": 8,
		      "y": 0,
		      "id": "topRight"
		    },
		    {
		      "x": 8,
		      "y": 7,
		      "id": "bottomRight"
		    },
		    {
		      "x": 4,
		      "y": 10,
		      "id": "bottomApex"
		    },
		    {
		      "x": 0,
		      "y": 7,
		      "id": "bottomLeft"
		    },
		    {
		      "x": 0,
		      "y": 0,
		      "id": "topLeft"
		    },
		    {
		      "x": -1.5,
		      "y": -2,
		      "id": "leftGuideTop"
		    },
		    {
		      "x": -1.5,
		      "y": 0,
		      "id": "leftGuideTopBase"
		    },
		    {
		      "x": -1.5,
		      "y": 7,
		      "id": "leftGuideBottomBase"
		    },
		    {
		      "x": -1.5,
		      "y": 10,
		      "id": "leftGuideBottom"
		    }
		  ],
		  "regionLabels": null,
		  "boundaryEdges": [
		    {
		      "to": "topApex",
		      "from": "topLeft",
		      "type": "simple",
		      "label": null
		    },
		    {
		      "to": "topRight",
		      "from": "topApex",
		      "type": "simple",
		      "label": null
		    },
		    {
		      "to": "bottomRight",
		      "from": "topRight",
		      "type": "simple",
		      "label": null
		    },
		    {
		      "to": "bottomApex",
		      "from": "bottomRight",
		      "type": "simple",
		      "label": null
		    },
		    {
		      "to": "bottomLeft",
		      "from": "bottomApex",
		      "type": "simple",
		      "label": null
		    },
		    {
		      "to": "topLeft",
		      "from": "bottomLeft",
		      "type": "simple",
		      "label": null
		    }
		  ],
		  "shadedRegions": null,
		  "internalSegments": [
		    {
		      "label": {
		        "unit": "units",
		        "value": 8
		      },
		      "style": "dashed",
		      "toVertexId": "topRight",
		      "fromVertexId": "topLeft"
		    },
		    {
		      "label": {
		        "unit": "units",
		        "value": 8
		      },
		      "style": "dashed",
		      "toVertexId": "bottomRight",
		      "fromVertexId": "bottomLeft"
		    },
		    {
		      "label": {
		        "unit": "units",
		        "value": 2
		      },
		      "style": "solid",
		      "toVertexId": "leftGuideTopBase",
		      "fromVertexId": "leftGuideTop"
		    },
		    {
		      "label": {
		        "unit": "units",
		        "value": 7
		      },
		      "style": "solid",
		      "toVertexId": "leftGuideBottomBase",
		      "fromVertexId": "leftGuideTopBase"
		    },
		    {
		      "label": {
		        "unit": "units",
		        "value": 3
		      },
		      "style": "solid",
		      "toVertexId": "leftGuideBottom",
		      "fromVertexId": "leftGuideBottomBase"
		    }
		  ],
		  "rightAngleMarkers": null
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for compositeShapeDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

	// Extracted from question: x08f3220a196255d1
	// Question: Find the area of a composite shape
	// Widget key: image_1
	test("composite-shape-diagram - [x08f3220a196255d1] Find the area of a composite shape", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "fit": "auto",
		  "type": "compositeShapeDiagram",
		  "width": 400,
		  "height": 300,
		  "shapes": [
		    {
		      "id": "pentagon",
		      "type": "polygon",
		      "vertexIds": [
		        "L",
		        "A",
		        "U1",
		        "U2",
		        "R"
		      ]
		    }
		  ],
		  "vertices": [
		    {
		      "x": 0,
		      "y": 8,
		      "id": "L"
		    },
		    {
		      "x": 8,
		      "y": 0,
		      "id": "A"
		    },
		    {
		      "x": 8,
		      "y": 3,
		      "id": "U1"
		    },
		    {
		      "x": 10,
		      "y": 3,
		      "id": "U2"
		    },
		    {
		      "x": 16,
		      "y": 8,
		      "id": "R"
		    },
		    {
		      "x": 8,
		      "y": 8,
		      "id": "B1"
		    },
		    {
		      "x": 10,
		      "y": 8,
		      "id": "B2"
		    }
		  ],
		  "regionLabels": null,
		  "boundaryEdges": [
		    {
		      "to": "A",
		      "from": "L",
		      "type": "simple",
		      "label": null
		    },
		    {
		      "to": "U1",
		      "from": "A",
		      "type": "simple",
		      "label": null
		    },
		    {
		      "to": "U2",
		      "from": "U1",
		      "type": "simple",
		      "label": null
		    },
		    {
		      "to": "R",
		      "from": "U2",
		      "type": "simple",
		      "label": null
		    },
		    {
		      "path": [
		        "R",
		        "B2",
		        "B1",
		        "L"
		      ],
		      "type": "partitioned",
		      "segments": [
		        {
		          "label": {
		            "unit": "units",
		            "value": 6
		          },
		          "style": "solid"
		        },
		        {
		          "label": {
		            "unit": "units",
		            "value": 2
		          },
		          "style": "solid"
		        },
		        {
		          "label": {
		            "unit": "units",
		            "value": 8
		          },
		          "style": "solid"
		        }
		      ]
		    }
		  ],
		  "shadedRegions": null,
		  "internalSegments": [
		    {
		      "label": {
		        "unit": "units",
		        "value": 5
		      },
		      "style": "dashed",
		      "toVertexId": "B1",
		      "fromVertexId": "U1"
		    },
		    {
		      "label": {
		        "unit": "units",
		        "value": 5
		      },
		      "style": "dashed",
		      "toVertexId": "B2",
		      "fromVertexId": "U2"
		    },
		    {
		      "label": {
		        "unit": "units",
		        "value": 8
		      },
		      "style": "dashed",
		      "toVertexId": "B1",
		      "fromVertexId": "A"
		    }
		  ],
		  "rightAngleMarkers": null
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for compositeShapeDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

	// Extracted from question: xf9aeebaa4d47c342
	// Question: Area of a composite shape
	// Widget key: image_1
	test("composite-shape-diagram - [xf9aeebaa4d47c342] Area of a composite shape", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "fit": "auto",
		  "type": "compositeShapeDiagram",
		  "width": 320,
		  "height": 320,
		  "shapes": null,
		  "vertices": [
		    {
		      "x": 24.427,
		      "y": 2.443,
		      "id": "A"
		    },
		    {
		      "x": 268.702,
		      "y": 173.435,
		      "id": "B"
		    },
		    {
		      "x": 195.42,
		      "y": 295.573,
		      "id": "C"
		    },
		    {
		      "x": 122.138,
		      "y": 295.573,
		      "id": "D"
		    },
		    {
		      "x": 24.427,
		      "y": 173.435,
		      "id": "E"
		    },
		    {
		      "x": 122.138,
		      "y": 173.435,
		      "id": "F"
		    }
		  ],
		  "regionLabels": null,
		  "boundaryEdges": [
		    {
		      "to": "B",
		      "from": "A",
		      "type": "simple",
		      "label": null
		    },
		    {
		      "to": "C",
		      "from": "B",
		      "type": "simple",
		      "label": null
		    },
		    {
		      "to": "D",
		      "from": "C",
		      "type": "simple",
		      "label": {
		        "unit": "units",
		        "value": 3
		      }
		    },
		    {
		      "to": "E",
		      "from": "D",
		      "type": "simple",
		      "label": null
		    },
		    {
		      "to": "A",
		      "from": "E",
		      "type": "simple",
		      "label": {
		        "unit": "units",
		        "value": 7
		      }
		    }
		  ],
		  "shadedRegions": null,
		  "internalSegments": [
		    {
		      "label": {
		        "unit": "units",
		        "value": 10
		      },
		      "style": "dashed",
		      "toVertexId": "B",
		      "fromVertexId": "E"
		    },
		    {
		      "label": {
		        "unit": "units",
		        "value": 5
		      },
		      "style": "dashed",
		      "toVertexId": "F",
		      "fromVertexId": "D"
		    }
		  ],
		  "rightAngleMarkers": null
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for compositeShapeDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

})
