// ============================================================================
// EXTRACTED TEST FILE - AUTO-GENERATED
// ============================================================================
// This file was automatically generated from database structured_json data
// Generated on: 2025-09-17T15:38:03.970Z
// Widget Type: treeDiagram
// Source: Real questions from database
//
// These tests use actual widget configurations extracted from production data
// to ensure comprehensive test coverage with realistic scenarios.
//
// Note: Database data may not perfectly match current widget schemas, so these
// tests rely on runtime validation within generateWidget() for flexibility.
//
// DO NOT EDIT THIS FILE DIRECTLY - it will be overwritten on regeneration
//
// Run tests: bun test tests/widgets/tree-diagram.extracted.test.ts
// Update snapshots: bun test tests/widgets/tree-diagram.extracted.test.ts --update-snapshots
// ============================================================================

import { describe, test, expect } from "bun:test"
import { generateWidget } from "@superbuilders/qti-assessment-item-generator/widgets/widget-generator"
import type { Widget, WidgetInput } from "@superbuilders/qti-assessment-item-generator/widgets/registry"
import * as errors from "@superbuilders/errors"
import * as logger from "@superbuilders/slog"

describe("treeDiagram widget tests", () => {
	// Extracted from question: xffe5660467b89a5c
	// Question: Whose display correctly represents the sample space?
	// Widget key: image_1
	test("tree-diagram - [xffe5660467b89a5c] Whose display correctly represents the sample space?", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "type": "treeDiagram",
		  "edges": [
		    {
		      "to": "P",
		      "from": "root",
		      "style": "solid"
		    },
		    {
		      "to": "R",
		      "from": "root",
		      "style": "solid"
		    },
		    {
		      "to": "B",
		      "from": "root",
		      "style": "solid"
		    },
		    {
		      "to": "p_l",
		      "from": "P",
		      "style": "solid"
		    },
		    {
		      "to": "p_u",
		      "from": "P",
		      "style": "solid"
		    },
		    {
		      "to": "r_l",
		      "from": "R",
		      "style": "solid"
		    },
		    {
		      "to": "r_u",
		      "from": "R",
		      "style": "solid"
		    },
		    {
		      "to": "b_l",
		      "from": "B",
		      "style": "solid"
		    },
		    {
		      "to": "b_u",
		      "from": "B",
		      "style": "solid"
		    }
		  ],
		  "nodes": [
		    {
		      "id": "root",
		      "color": "#000000",
		      "label": null,
		      "style": "circled",
		      "position": {
		        "x": 220,
		        "y": 12
		      }
		    },
		    {
		      "id": "P",
		      "color": "#000000",
		      "label": "P",
		      "style": "circled",
		      "position": {
		        "x": 86.8,
		        "y": 74
		      }
		    },
		    {
		      "id": "R",
		      "color": "#000000",
		      "label": "R",
		      "style": "circled",
		      "position": {
		        "x": 220,
		        "y": 74
		      }
		    },
		    {
		      "id": "B",
		      "color": "#000000",
		      "label": "B",
		      "style": "circled",
		      "position": {
		        "x": 353.2,
		        "y": 74
		      }
		    },
		    {
		      "id": "p_l",
		      "color": "#000000",
		      "label": "L",
		      "style": "circled",
		      "position": {
		        "x": 120,
		        "y": 174
		      }
		    },
		    {
		      "id": "p_u",
		      "color": "#000000",
		      "label": "U",
		      "style": "circled",
		      "position": {
		        "x": 53.2,
		        "y": 174
		      }
		    },
		    {
		      "id": "r_l",
		      "color": "#000000",
		      "label": "L",
		      "style": "circled",
		      "position": {
		        "x": 186.8,
		        "y": 174
		      }
		    },
		    {
		      "id": "r_u",
		      "color": "#000000",
		      "label": "U",
		      "style": "circled",
		      "position": {
		        "x": 253.2,
		        "y": 174
		      }
		    },
		    {
		      "id": "b_l",
		      "color": "#000000",
		      "label": "L",
		      "style": "circled",
		      "position": {
		        "x": 320,
		        "y": 174
		      }
		    },
		    {
		      "id": "b_u",
		      "color": "#000000",
		      "label": "U",
		      "style": "circled",
		      "position": {
		        "x": 386.8,
		        "y": 174
		      }
		    }
		  ],
		  "width": 440,
		  "height": 204,
		  "nodeRadius": 20,
		  "nodeFontSize": 14
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for treeDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

	// Extracted from question: xa32758572502b4bd
	// Question: Tree diagrams for one-topping pizza choices
	// Widget key: image_1
	test("tree-diagram - [xa32758572502b4bd] Tree diagrams for one-topping pizza choices (1)", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "type": "treeDiagram",
		  "edges": [
		    {
		      "to": "nT",
		      "from": "root",
		      "style": "solid"
		    },
		    {
		      "to": "nD",
		      "from": "root",
		      "style": "solid"
		    },
		    {
		      "to": "nP_L",
		      "from": "nT",
		      "style": "solid"
		    },
		    {
		      "to": "nC_L",
		      "from": "nT",
		      "style": "solid"
		    },
		    {
		      "to": "nM_L",
		      "from": "nT",
		      "style": "solid"
		    },
		    {
		      "to": "nP_R",
		      "from": "nD",
		      "style": "solid"
		    },
		    {
		      "to": "nC_R",
		      "from": "nD",
		      "style": "solid"
		    },
		    {
		      "to": "nM_R",
		      "from": "nD",
		      "style": "solid"
		    }
		  ],
		  "nodes": [
		    {
		      "id": "root",
		      "color": "#000000",
		      "label": "Start",
		      "style": "circled",
		      "position": {
		        "x": 220,
		        "y": 12
		      }
		    },
		    {
		      "id": "nT",
		      "color": "#000000",
		      "label": "T",
		      "style": "circled",
		      "position": {
		        "x": 120,
		        "y": 74
		      }
		    },
		    {
		      "id": "nD",
		      "color": "#000000",
		      "label": "D",
		      "style": "circled",
		      "position": {
		        "x": 320,
		        "y": 74
		      }
		    },
		    {
		      "id": "nP_L",
		      "color": "#000000",
		      "label": "P",
		      "style": "circled",
		      "position": {
		        "x": 53.2,
		        "y": 174
		      }
		    },
		    {
		      "id": "nC_L",
		      "color": "#000000",
		      "label": "C",
		      "style": "circled",
		      "position": {
		        "x": 120,
		        "y": 174
		      }
		    },
		    {
		      "id": "nM_L",
		      "color": "#000000",
		      "label": "M",
		      "style": "circled",
		      "position": {
		        "x": 186.8,
		        "y": 174
		      }
		    },
		    {
		      "id": "nP_R",
		      "color": "#000000",
		      "label": "P",
		      "style": "circled",
		      "position": {
		        "x": 253.2,
		        "y": 174
		      }
		    },
		    {
		      "id": "nC_R",
		      "color": "#000000",
		      "label": "C",
		      "style": "circled",
		      "position": {
		        "x": 320,
		        "y": 174
		      }
		    },
		    {
		      "id": "nM_R",
		      "color": "#000000",
		      "label": "M",
		      "style": "circled",
		      "position": {
		        "x": 386.8,
		        "y": 174
		      }
		    }
		  ],
		  "width": 440,
		  "height": 204,
		  "nodeRadius": 20,
		  "nodeFontSize": 16
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for treeDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

	// Extracted from question: xa32758572502b4bd
	// Question: Tree diagrams for one-topping pizza choices
	// Widget key: image_2
	test("tree-diagram - [xa32758572502b4bd] Tree diagrams for one-topping pizza choices (2)", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "type": "treeDiagram",
		  "edges": [
		    {
		      "to": "nP",
		      "from": "root",
		      "style": "solid"
		    },
		    {
		      "to": "nM",
		      "from": "root",
		      "style": "solid"
		    },
		    {
		      "to": "nC",
		      "from": "root",
		      "style": "solid"
		    },
		    {
		      "to": "nT_P",
		      "from": "nP",
		      "style": "solid"
		    },
		    {
		      "to": "nD_P",
		      "from": "nP",
		      "style": "solid"
		    },
		    {
		      "to": "nT_M",
		      "from": "nM",
		      "style": "solid"
		    },
		    {
		      "to": "nD_M",
		      "from": "nM",
		      "style": "solid"
		    },
		    {
		      "to": "nT_C",
		      "from": "nC",
		      "style": "solid"
		    },
		    {
		      "to": "nD_C",
		      "from": "nC",
		      "style": "solid"
		    }
		  ],
		  "nodes": [
		    {
		      "id": "root",
		      "color": "#000000",
		      "label": "Start",
		      "style": "circled",
		      "position": {
		        "x": 220,
		        "y": 12
		      }
		    },
		    {
		      "id": "nP",
		      "color": "#000000",
		      "label": "P",
		      "style": "circled",
		      "position": {
		        "x": 86.8,
		        "y": 74
		      }
		    },
		    {
		      "id": "nM",
		      "color": "#000000",
		      "label": "M",
		      "style": "circled",
		      "position": {
		        "x": 220,
		        "y": 74
		      }
		    },
		    {
		      "id": "nC",
		      "color": "#000000",
		      "label": "C",
		      "style": "circled",
		      "position": {
		        "x": 353.2,
		        "y": 74
		      }
		    },
		    {
		      "id": "nT_P",
		      "color": "#000000",
		      "label": "T",
		      "style": "circled",
		      "position": {
		        "x": 53.2,
		        "y": 174
		      }
		    },
		    {
		      "id": "nD_P",
		      "color": "#000000",
		      "label": "D",
		      "style": "circled",
		      "position": {
		        "x": 120,
		        "y": 174
		      }
		    },
		    {
		      "id": "nT_M",
		      "color": "#000000",
		      "label": "T",
		      "style": "circled",
		      "position": {
		        "x": 186.8,
		        "y": 174
		      }
		    },
		    {
		      "id": "nD_M",
		      "color": "#000000",
		      "label": "D",
		      "style": "circled",
		      "position": {
		        "x": 253.2,
		        "y": 174
		      }
		    },
		    {
		      "id": "nT_C",
		      "color": "#000000",
		      "label": "T",
		      "style": "circled",
		      "position": {
		        "x": 320,
		        "y": 174
		      }
		    },
		    {
		      "id": "nD_C",
		      "color": "#000000",
		      "label": "D",
		      "style": "circled",
		      "position": {
		        "x": 386.8,
		        "y": 174
		      }
		    }
		  ],
		  "width": 440,
		  "height": 204,
		  "nodeRadius": 20,
		  "nodeFontSize": 16
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for treeDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

	// Extracted from question: xfced0271e1570dd0
	// Question: Identify the correct sample-space display
	// Widget key: image_2
	test("tree-diagram - [xfced0271e1570dd0] Identify the correct sample-space display", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "type": "treeDiagram",
		  "edges": [
		    {
		      "to": "nB",
		      "from": "root",
		      "style": "solid"
		    },
		    {
		      "to": "nT",
		      "from": "root",
		      "style": "solid"
		    },
		    {
		      "to": "nP",
		      "from": "root",
		      "style": "solid"
		    },
		    {
		      "to": "b_b",
		      "from": "nB",
		      "style": "solid"
		    },
		    {
		      "to": "b_t",
		      "from": "nB",
		      "style": "solid"
		    },
		    {
		      "to": "b_p",
		      "from": "nB",
		      "style": "solid"
		    },
		    {
		      "to": "t_b",
		      "from": "nT",
		      "style": "solid"
		    },
		    {
		      "to": "t_t",
		      "from": "nT",
		      "style": "solid"
		    },
		    {
		      "to": "t_p",
		      "from": "nT",
		      "style": "solid"
		    },
		    {
		      "to": "p_b",
		      "from": "nP",
		      "style": "solid"
		    },
		    {
		      "to": "p_t",
		      "from": "nP",
		      "style": "solid"
		    },
		    {
		      "to": "p_p",
		      "from": "nP",
		      "style": "solid"
		    }
		  ],
		  "nodes": [
		    {
		      "id": "root",
		      "color": "#000000",
		      "label": "Start",
		      "style": "circled",
		      "position": {
		        "x": 220,
		        "y": 24
		      }
		    },
		    {
		      "id": "nB",
		      "color": "#000000",
		      "label": "B",
		      "style": "circled",
		      "position": {
		        "x": 86.8,
		        "y": 74
		      }
		    },
		    {
		      "id": "nT",
		      "color": "#000000",
		      "label": "T",
		      "style": "circled",
		      "position": {
		        "x": 220,
		        "y": 74
		      }
		    },
		    {
		      "id": "nP",
		      "color": "#000000",
		      "label": "P",
		      "style": "circled",
		      "position": {
		        "x": 353.2,
		        "y": 74
		      }
		    },
		    {
		      "id": "b_b",
		      "color": "#000000",
		      "label": "B",
		      "style": "circled",
		      "position": {
		        "x": 42.4,
		        "y": 174
		      }
		    },
		    {
		      "id": "b_t",
		      "color": "#000000",
		      "label": "T",
		      "style": "circled",
		      "position": {
		        "x": 86.8,
		        "y": 174
		      }
		    },
		    {
		      "id": "b_p",
		      "color": "#000000",
		      "label": "P",
		      "style": "circled",
		      "position": {
		        "x": 131.2,
		        "y": 174
		      }
		    },
		    {
		      "id": "t_b",
		      "color": "#000000",
		      "label": "B",
		      "style": "circled",
		      "position": {
		        "x": 175.6,
		        "y": 174
		      }
		    },
		    {
		      "id": "t_t",
		      "color": "#000000",
		      "label": "T",
		      "style": "circled",
		      "position": {
		        "x": 220,
		        "y": 174
		      }
		    },
		    {
		      "id": "t_p",
		      "color": "#000000",
		      "label": "P",
		      "style": "circled",
		      "position": {
		        "x": 264.4,
		        "y": 174
		      }
		    },
		    {
		      "id": "p_b",
		      "color": "#000000",
		      "label": "B",
		      "style": "circled",
		      "position": {
		        "x": 308.8,
		        "y": 174
		      }
		    },
		    {
		      "id": "p_t",
		      "color": "#000000",
		      "label": "T",
		      "style": "circled",
		      "position": {
		        "x": 353.2,
		        "y": 174
		      }
		    },
		    {
		      "id": "p_p",
		      "color": "#000000",
		      "label": "P",
		      "style": "circled",
		      "position": {
		        "x": 397.6,
		        "y": 174
		      }
		    }
		  ],
		  "width": 440,
		  "height": 204,
		  "nodeRadius": 20,
		  "nodeFontSize": 14
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for treeDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

	// Extracted from question: xcfc0bdb0990dfe10
	// Question: Choose a tree diagram for three random steps
	// Widget key: image_1
	test("tree-diagram - [xcfc0bdb0990dfe10] Choose a tree diagram for three random steps (1)", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "type": "treeDiagram",
		  "edges": [
		    {
		      "to": "a1",
		      "from": "root",
		      "style": "solid"
		    },
		    {
		      "to": "a2",
		      "from": "root",
		      "style": "solid"
		    },
		    {
		      "to": "a3",
		      "from": "root",
		      "style": "solid"
		    },
		    {
		      "to": "a4",
		      "from": "root",
		      "style": "solid"
		    }
		  ],
		  "nodes": [
		    {
		      "id": "root",
		      "color": "#000000",
		      "label": "<root>",
		      "style": "circled",
		      "position": {
		        "x": 220,
		        "y": 20
		      }
		    },
		    {
		      "id": "a1",
		      "color": "#000000",
		      "label": "3 Lefts",
		      "style": "circled",
		      "position": {
		        "x": 70,
		        "y": 94
		      }
		    },
		    {
		      "id": "a2",
		      "color": "#000000",
		      "label": "2 Lefts 1 Right",
		      "style": "circled",
		      "position": {
		        "x": 170,
		        "y": 94
		      }
		    },
		    {
		      "id": "a3",
		      "color": "#000000",
		      "label": "1 Left 2 Rights",
		      "style": "circled",
		      "position": {
		        "x": 270,
		        "y": 94
		      }
		    },
		    {
		      "id": "a4",
		      "color": "#000000",
		      "label": "3 Rights",
		      "style": "circled",
		      "position": {
		        "x": 370,
		        "y": 94
		      }
		    }
		  ],
		  "width": 440,
		  "height": 144,
		  "nodeRadius": 40,
		  "nodeFontSize": 12
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for treeDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

	// Extracted from question: xcfc0bdb0990dfe10
	// Question: Choose a tree diagram for three random steps
	// Widget key: image_2
	test("tree-diagram - [xcfc0bdb0990dfe10] Choose a tree diagram for three random steps (2)", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "type": "treeDiagram",
		  "edges": [
		    {
		      "to": "nL1",
		      "from": "root",
		      "style": "solid"
		    },
		    {
		      "to": "nR1",
		      "from": "root",
		      "style": "solid"
		    },
		    {
		      "to": "nLL2",
		      "from": "nL1",
		      "style": "solid"
		    },
		    {
		      "to": "nLR2",
		      "from": "nL1",
		      "style": "solid"
		    },
		    {
		      "to": "nRL2",
		      "from": "nR1",
		      "style": "solid"
		    },
		    {
		      "to": "nRR2",
		      "from": "nR1",
		      "style": "solid"
		    },
		    {
		      "to": "nLLL3",
		      "from": "nLL2",
		      "style": "solid"
		    },
		    {
		      "to": "nLLR3",
		      "from": "nLL2",
		      "style": "solid"
		    },
		    {
		      "to": "nLRL3",
		      "from": "nLR2",
		      "style": "solid"
		    },
		    {
		      "to": "nLRR3",
		      "from": "nLR2",
		      "style": "solid"
		    },
		    {
		      "to": "nRLL3",
		      "from": "nRL2",
		      "style": "solid"
		    },
		    {
		      "to": "nRLR3",
		      "from": "nRL2",
		      "style": "solid"
		    },
		    {
		      "to": "nRRL3",
		      "from": "nRR2",
		      "style": "solid"
		    },
		    {
		      "to": "nRRR3",
		      "from": "nRR2",
		      "style": "solid"
		    }
		  ],
		  "nodes": [
		    {
		      "id": "root",
		      "color": "#000000",
		      "label": "<root>",
		      "style": "circled",
		      "position": {
		        "x": 220,
		        "y": 20
		      }
		    },
		    {
		      "id": "nL1",
		      "color": "#000000",
		      "label": "L",
		      "style": "circled",
		      "position": {
		        "x": 120,
		        "y": 74
		      }
		    },
		    {
		      "id": "nR1",
		      "color": "#000000",
		      "label": "R",
		      "style": "circled",
		      "position": {
		        "x": 320,
		        "y": 74
		      }
		    },
		    {
		      "id": "nLL2",
		      "color": "#000000",
		      "label": "L",
		      "style": "circled",
		      "position": {
		        "x": 70,
		        "y": 174
		      }
		    },
		    {
		      "id": "nLR2",
		      "color": "#000000",
		      "label": "R",
		      "style": "circled",
		      "position": {
		        "x": 170,
		        "y": 174
		      }
		    },
		    {
		      "id": "nRL2",
		      "color": "#000000",
		      "label": "L",
		      "style": "circled",
		      "position": {
		        "x": 270,
		        "y": 174
		      }
		    },
		    {
		      "id": "nRR2",
		      "color": "#000000",
		      "label": "R",
		      "style": "circled",
		      "position": {
		        "x": 370,
		        "y": 174
		      }
		    },
		    {
		      "id": "nLLL3",
		      "color": "#000000",
		      "label": "L",
		      "style": "circled",
		      "position": {
		        "x": 45,
		        "y": 274
		      }
		    },
		    {
		      "id": "nLLR3",
		      "color": "#000000",
		      "label": "R",
		      "style": "circled",
		      "position": {
		        "x": 95,
		        "y": 274
		      }
		    },
		    {
		      "id": "nLRL3",
		      "color": "#000000",
		      "label": "L",
		      "style": "circled",
		      "position": {
		        "x": 145,
		        "y": 274
		      }
		    },
		    {
		      "id": "nLRR3",
		      "color": "#000000",
		      "label": "R",
		      "style": "circled",
		      "position": {
		        "x": 195,
		        "y": 274
		      }
		    },
		    {
		      "id": "nRLL3",
		      "color": "#000000",
		      "label": "L",
		      "style": "circled",
		      "position": {
		        "x": 245,
		        "y": 274
		      }
		    },
		    {
		      "id": "nRLR3",
		      "color": "#000000",
		      "label": "R",
		      "style": "circled",
		      "position": {
		        "x": 295,
		        "y": 274
		      }
		    },
		    {
		      "id": "nRRL3",
		      "color": "#000000",
		      "label": "L",
		      "style": "circled",
		      "position": {
		        "x": 345,
		        "y": 274
		      }
		    },
		    {
		      "id": "nRRR3",
		      "color": "#000000",
		      "label": "R",
		      "style": "circled",
		      "position": {
		        "x": 395,
		        "y": 274
		      }
		    }
		  ],
		  "width": 440,
		  "height": 308,
		  "nodeRadius": 20,
		  "nodeFontSize": 14
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for treeDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

	// Extracted from question: x150b1c6c6e15ce1f
	// Question: Select the tree diagram for three coin flips
	// Widget key: image_1
	test("tree-diagram - [x150b1c6c6e15ce1f] Select the tree diagram for three coin flips (1)", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "type": "treeDiagram",
		  "edges": [
		    {
		      "to": "nA",
		      "from": "rootB",
		      "style": "solid"
		    },
		    {
		      "to": "nB",
		      "from": "rootB",
		      "style": "solid"
		    },
		    {
		      "to": "nC",
		      "from": "rootB",
		      "style": "solid"
		    },
		    {
		      "to": "nD",
		      "from": "rootB",
		      "style": "solid"
		    }
		  ],
		  "nodes": [
		    {
		      "id": "rootB",
		      "color": "#000000",
		      "label": null,
		      "style": "circled",
		      "position": {
		        "x": 220,
		        "y": 24
		      }
		    },
		    {
		      "id": "nA",
		      "color": "#000000",
		      "label": "3 heads",
		      "style": "circled",
		      "position": {
		        "x": 70,
		        "y": 94
		      }
		    },
		    {
		      "id": "nB",
		      "color": "#000000",
		      "label": "2 heads and 1 tail",
		      "style": "circled",
		      "position": {
		        "x": 170,
		        "y": 94
		      }
		    },
		    {
		      "id": "nC",
		      "color": "#000000",
		      "label": "1 head and 2 tails",
		      "style": "circled",
		      "position": {
		        "x": 270,
		        "y": 94
		      }
		    },
		    {
		      "id": "nD",
		      "color": "#000000",
		      "label": "3 tails",
		      "style": "circled",
		      "position": {
		        "x": 370,
		        "y": 94
		      }
		    }
		  ],
		  "width": 440,
		  "height": 144,
		  "nodeRadius": 36,
		  "nodeFontSize": 14
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for treeDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

	// Extracted from question: x150b1c6c6e15ce1f
	// Question: Select the tree diagram for three coin flips
	// Widget key: image_2
	test("tree-diagram - [x150b1c6c6e15ce1f] Select the tree diagram for three coin flips (2)", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "type": "treeDiagram",
		  "edges": [
		    {
		      "to": "n1H",
		      "from": "rootA",
		      "style": "solid"
		    },
		    {
		      "to": "n1T",
		      "from": "rootA",
		      "style": "solid"
		    },
		    {
		      "to": "n2HH",
		      "from": "n1H",
		      "style": "solid"
		    },
		    {
		      "to": "n2HT",
		      "from": "n1H",
		      "style": "solid"
		    },
		    {
		      "to": "n2TH",
		      "from": "n1T",
		      "style": "solid"
		    },
		    {
		      "to": "n2TT",
		      "from": "n1T",
		      "style": "solid"
		    },
		    {
		      "to": "n3HHH",
		      "from": "n2HH",
		      "style": "solid"
		    },
		    {
		      "to": "n3HHT",
		      "from": "n2HH",
		      "style": "solid"
		    },
		    {
		      "to": "n3HTH",
		      "from": "n2HT",
		      "style": "solid"
		    },
		    {
		      "to": "n3HTT",
		      "from": "n2HT",
		      "style": "solid"
		    },
		    {
		      "to": "n3THH",
		      "from": "n2TH",
		      "style": "solid"
		    },
		    {
		      "to": "n3THT",
		      "from": "n2TH",
		      "style": "solid"
		    },
		    {
		      "to": "n3TTH",
		      "from": "n2TT",
		      "style": "solid"
		    },
		    {
		      "to": "n3TTT",
		      "from": "n2TT",
		      "style": "solid"
		    }
		  ],
		  "nodes": [
		    {
		      "id": "rootA",
		      "color": "#000000",
		      "label": null,
		      "style": "circled",
		      "position": {
		        "x": 220,
		        "y": 24
		      }
		    },
		    {
		      "id": "n1H",
		      "color": "#000000",
		      "label": "H",
		      "style": "circled",
		      "position": {
		        "x": 120,
		        "y": 74
		      }
		    },
		    {
		      "id": "n1T",
		      "color": "#000000",
		      "label": "T",
		      "style": "circled",
		      "position": {
		        "x": 320,
		        "y": 74
		      }
		    },
		    {
		      "id": "n2HH",
		      "color": "#000000",
		      "label": "H",
		      "style": "circled",
		      "position": {
		        "x": 70,
		        "y": 174
		      }
		    },
		    {
		      "id": "n2HT",
		      "color": "#000000",
		      "label": "T",
		      "style": "circled",
		      "position": {
		        "x": 170,
		        "y": 174
		      }
		    },
		    {
		      "id": "n2TH",
		      "color": "#000000",
		      "label": "H",
		      "style": "circled",
		      "position": {
		        "x": 270,
		        "y": 174
		      }
		    },
		    {
		      "id": "n2TT",
		      "color": "#000000",
		      "label": "T",
		      "style": "circled",
		      "position": {
		        "x": 370,
		        "y": 174
		      }
		    },
		    {
		      "id": "n3HHH",
		      "color": "#000000",
		      "label": "H",
		      "style": "circled",
		      "position": {
		        "x": 45,
		        "y": 274
		      }
		    },
		    {
		      "id": "n3HHT",
		      "color": "#000000",
		      "label": "T",
		      "style": "circled",
		      "position": {
		        "x": 95,
		        "y": 274
		      }
		    },
		    {
		      "id": "n3HTH",
		      "color": "#000000",
		      "label": "H",
		      "style": "circled",
		      "position": {
		        "x": 145,
		        "y": 274
		      }
		    },
		    {
		      "id": "n3HTT",
		      "color": "#000000",
		      "label": "T",
		      "style": "circled",
		      "position": {
		        "x": 195,
		        "y": 274
		      }
		    },
		    {
		      "id": "n3THH",
		      "color": "#000000",
		      "label": "H",
		      "style": "circled",
		      "position": {
		        "x": 245,
		        "y": 274
		      }
		    },
		    {
		      "id": "n3THT",
		      "color": "#000000",
		      "label": "T",
		      "style": "circled",
		      "position": {
		        "x": 295,
		        "y": 274
		      }
		    },
		    {
		      "id": "n3TTH",
		      "color": "#000000",
		      "label": "H",
		      "style": "circled",
		      "position": {
		        "x": 345,
		        "y": 274
		      }
		    },
		    {
		      "id": "n3TTT",
		      "color": "#000000",
		      "label": "T",
		      "style": "circled",
		      "position": {
		        "x": 395,
		        "y": 274
		      }
		    }
		  ],
		  "width": 440,
		  "height": 304,
		  "nodeRadius": 20,
		  "nodeFontSize": 14
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for treeDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

	// Extracted from question: xba15989aa199a8fc
	// Question: Tree diagrams for color and size outcomes
	// Widget key: image_1
	test("tree-diagram - [xba15989aa199a8fc] Tree diagrams for color and size outcomes (1)", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "type": "treeDiagram",
		  "edges": [
		    {
		      "to": "g",
		      "from": "root",
		      "style": "solid"
		    },
		    {
		      "to": "o",
		      "from": "root",
		      "style": "solid"
		    },
		    {
		      "to": "y",
		      "from": "root",
		      "style": "solid"
		    },
		    {
		      "to": "l1",
		      "from": "g",
		      "style": "solid"
		    },
		    {
		      "to": "s1",
		      "from": "g",
		      "style": "solid"
		    },
		    {
		      "to": "l2",
		      "from": "o",
		      "style": "solid"
		    },
		    {
		      "to": "s2",
		      "from": "o",
		      "style": "solid"
		    },
		    {
		      "to": "l3",
		      "from": "y",
		      "style": "solid"
		    },
		    {
		      "to": "s3",
		      "from": "y",
		      "style": "solid"
		    }
		  ],
		  "nodes": [
		    {
		      "id": "root",
		      "color": "#000000",
		      "label": null,
		      "style": "circled",
		      "position": {
		        "x": 220,
		        "y": 20
		      }
		    },
		    {
		      "id": "g",
		      "color": "#000000",
		      "label": "G",
		      "style": "circled",
		      "position": {
		        "x": 86.8,
		        "y": 74
		      }
		    },
		    {
		      "id": "o",
		      "color": "#000000",
		      "label": "O",
		      "style": "circled",
		      "position": {
		        "x": 220,
		        "y": 74
		      }
		    },
		    {
		      "id": "y",
		      "color": "#000000",
		      "label": "Y",
		      "style": "circled",
		      "position": {
		        "x": 353.2,
		        "y": 74
		      }
		    },
		    {
		      "id": "l1",
		      "color": "#000000",
		      "label": "L",
		      "style": "circled",
		      "position": {
		        "x": 53.2,
		        "y": 174
		      }
		    },
		    {
		      "id": "s1",
		      "color": "#000000",
		      "label": "S",
		      "style": "circled",
		      "position": {
		        "x": 120,
		        "y": 174
		      }
		    },
		    {
		      "id": "l2",
		      "color": "#000000",
		      "label": "L",
		      "style": "circled",
		      "position": {
		        "x": 186.8,
		        "y": 174
		      }
		    },
		    {
		      "id": "s2",
		      "color": "#000000",
		      "label": "S",
		      "style": "circled",
		      "position": {
		        "x": 253.2,
		        "y": 174
		      }
		    },
		    {
		      "id": "l3",
		      "color": "#000000",
		      "label": "L",
		      "style": "circled",
		      "position": {
		        "x": 320,
		        "y": 174
		      }
		    },
		    {
		      "id": "s3",
		      "color": "#000000",
		      "label": "S",
		      "style": "circled",
		      "position": {
		        "x": 386.8,
		        "y": 174
		      }
		    }
		  ],
		  "width": 440,
		  "height": 204,
		  "nodeRadius": 20,
		  "nodeFontSize": 16
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for treeDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

	// Extracted from question: xba15989aa199a8fc
	// Question: Tree diagrams for color and size outcomes
	// Widget key: image_2
	test("tree-diagram - [xba15989aa199a8fc] Tree diagrams for color and size outcomes (2)", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "type": "treeDiagram",
		  "edges": [
		    {
		      "to": "l",
		      "from": "root2",
		      "style": "solid"
		    },
		    {
		      "to": "s",
		      "from": "root2",
		      "style": "solid"
		    },
		    {
		      "to": "g1",
		      "from": "l",
		      "style": "solid"
		    },
		    {
		      "to": "o1",
		      "from": "l",
		      "style": "solid"
		    },
		    {
		      "to": "y1",
		      "from": "l",
		      "style": "solid"
		    },
		    {
		      "to": "g2",
		      "from": "s",
		      "style": "solid"
		    },
		    {
		      "to": "o2",
		      "from": "s",
		      "style": "solid"
		    },
		    {
		      "to": "y2",
		      "from": "s",
		      "style": "solid"
		    }
		  ],
		  "nodes": [
		    {
		      "id": "root2",
		      "color": "#000000",
		      "label": null,
		      "style": "circled",
		      "position": {
		        "x": 220,
		        "y": 20
		      }
		    },
		    {
		      "id": "l",
		      "color": "#000000",
		      "label": "L",
		      "style": "circled",
		      "position": {
		        "x": 120,
		        "y": 74
		      }
		    },
		    {
		      "id": "s",
		      "color": "#000000",
		      "label": "S",
		      "style": "circled",
		      "position": {
		        "x": 320,
		        "y": 74
		      }
		    },
		    {
		      "id": "g1",
		      "color": "#000000",
		      "label": "G",
		      "style": "circled",
		      "position": {
		        "x": 53.2,
		        "y": 174
		      }
		    },
		    {
		      "id": "o1",
		      "color": "#000000",
		      "label": "O",
		      "style": "circled",
		      "position": {
		        "x": 120,
		        "y": 174
		      }
		    },
		    {
		      "id": "y1",
		      "color": "#000000",
		      "label": "Y",
		      "style": "circled",
		      "position": {
		        "x": 186.8,
		        "y": 174
		      }
		    },
		    {
		      "id": "g2",
		      "color": "#000000",
		      "label": "G",
		      "style": "circled",
		      "position": {
		        "x": 253.2,
		        "y": 174
		      }
		    },
		    {
		      "id": "o2",
		      "color": "#000000",
		      "label": "O",
		      "style": "circled",
		      "position": {
		        "x": 320,
		        "y": 174
		      }
		    },
		    {
		      "id": "y2",
		      "color": "#000000",
		      "label": "Y",
		      "style": "circled",
		      "position": {
		        "x": 386.8,
		        "y": 174
		      }
		    }
		  ],
		  "width": 440,
		  "height": 204,
		  "nodeRadius": 20,
		  "nodeFontSize": 16
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for treeDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

	// Extracted from question: xa26f24ccdf07b97c
	// Question: Select the tree diagram for a round-trip travel choice
	// Widget key: image_1
	test("tree-diagram - [xa26f24ccdf07b97c] Select the tree diagram for a round-trip travel choice (1)", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "type": "treeDiagram",
		  "edges": [
		    {
		      "to": "n1",
		      "from": "root",
		      "style": "solid"
		    },
		    {
		      "to": "n2",
		      "from": "root",
		      "style": "solid"
		    },
		    {
		      "to": "n3",
		      "from": "n1",
		      "style": "solid"
		    },
		    {
		      "to": "n4",
		      "from": "n1",
		      "style": "solid"
		    },
		    {
		      "to": "n5",
		      "from": "n2",
		      "style": "solid"
		    },
		    {
		      "to": "n6",
		      "from": "n2",
		      "style": "solid"
		    },
		    {
		      "to": "n7",
		      "from": "n3",
		      "style": "solid"
		    },
		    {
		      "to": "n8",
		      "from": "n3",
		      "style": "solid"
		    },
		    {
		      "to": "n9",
		      "from": "n4",
		      "style": "solid"
		    },
		    {
		      "to": "n10",
		      "from": "n4",
		      "style": "solid"
		    },
		    {
		      "to": "n11",
		      "from": "n5",
		      "style": "solid"
		    },
		    {
		      "to": "n12",
		      "from": "n5",
		      "style": "solid"
		    },
		    {
		      "to": "n13",
		      "from": "n6",
		      "style": "solid"
		    },
		    {
		      "to": "n14",
		      "from": "n6",
		      "style": "solid"
		    }
		  ],
		  "nodes": [
		    {
		      "id": "root",
		      "color": "#000000",
		      "label": " ",
		      "style": "circled",
		      "position": {
		        "x": 220,
		        "y": 20
		      }
		    },
		    {
		      "id": "n1",
		      "color": "#000000",
		      "label": "B",
		      "style": "circled",
		      "position": {
		        "x": 120,
		        "y": 74
		      }
		    },
		    {
		      "id": "n2",
		      "color": "#000000",
		      "label": "B",
		      "style": "circled",
		      "position": {
		        "x": 320,
		        "y": 74
		      }
		    },
		    {
		      "id": "n3",
		      "color": "#000000",
		      "label": "C",
		      "style": "circled",
		      "position": {
		        "x": 70,
		        "y": 174
		      }
		    },
		    {
		      "id": "n4",
		      "color": "#000000",
		      "label": "C",
		      "style": "circled",
		      "position": {
		        "x": 170,
		        "y": 174
		      }
		    },
		    {
		      "id": "n5",
		      "color": "#000000",
		      "label": "C",
		      "style": "circled",
		      "position": {
		        "x": 270,
		        "y": 174
		      }
		    },
		    {
		      "id": "n6",
		      "color": "#000000",
		      "label": "C",
		      "style": "circled",
		      "position": {
		        "x": 370,
		        "y": 174
		      }
		    },
		    {
		      "id": "n7",
		      "color": "#000000",
		      "label": "T",
		      "style": "circled",
		      "position": {
		        "x": 45,
		        "y": 274
		      }
		    },
		    {
		      "id": "n8",
		      "color": "#000000",
		      "label": "T",
		      "style": "circled",
		      "position": {
		        "x": 95,
		        "y": 274
		      }
		    },
		    {
		      "id": "n9",
		      "color": "#000000",
		      "label": "T",
		      "style": "circled",
		      "position": {
		        "x": 145,
		        "y": 274
		      }
		    },
		    {
		      "id": "n10",
		      "color": "#000000",
		      "label": "T",
		      "style": "circled",
		      "position": {
		        "x": 195,
		        "y": 274
		      }
		    },
		    {
		      "id": "n11",
		      "color": "#000000",
		      "label": "T",
		      "style": "circled",
		      "position": {
		        "x": 245,
		        "y": 274
		      }
		    },
		    {
		      "id": "n12",
		      "color": "#000000",
		      "label": "T",
		      "style": "circled",
		      "position": {
		        "x": 295,
		        "y": 274
		      }
		    },
		    {
		      "id": "n13",
		      "color": "#000000",
		      "label": "T",
		      "style": "circled",
		      "position": {
		        "x": 345,
		        "y": 274
		      }
		    },
		    {
		      "id": "n14",
		      "color": "#000000",
		      "label": "T",
		      "style": "circled",
		      "position": {
		        "x": 395,
		        "y": 274
		      }
		    }
		  ],
		  "width": 440,
		  "height": 304,
		  "nodeRadius": 18,
		  "nodeFontSize": 14
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for treeDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

	// Extracted from question: xa26f24ccdf07b97c
	// Question: Select the tree diagram for a round-trip travel choice
	// Widget key: image_2
	test("tree-diagram - [xa26f24ccdf07b97c] Select the tree diagram for a round-trip travel choice (2)", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "type": "treeDiagram",
		  "edges": [
		    {
		      "to": "b1",
		      "from": "root",
		      "style": "solid"
		    },
		    {
		      "to": "c1",
		      "from": "root",
		      "style": "solid"
		    },
		    {
		      "to": "t1",
		      "from": "root",
		      "style": "solid"
		    },
		    {
		      "to": "b1_b",
		      "from": "b1",
		      "style": "solid"
		    },
		    {
		      "to": "b1_c",
		      "from": "b1",
		      "style": "solid"
		    },
		    {
		      "to": "b1_t",
		      "from": "b1",
		      "style": "solid"
		    },
		    {
		      "to": "c1_b",
		      "from": "c1",
		      "style": "solid"
		    },
		    {
		      "to": "c1_c",
		      "from": "c1",
		      "style": "solid"
		    },
		    {
		      "to": "c1_t",
		      "from": "c1",
		      "style": "solid"
		    },
		    {
		      "to": "t1_b",
		      "from": "t1",
		      "style": "solid"
		    },
		    {
		      "to": "t1_c",
		      "from": "t1",
		      "style": "solid"
		    },
		    {
		      "to": "t1_t",
		      "from": "t1",
		      "style": "solid"
		    }
		  ],
		  "nodes": [
		    {
		      "id": "root",
		      "color": "#000000",
		      "label": " ",
		      "style": "circled",
		      "position": {
		        "x": 220,
		        "y": 20
		      }
		    },
		    {
		      "id": "b1",
		      "color": "#000000",
		      "label": "B",
		      "style": "circled",
		      "position": {
		        "x": 86.8,
		        "y": 74
		      }
		    },
		    {
		      "id": "c1",
		      "color": "#000000",
		      "label": "C",
		      "style": "circled",
		      "position": {
		        "x": 220,
		        "y": 74
		      }
		    },
		    {
		      "id": "t1",
		      "color": "#000000",
		      "label": "T",
		      "style": "circled",
		      "position": {
		        "x": 353.2,
		        "y": 74
		      }
		    },
		    {
		      "id": "b1_b",
		      "color": "#000000",
		      "label": "B",
		      "style": "circled",
		      "position": {
		        "x": 42.4,
		        "y": 174
		      }
		    },
		    {
		      "id": "b1_c",
		      "color": "#000000",
		      "label": "C",
		      "style": "circled",
		      "position": {
		        "x": 86.8,
		        "y": 174
		      }
		    },
		    {
		      "id": "b1_t",
		      "color": "#000000",
		      "label": "T",
		      "style": "circled",
		      "position": {
		        "x": 131.2,
		        "y": 174
		      }
		    },
		    {
		      "id": "c1_b",
		      "color": "#000000",
		      "label": "B",
		      "style": "circled",
		      "position": {
		        "x": 175.6,
		        "y": 174
		      }
		    },
		    {
		      "id": "c1_c",
		      "color": "#000000",
		      "label": "C",
		      "style": "circled",
		      "position": {
		        "x": 220,
		        "y": 174
		      }
		    },
		    {
		      "id": "c1_t",
		      "color": "#000000",
		      "label": "T",
		      "style": "circled",
		      "position": {
		        "x": 264.4,
		        "y": 174
		      }
		    },
		    {
		      "id": "t1_b",
		      "color": "#000000",
		      "label": "B",
		      "style": "circled",
		      "position": {
		        "x": 308.8,
		        "y": 174
		      }
		    },
		    {
		      "id": "t1_c",
		      "color": "#000000",
		      "label": "C",
		      "style": "circled",
		      "position": {
		        "x": 353.2,
		        "y": 174
		      }
		    },
		    {
		      "id": "t1_t",
		      "color": "#000000",
		      "label": "T",
		      "style": "circled",
		      "position": {
		        "x": 397.6,
		        "y": 174
		      }
		    }
		  ],
		  "width": 440,
		  "height": 204,
		  "nodeRadius": 18,
		  "nodeFontSize": 14
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for treeDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

	// Extracted from question: x8098a292aa874f61
	// Question: Select the correct sample space display for tour type and time
	// Widget key: image_3
	test("tree-diagram - [x8098a292aa874f61] Select the correct sample space display for tour type and time", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "type": "treeDiagram",
		  "edges": [
		    {
		      "to": "w",
		      "from": "root",
		      "style": "solid"
		    },
		    {
		      "to": "b",
		      "from": "root",
		      "style": "solid"
		    },
		    {
		      "to": "t",
		      "from": "root",
		      "style": "solid"
		    },
		    {
		      "to": "w_m",
		      "from": "w",
		      "style": "solid"
		    },
		    {
		      "to": "w_e",
		      "from": "w",
		      "style": "solid"
		    },
		    {
		      "to": "b_m",
		      "from": "b",
		      "style": "solid"
		    },
		    {
		      "to": "b_e",
		      "from": "b",
		      "style": "solid"
		    },
		    {
		      "to": "t_m",
		      "from": "t",
		      "style": "solid"
		    },
		    {
		      "to": "t_e",
		      "from": "t",
		      "style": "solid"
		    }
		  ],
		  "nodes": [
		    {
		      "id": "root",
		      "color": "#000000",
		      "label": null,
		      "style": "circled",
		      "position": {
		        "x": 220,
		        "y": 30
		      }
		    },
		    {
		      "id": "w",
		      "color": "#000000",
		      "label": "W",
		      "style": "circled",
		      "position": {
		        "x": 86.8,
		        "y": 74
		      }
		    },
		    {
		      "id": "b",
		      "color": "#000000",
		      "label": "B",
		      "style": "circled",
		      "position": {
		        "x": 220,
		        "y": 74
		      }
		    },
		    {
		      "id": "t",
		      "color": "#000000",
		      "label": "T",
		      "style": "circled",
		      "position": {
		        "x": 353.2,
		        "y": 74
		      }
		    },
		    {
		      "id": "w_m",
		      "color": "#000000",
		      "label": "M",
		      "style": "circled",
		      "position": {
		        "x": 53.2,
		        "y": 174
		      }
		    },
		    {
		      "id": "w_e",
		      "color": "#000000",
		      "label": "E",
		      "style": "circled",
		      "position": {
		        "x": 120,
		        "y": 174
		      }
		    },
		    {
		      "id": "b_m",
		      "color": "#000000",
		      "label": "M",
		      "style": "circled",
		      "position": {
		        "x": 186.8,
		        "y": 174
		      }
		    },
		    {
		      "id": "b_e",
		      "color": "#000000",
		      "label": "E",
		      "style": "circled",
		      "position": {
		        "x": 253.2,
		        "y": 174
		      }
		    },
		    {
		      "id": "t_m",
		      "color": "#000000",
		      "label": "M",
		      "style": "circled",
		      "position": {
		        "x": 320,
		        "y": 174
		      }
		    },
		    {
		      "id": "t_e",
		      "color": "#000000",
		      "label": "E",
		      "style": "circled",
		      "position": {
		        "x": 386.8,
		        "y": 174
		      }
		    }
		  ],
		  "width": 440,
		  "height": 204,
		  "nodeRadius": 20,
		  "nodeFontSize": 14
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for treeDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

	// Extracted from question: xc17be1d52db777d5
	// Question: Whose display correctly represents the sample space?
	// Widget key: image_1
	test("tree-diagram - [xc17be1d52db777d5] Whose display correctly represents the sample space?", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "type": "treeDiagram",
		  "edges": [
		    {
		      "to": "R",
		      "from": "root",
		      "style": "solid"
		    },
		    {
		      "to": "F",
		      "from": "root",
		      "style": "solid"
		    },
		    {
		      "to": "LW",
		      "from": "R",
		      "style": "solid"
		    },
		    {
		      "to": "LS",
		      "from": "R",
		      "style": "solid"
		    },
		    {
		      "to": "LG",
		      "from": "R",
		      "style": "solid"
		    },
		    {
		      "to": "LP",
		      "from": "R",
		      "style": "solid"
		    },
		    {
		      "to": "RW",
		      "from": "F",
		      "style": "solid"
		    },
		    {
		      "to": "RS",
		      "from": "F",
		      "style": "solid"
		    },
		    {
		      "to": "RG",
		      "from": "F",
		      "style": "solid"
		    },
		    {
		      "to": "RP",
		      "from": "F",
		      "style": "solid"
		    }
		  ],
		  "nodes": [
		    {
		      "id": "root",
		      "color": "#000000",
		      "label": " ",
		      "style": "circled",
		      "position": {
		        "x": 220,
		        "y": 30
		      }
		    },
		    {
		      "id": "R",
		      "color": "#000000",
		      "label": "R",
		      "style": "circled",
		      "position": {
		        "x": 120,
		        "y": 74
		      }
		    },
		    {
		      "id": "F",
		      "color": "#000000",
		      "label": "F",
		      "style": "circled",
		      "position": {
		        "x": 320,
		        "y": 74
		      }
		    },
		    {
		      "id": "LW",
		      "color": "#000000",
		      "label": "W",
		      "style": "circled",
		      "position": {
		        "x": 45,
		        "y": 174
		      }
		    },
		    {
		      "id": "LS",
		      "color": "#000000",
		      "label": "S",
		      "style": "circled",
		      "position": {
		        "x": 95,
		        "y": 174
		      }
		    },
		    {
		      "id": "LG",
		      "color": "#000000",
		      "label": "G",
		      "style": "circled",
		      "position": {
		        "x": 145,
		        "y": 174
		      }
		    },
		    {
		      "id": "LP",
		      "color": "#000000",
		      "label": "P",
		      "style": "circled",
		      "position": {
		        "x": 195,
		        "y": 174
		      }
		    },
		    {
		      "id": "RW",
		      "color": "#000000",
		      "label": "W",
		      "style": "circled",
		      "position": {
		        "x": 245,
		        "y": 174
		      }
		    },
		    {
		      "id": "RS",
		      "color": "#000000",
		      "label": "S",
		      "style": "circled",
		      "position": {
		        "x": 295,
		        "y": 174
		      }
		    },
		    {
		      "id": "RG",
		      "color": "#000000",
		      "label": "G",
		      "style": "circled",
		      "position": {
		        "x": 345,
		        "y": 174
		      }
		    },
		    {
		      "id": "RP",
		      "color": "#000000",
		      "label": "P",
		      "style": "circled",
		      "position": {
		        "x": 395,
		        "y": 174
		      }
		    }
		  ],
		  "width": 440,
		  "height": 204,
		  "nodeRadius": 20,
		  "nodeFontSize": 14
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for treeDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

})
