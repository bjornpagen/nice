// ============================================================================
// EXTRACTED TEST FILE - AUTO-GENERATED
// ============================================================================
// This file was automatically generated from database structured_json data
// Generated on: 2025-09-17T15:38:03.956Z
// Widget Type: nestedShapeDiagram
// Source: Real questions from database
//
// These tests use actual widget configurations extracted from production data
// to ensure comprehensive test coverage with realistic scenarios.
//
// Note: Database data may not perfectly match current widget schemas, so these
// tests rely on runtime validation within generateWidget() for flexibility.
//
// DO NOT EDIT THIS FILE DIRECTLY - it will be overwritten on regeneration
//
// Run tests: bun test tests/widgets/nested-shape-diagram.extracted.test.ts
// Update snapshots: bun test tests/widgets/nested-shape-diagram.extracted.test.ts --update-snapshots
// ============================================================================

import { describe, test, expect } from "bun:test"
import { generateWidget } from "@superbuilders/qti-assessment-item-generator/widgets/widget-generator"
import type { Widget, WidgetInput } from "@superbuilders/qti-assessment-item-generator/widgets/registry"
import * as errors from "@superbuilders/errors"
import * as logger from "@superbuilders/slog"

describe("nestedShapeDiagram widget tests", () => {
	// Extracted from question: xb9a2f2df68f7f278
	// Question: Area of a shaded region (rectangle minus circle)
	// Widget key: image_1
	test("nested-shape-diagram - [xb9a2f2df68f7f278] Area of a shaded region (rectangle minus circle)", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "type": "nestedShapeDiagram",
		  "width": 275,
		  "height": 225,
		  "shapes": [
		    {
		      "id": "rect",
		      "type": "polygon",
		      "vertexIds": [
		        "v1",
		        "v2",
		        "v3",
		        "v4"
		      ]
		    },
		    {
		      "id": "circle",
		      "type": "circle",
		      "radius": 75,
		      "centerId": "c"
		    }
		  ],
		  "vertices": [
		    {
		      "x": 25,
		      "y": 25,
		      "id": "v1"
		    },
		    {
		      "x": 225,
		      "y": 25,
		      "id": "v2"
		    },
		    {
		      "x": 225,
		      "y": 200,
		      "id": "v3"
		    },
		    {
		      "x": 25,
		      "y": 200,
		      "id": "v4"
		    },
		    {
		      "x": 125,
		      "y": 112.5,
		      "id": "c"
		    },
		    {
		      "x": 200,
		      "y": 112.5,
		      "id": "r"
		    }
		  ],
		  "shadedRegions": [
		    {
		      "path": [
		        {
		          "shapeId": "rect",
		          "pathType": "outer"
		        },
		        {
		          "shapeId": "circle",
		          "pathType": "inner"
		        }
		      ],
		      "fillColor": "#ccfaff"
		    }
		  ],
		  "internalSegments": [
		    {
		      "label": {
		        "unit": "cm",
		        "value": 3
		      },
		      "style": "solid",
		      "toVertexId": "r",
		      "fromVertexId": "c"
		    },
		    {
		      "label": {
		        "unit": "cm",
		        "value": 8
		      },
		      "style": "dashed",
		      "toVertexId": "v2",
		      "fromVertexId": "v1"
		    },
		    {
		      "label": {
		        "unit": "cm",
		        "value": 7
		      },
		      "style": "dashed",
		      "toVertexId": "v4",
		      "fromVertexId": "v1"
		    }
		  ],
		  "rightAngleMarkers": null
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for nestedShapeDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

	// Extracted from question: x70ade9874035cc08
	// Question: Area of the shaded region: square and circle
	// Widget key: image_1
	test("nested-shape-diagram - [x70ade9874035cc08] Area of the shaded region: square and circle", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "type": "nestedShapeDiagram",
		  "width": 210,
		  "height": 175,
		  "shapes": [
		    {
		      "id": "square",
		      "type": "polygon",
		      "vertexIds": [
		        "tl",
		        "tr",
		        "br",
		        "bl"
		      ]
		    },
		    {
		      "id": "circle",
		      "type": "circle",
		      "radius": 35,
		      "centerId": "c"
		    }
		  ],
		  "vertices": [
		    {
		      "x": 35,
		      "y": 35,
		      "id": "tl"
		    },
		    {
		      "x": 140,
		      "y": 35,
		      "id": "tr"
		    },
		    {
		      "x": 140,
		      "y": 140,
		      "id": "br"
		    },
		    {
		      "x": 35,
		      "y": 140,
		      "id": "bl"
		    },
		    {
		      "x": 87.5,
		      "y": 87.5,
		      "id": "c"
		    },
		    {
		      "x": 122.5,
		      "y": 87.5,
		      "id": "cr"
		    }
		  ],
		  "shadedRegions": [
		    {
		      "path": [
		        {
		          "shapeId": "square",
		          "pathType": "outer"
		        },
		        {
		          "shapeId": "circle",
		          "pathType": "inner"
		        }
		      ],
		      "fillColor": "#ccfaff"
		    }
		  ],
		  "internalSegments": [
		    {
		      "label": {
		        "unit": "cm",
		        "value": 1
		      },
		      "style": "solid",
		      "toVertexId": "cr",
		      "fromVertexId": "c"
		    },
		    {
		      "label": {
		        "unit": "cm",
		        "value": 3
		      },
		      "style": "solid",
		      "toVertexId": "br",
		      "fromVertexId": "bl"
		    },
		    {
		      "label": {
		        "unit": "cm",
		        "value": 3
		      },
		      "style": "solid",
		      "toVertexId": "tl",
		      "fromVertexId": "bl"
		    }
		  ],
		  "rightAngleMarkers": null
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for nestedShapeDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

	// Extracted from question: x74eb96d7a07de3a4
	// Question: Area of the shaded region between a circle and a rectangle
	// Widget key: image_1
	test("nested-shape-diagram - [x74eb96d7a07de3a4] Area of the shaded region between a circle and a rectangle", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "type": "nestedShapeDiagram",
		  "width": 200,
		  "height": 200,
		  "shapes": [
		    {
		      "id": "rect1",
		      "type": "polygon",
		      "vertexIds": [
		        "r1",
		        "r2",
		        "r3",
		        "r4"
		      ]
		    },
		    {
		      "id": "circle1",
		      "type": "circle",
		      "radius": 80,
		      "centerId": "C"
		    }
		  ],
		  "vertices": [
		    {
		      "x": 100,
		      "y": 100,
		      "id": "C"
		    },
		    {
		      "x": 180,
		      "y": 100,
		      "id": "R_right"
		    },
		    {
		      "x": 70,
		      "y": 70,
		      "id": "r1"
		    },
		    {
		      "x": 130,
		      "y": 70,
		      "id": "r2"
		    },
		    {
		      "x": 130,
		      "y": 130,
		      "id": "r3"
		    },
		    {
		      "x": 70,
		      "y": 130,
		      "id": "r4"
		    }
		  ],
		  "shadedRegions": [
		    {
		      "path": [
		        {
		          "shapeId": "circle1",
		          "pathType": "outer"
		        },
		        {
		          "shapeId": "rect1",
		          "pathType": "inner"
		        }
		      ],
		      "fillColor": "#ccfaff"
		    }
		  ],
		  "internalSegments": [
		    {
		      "label": {
		        "unit": "cm",
		        "value": 4
		      },
		      "style": "solid",
		      "toVertexId": "R_right",
		      "fromVertexId": "C"
		    },
		    {
		      "label": {
		        "unit": "cm",
		        "value": 3
		      },
		      "style": "solid",
		      "toVertexId": "r2",
		      "fromVertexId": "r1"
		    },
		    {
		      "label": {
		        "unit": "cm",
		        "value": 3
		      },
		      "style": "solid",
		      "toVertexId": "r4",
		      "fromVertexId": "r1"
		    }
		  ],
		  "rightAngleMarkers": null
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for nestedShapeDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

	// Extracted from question: x7a1aff151bb13cf8
	// Question: Tile packages for a patio extension
	// Widget key: image_1
	test("nested-shape-diagram - [x7a1aff151bb13cf8] Tile packages for a patio extension", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "type": "nestedShapeDiagram",
		  "width": 320,
		  "height": 264.211,
		  "shapes": [
		    {
		      "id": "outer",
		      "type": "polygon",
		      "vertexIds": [
		        "vO1",
		        "vO2",
		        "vO3",
		        "vO4"
		      ]
		    },
		    {
		      "id": "inner",
		      "type": "polygon",
		      "vertexIds": [
		        "vI1",
		        "vI2",
		        "vI3",
		        "vI4"
		      ]
		    }
		  ],
		  "vertices": [
		    {
		      "x": 0,
		      "y": 48.026,
		      "id": "vO1"
		    },
		    {
		      "x": 258.026,
		      "y": 48.026,
		      "id": "vO2"
		    },
		    {
		      "x": 258.026,
		      "y": 264.211,
		      "id": "vO3"
		    },
		    {
		      "x": 0,
		      "y": 264.211,
		      "id": "vO4"
		    },
		    {
		      "x": 41.842,
		      "y": 48.026,
		      "id": "vI1"
		    },
		    {
		      "x": 216.184,
		      "y": 48.026,
		      "id": "vI2"
		    },
		    {
		      "x": 216.184,
		      "y": 222.368,
		      "id": "vI3"
		    },
		    {
		      "x": 41.842,
		      "y": 222.368,
		      "id": "vI4"
		    }
		  ],
		  "shadedRegions": [
		    {
		      "path": [
		        {
		          "shapeId": "outer",
		          "pathType": "outer"
		        },
		        {
		          "shapeId": "inner",
		          "pathType": "inner"
		        }
		      ],
		      "fillColor": "#ccfaff"
		    }
		  ],
		  "internalSegments": [],
		  "rightAngleMarkers": null
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for nestedShapeDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

})
