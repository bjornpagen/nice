// ============================================================================
// EXTRACTED TEST FILE - AUTO-GENERATED
// ============================================================================
// This file was automatically generated from database structured_json data
// Generated on: 2025-09-18T05:17:02.122Z
// Widget Type: marbleDiagram
// Source: Real questions from database
//
// These tests use actual widget configurations extracted from production data
// to ensure comprehensive test coverage with realistic scenarios.
//
// Note: Database data may not perfectly match current widget schemas, so these
// tests rely on runtime validation within generateWidget() for flexibility.
//
// DO NOT EDIT THIS FILE DIRECTLY - it will be overwritten on regeneration
//
// Run tests: bun test tests/widgets/marble-diagram.extracted.test.ts
// Update snapshots: bun test tests/widgets/marble-diagram.extracted.test.ts --update-snapshots
// ============================================================================

import { describe, test, expect } from "bun:test"
import { generateWidget } from "@superbuilders/qti-assessment-item-generator/widgets/widget-generator"
import type { Widget, WidgetInput } from "@superbuilders/qti-assessment-item-generator/widgets/registry"
import * as errors from "@superbuilders/errors"
import * as logger from "@superbuilders/slog"

describe("marbleDiagram widget tests", () => {
	// Extracted from question: x2cdeff9e053edd45
	// Question: Probability of drawing a blue or red marble
	// Widget key: image_1
	test("marble-diagram - [x2cdeff9e053edd45] Probability of drawing a blue or red marble", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "type": "marbleDiagram",
		  "groups": [
		    {
		      "color": "#5B8DEF",
		      "count": 8
		    },
		    {
		      "color": "#3CB371",
		      "count": 5
		    },
		    {
		      "color": "#D0021B",
		      "count": 8
		    }
		  ]
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for marbleDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

	// Extracted from question: x13f9d45cda6eac17
	// Question: Probability of drawing a blue marble
	// Widget key: image_1
	test("marble-diagram - [x13f9d45cda6eac17] Probability of drawing a blue marble", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "type": "marbleDiagram",
		  "groups": [
		    {
		      "color": "#d0021b",
		      "count": 5
		    },
		    {
		      "color": "#2ecc71",
		      "count": 4
		    },
		    {
		      "color": "#5B8DEF",
		      "count": 3
		    }
		  ]
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for marbleDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

	// Extracted from question: x8b89440ec2f6fc34
	// Question: Probability of not drawing a blue marble
	// Widget key: image_1
	test("marble-diagram - [x8b89440ec2f6fc34] Probability of not drawing a blue marble", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "type": "marbleDiagram",
		  "groups": [
		    {
		      "color": "#4C78A8",
		      "count": 7
		    },
		    {
		      "color": "#59A14F",
		      "count": 2
		    },
		    {
		      "color": "#E45756",
		      "count": 1
		    }
		  ]
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for marbleDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

	// Extracted from question: xc3db6fb416d05357
	// Question: Probability of drawing a blue marble
	// Widget key: image_1
	test("marble-diagram - [xc3db6fb416d05357] Probability of drawing a blue marble", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "type": "marbleDiagram",
		  "groups": [
		    {
		      "color": "#d0021b",
		      "count": 5
		    },
		    {
		      "color": "#2ecc71",
		      "count": 3
		    },
		    {
		      "color": "#5b8def",
		      "count": 12
		    }
		  ]
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for marbleDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

	// Extracted from question: x1486ced9f741eace
	// Question: Best prediction for drawing blue marbles
	// Widget key: image_1
	test("marble-diagram - [x1486ced9f741eace] Best prediction for drawing blue marbles", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "type": "marbleDiagram",
		  "groups": [
		    {
		      "color": "#D0021B",
		      "count": 3
		    },
		    {
		      "color": "#4A90E2",
		      "count": 2
		    }
		  ]
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for marbleDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

	// Extracted from question: xaaa5d24fb5ecf526
	// Question: Best prediction for purple marble draws
	// Widget key: image_1
	test("marble-diagram - [xaaa5d24fb5ecf526] Best prediction for purple marble draws", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "type": "marbleDiagram",
		  "groups": [
		    {
		      "color": "#8A2BE2",
		      "count": 3
		    },
		    {
		      "color": "#1E90FF",
		      "count": 4
		    }
		  ]
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for marbleDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

})
