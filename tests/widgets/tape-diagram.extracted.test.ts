// ============================================================================
// EXTRACTED TEST FILE - AUTO-GENERATED
// ============================================================================
// This file was automatically generated from database structured_json data
// Generated on: 2025-09-18T05:17:02.166Z
// Widget Type: tapeDiagram
// Source: Real questions from database
//
// These tests use actual widget configurations extracted from production data
// to ensure comprehensive test coverage with realistic scenarios.
//
// Note: Database data may not perfectly match current widget schemas, so these
// tests rely on runtime validation within generateWidget() for flexibility.
//
// DO NOT EDIT THIS FILE DIRECTLY - it will be overwritten on regeneration
//
// Run tests: bun test tests/widgets/tape-diagram.extracted.test.ts
// Update snapshots: bun test tests/widgets/tape-diagram.extracted.test.ts --update-snapshots
// ============================================================================

import { describe, test, expect } from "bun:test"
import { generateWidget } from "@superbuilders/qti-assessment-item-generator/widgets/widget-generator"
import type { Widget, WidgetInput } from "@superbuilders/qti-assessment-item-generator/widgets/registry"
import * as errors from "@superbuilders/errors"
import * as logger from "@superbuilders/slog"

describe("tapeDiagram widget tests", () => {
	// Extracted from question: x9179bb7f94901e42
	// Question: Complete the table: percentages of graduating students
	// Widget key: image_1
	test("tape-diagram - [x9179bb7f94901e42] Complete the table: percentages of graduating students", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "type": "tapeDiagram",
		  "width": 400,
		  "height": 320,
		  "topTape": {
		    "grid": {
		      "show": true,
		      "strokeWidth": 1.5
		    },
		    "fills": [
		      {
		        "span": {
		          "by": "percent",
		          "endPct": 100,
		          "startPct": 0
		        },
		        "label": null,
		        "style": {
		          "fill": "#7854ab",
		          "kind": "solid",
		          "fillOpacity": 0.3
		        }
		      }
		    ],
		    "label": " ",
		    "extent": null,
		    "unitsTotal": 4,
		    "roundedCaps": false,
		    "defaultStroke": "#000000",
		    "defaultStrokeWidth": 1.5
		  },
		  "brackets": [
		    {
		      "span": {
		        "by": "units",
		        "endUnit": 4,
		        "startUnit": 0
		      },
		      "tape": "top",
		      "style": {
		        "kind": "curly",
		        "stroke": null,
		        "strokeWidth": null
		      },
		      "labelTop": "240",
		      "labelBottom": "100 percent"
		    }
		  ],
		  "bottomTape": null,
		  "referenceUnitsTotal": null
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for tapeDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

	// Extracted from question: x3feca2d6df92fe75
	// Question: Complete a percentage table from a tape diagram
	// Widget key: image_1
	test("tape-diagram - [x3feca2d6df92fe75] Complete a percentage table from a tape diagram", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "type": "tapeDiagram",
		  "width": 400,
		  "height": 320,
		  "topTape": {
		    "grid": {
		      "show": true,
		      "strokeWidth": 2
		    },
		    "fills": [
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 6,
		          "startUnit": 0
		        },
		        "label": null,
		        "style": {
		          "fill": "#7854ab",
		          "kind": "solid",
		          "fillOpacity": 0.3
		        }
		      }
		    ],
		    "label": " ",
		    "extent": null,
		    "unitsTotal": 6,
		    "roundedCaps": false,
		    "defaultStroke": "#000000",
		    "defaultStrokeWidth": 2
		  },
		  "brackets": [
		    {
		      "span": {
		        "by": "units",
		        "endUnit": 6,
		        "startUnit": 0
		      },
		      "tape": "top",
		      "style": {
		        "kind": "curly",
		        "stroke": "#000000",
		        "strokeWidth": 2
		      },
		      "labelTop": "132",
		      "labelBottom": " "
		    },
		    {
		      "span": {
		        "by": "units",
		        "endUnit": 6,
		        "startUnit": 0
		      },
		      "tape": "top",
		      "style": {
		        "kind": "curly",
		        "stroke": "#000000",
		        "strokeWidth": 2
		      },
		      "labelTop": " ",
		      "labelBottom": "150 percent"
		    }
		  ],
		  "bottomTape": null,
		  "referenceUnitsTotal": null
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for tapeDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

	// Extracted from question: x638cb84bd59cb4ed
	// Question: Percentages of hair length before a haircut
	// Widget key: image_1
	test("tape-diagram - [x638cb84bd59cb4ed] Percentages of hair length before a haircut", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "type": "tapeDiagram",
		  "width": 400,
		  "height": 320,
		  "topTape": {
		    "grid": {
		      "show": true,
		      "strokeWidth": 1
		    },
		    "fills": [
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 3,
		          "startUnit": 0
		        },
		        "label": null,
		        "style": {
		          "fill": "#7854ab",
		          "kind": "solid",
		          "fillOpacity": 0.3
		        }
		      }
		    ],
		    "label": " ",
		    "extent": null,
		    "unitsTotal": 5,
		    "roundedCaps": false,
		    "defaultStroke": "#000000",
		    "defaultStrokeWidth": 1.5
		  },
		  "brackets": [
		    {
		      "span": {
		        "by": "units",
		        "endUnit": 3,
		        "startUnit": 0
		      },
		      "tape": "top",
		      "style": {
		        "kind": "curly",
		        "stroke": null,
		        "strokeWidth": null
		      },
		      "labelTop": "12",
		      "labelBottom": " "
		    },
		    {
		      "span": {
		        "by": "units",
		        "endUnit": 3,
		        "startUnit": 0
		      },
		      "tape": "top",
		      "style": {
		        "kind": "curly",
		        "stroke": null,
		        "strokeWidth": null
		      },
		      "labelTop": " ",
		      "labelBottom": "60 percent"
		    }
		  ],
		  "bottomTape": null,
		  "referenceUnitsTotal": null
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for tapeDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

	// Extracted from question: x33697ffaa3a7b6ab
	// Question: Complete a table of percentages of a time interval
	// Widget key: image_1
	test("tape-diagram - [x33697ffaa3a7b6ab] Complete a table of percentages of a time interval", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "type": "tapeDiagram",
		  "width": 400,
		  "height": 320,
		  "topTape": {
		    "grid": {
		      "show": true,
		      "strokeWidth": 1
		    },
		    "fills": [
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 2,
		          "startUnit": 0
		        },
		        "label": null,
		        "style": {
		          "fill": "#7854ab",
		          "kind": "solid",
		          "fillOpacity": 0.3
		        }
		      }
		    ],
		    "label": null,
		    "extent": null,
		    "unitsTotal": 5,
		    "roundedCaps": false,
		    "defaultStroke": "#000000",
		    "defaultStrokeWidth": 1.5
		  },
		  "brackets": [
		    {
		      "span": {
		        "by": "units",
		        "endUnit": 2,
		        "startUnit": 0
		      },
		      "tape": "top",
		      "style": {
		        "kind": "curly",
		        "stroke": "#000000",
		        "strokeWidth": 2
		      },
		      "labelTop": "40",
		      "labelBottom": "100 percent"
		    }
		  ],
		  "bottomTape": null,
		  "referenceUnitsTotal": null
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for tapeDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

	// Extracted from question: xab6e6fb17f088b55
	// Question: Complete a percentage table from a tape diagram
	// Widget key: image_1
	test("tape-diagram - [xab6e6fb17f088b55] Complete a percentage table from a tape diagram", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "type": "tapeDiagram",
		  "width": 400,
		  "height": 320,
		  "topTape": {
		    "grid": {
		      "show": true,
		      "strokeWidth": 2
		    },
		    "fills": [
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 10,
		          "startUnit": 0
		        },
		        "label": null,
		        "style": {
		          "fill": "#0c7f99",
		          "kind": "solid",
		          "fillOpacity": 0.3
		        }
		      }
		    ],
		    "label": "Time (minutes)",
		    "extent": null,
		    "unitsTotal": 11,
		    "roundedCaps": false,
		    "defaultStroke": "#000000",
		    "defaultStrokeWidth": 2
		  },
		  "brackets": [
		    {
		      "span": {
		        "by": "units",
		        "endUnit": 10,
		        "startUnit": 0
		      },
		      "tape": "top",
		      "style": {
		        "kind": "curly",
		        "stroke": "#000000",
		        "strokeWidth": 2
		      },
		      "labelTop": "120",
		      "labelBottom": "100 percent"
		    }
		  ],
		  "bottomTape": null,
		  "referenceUnitsTotal": null
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for tapeDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

	// Extracted from question: x6798155e9cdba62c
	// Question: Complete a percentage table from a tape diagram
	// Widget key: image_1
	test("tape-diagram - [x6798155e9cdba62c] Complete a percentage table from a tape diagram", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "type": "tapeDiagram",
		  "width": 400,
		  "height": 320,
		  "topTape": {
		    "grid": {
		      "show": true,
		      "strokeWidth": 1
		    },
		    "fills": [
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 10,
		          "startUnit": 0
		        },
		        "label": null,
		        "style": {
		          "fill": "#7854ab",
		          "kind": "solid",
		          "fillOpacity": 0.3
		        }
		      }
		    ],
		    "label": " ",
		    "extent": null,
		    "unitsTotal": 10,
		    "roundedCaps": false,
		    "defaultStroke": "#000000",
		    "defaultStrokeWidth": 1.5
		  },
		  "brackets": [
		    {
		      "span": {
		        "by": "units",
		        "endUnit": 10,
		        "startUnit": 0
		      },
		      "tape": "top",
		      "style": {
		        "kind": "curly",
		        "stroke": null,
		        "strokeWidth": null
		      },
		      "labelTop": "70",
		      "labelBottom": "100 percent"
		    }
		  ],
		  "bottomTape": null,
		  "referenceUnitsTotal": null
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for tapeDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

	// Extracted from question: xc9ad00f58d3b6529
	// Question: Complete the percentages table from a tape diagram
	// Widget key: image_1
	test("tape-diagram - [xc9ad00f58d3b6529] Complete the percentages table from a tape diagram", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "type": "tapeDiagram",
		  "width": 400,
		  "height": 320,
		  "topTape": {
		    "grid": {
		      "show": true,
		      "strokeWidth": 2
		    },
		    "fills": [
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 5,
		          "startUnit": 0
		        },
		        "label": null,
		        "style": {
		          "fill": "#7854ab",
		          "kind": "solid",
		          "fillOpacity": 0.3
		        }
		      }
		    ],
		    "label": " ",
		    "extent": null,
		    "unitsTotal": 6,
		    "roundedCaps": false,
		    "defaultStroke": "#000000",
		    "defaultStrokeWidth": 2
		  },
		  "brackets": [
		    {
		      "span": {
		        "by": "units",
		        "endUnit": 5,
		        "startUnit": 0
		      },
		      "tape": "top",
		      "style": {
		        "kind": "curly",
		        "stroke": null,
		        "strokeWidth": null
		      },
		      "labelTop": "155",
		      "labelBottom": "100 percent"
		    }
		  ],
		  "bottomTape": null,
		  "referenceUnitsTotal": null
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for tapeDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

	// Extracted from question: xd8f16c72635b39b0
	// Question: Complete the table: percentages of teeth on a comb
	// Widget key: image_1
	test("tape-diagram - [xd8f16c72635b39b0] Complete the table: percentages of teeth on a comb", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "type": "tapeDiagram",
		  "width": 400,
		  "height": 350,
		  "topTape": {
		    "grid": {
		      "show": true,
		      "strokeWidth": 1
		    },
		    "fills": [
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 10,
		          "startUnit": 0
		        },
		        "label": null,
		        "style": {
		          "fill": "#7854ab",
		          "kind": "solid",
		          "fillOpacity": 0.3
		        }
		      }
		    ],
		    "label": "Teeth on a comb",
		    "extent": null,
		    "unitsTotal": 10,
		    "roundedCaps": false,
		    "defaultStroke": "#000000",
		    "defaultStrokeWidth": 1.5
		  },
		  "brackets": [
		    {
		      "span": {
		        "by": "units",
		        "endUnit": 10,
		        "startUnit": 0
		      },
		      "tape": "top",
		      "style": {
		        "kind": "curly",
		        "stroke": null,
		        "strokeWidth": null
		      },
		      "labelTop": "90",
		      "labelBottom": "100 percent"
		    }
		  ],
		  "bottomTape": null,
		  "referenceUnitsTotal": null
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for tapeDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

	// Extracted from question: xfa76c4b9d5950a6e
	// Question: Complete the table for percentages of Elizabeth's study time
	// Widget key: image_1
	test("tape-diagram - [xfa76c4b9d5950a6e] Complete the table for percentages of Elizabeth's study time", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "type": "tapeDiagram",
		  "width": 320,
		  "height": 300,
		  "topTape": {
		    "grid": {
		      "show": true,
		      "strokeWidth": 1
		    },
		    "fills": [
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 7,
		          "startUnit": 0
		        },
		        "label": null,
		        "style": {
		          "fill": "#0c7f99",
		          "kind": "solid",
		          "fillOpacity": 0.3
		        }
		      }
		    ],
		    "label": "Time (minutes)",
		    "extent": null,
		    "unitsTotal": 10,
		    "roundedCaps": false,
		    "defaultStroke": "#000000",
		    "defaultStrokeWidth": 1.5
		  },
		  "brackets": [
		    {
		      "span": {
		        "by": "units",
		        "endUnit": 7,
		        "startUnit": 0
		      },
		      "tape": "top",
		      "style": {
		        "kind": "curly",
		        "stroke": null,
		        "strokeWidth": null
		      },
		      "labelTop": "91",
		      "labelBottom": "70%"
		    }
		  ],
		  "bottomTape": null,
		  "referenceUnitsTotal": null
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for tapeDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

	// Extracted from question: x927c35dc59ff7d11
	// Question: Complete the percentage table from a tape diagram
	// Widget key: image_1
	test("tape-diagram - [x927c35dc59ff7d11] Complete the percentage table from a tape diagram", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "type": "tapeDiagram",
		  "width": 400,
		  "height": 320,
		  "topTape": {
		    "grid": {
		      "show": true,
		      "strokeWidth": 1
		    },
		    "fills": [
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 7,
		          "startUnit": 0
		        },
		        "label": null,
		        "style": {
		          "fill": "#7854ab",
		          "kind": "solid",
		          "fillOpacity": 0.3
		        }
		      }
		    ],
		    "label": " ",
		    "extent": null,
		    "unitsTotal": 7,
		    "roundedCaps": false,
		    "defaultStroke": "#000000",
		    "defaultStrokeWidth": 1.5
		  },
		  "brackets": [
		    {
		      "span": {
		        "by": "units",
		        "endUnit": 7,
		        "startUnit": 0
		      },
		      "tape": "top",
		      "style": {
		        "kind": "curly",
		        "stroke": null,
		        "strokeWidth": null
		      },
		      "labelTop": "14",
		      "labelBottom": "350 percent"
		    }
		  ],
		  "bottomTape": null,
		  "referenceUnitsTotal": null
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for tapeDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

	// Extracted from question: xc62f04eb5d67e2ce
	// Question: Complete a ratio table for monkey food
	// Widget key: image_1
	test("tape-diagram - [xc62f04eb5d67e2ce] Complete a ratio table for monkey food", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "type": "tapeDiagram",
		  "width": 400,
		  "height": 320,
		  "topTape": {
		    "grid": {
		      "show": true,
		      "strokeWidth": 1
		    },
		    "fills": [],
		    "label": "Fruit mass",
		    "extent": {
		      "by": "units",
		      "endUnit": 7,
		      "startUnit": 0
		    },
		    "unitsTotal": 7,
		    "roundedCaps": false,
		    "defaultStroke": "#000000",
		    "defaultStrokeWidth": 1.5
		  },
		  "brackets": [
		    {
		      "span": {
		        "by": "units",
		        "endUnit": 7,
		        "startUnit": 0
		      },
		      "tape": "top",
		      "style": {
		        "kind": "curly",
		        "stroke": null,
		        "strokeWidth": null
		      },
		      "labelTop": "Fruit mass",
		      "labelBottom": null
		    },
		    {
		      "span": {
		        "by": "units",
		        "endUnit": 5,
		        "startUnit": 0
		      },
		      "tape": "bottom",
		      "style": {
		        "kind": "curly",
		        "stroke": null,
		        "strokeWidth": null
		      },
		      "labelTop": null,
		      "labelBottom": "Biscuit mass"
		    }
		  ],
		  "bottomTape": {
		    "grid": {
		      "show": true,
		      "strokeWidth": 1
		    },
		    "fills": [],
		    "label": "Biscuit mass",
		    "extent": {
		      "by": "units",
		      "endUnit": 5,
		      "startUnit": 0
		    },
		    "unitsTotal": 5,
		    "roundedCaps": false,
		    "defaultStroke": "#000000",
		    "defaultStrokeWidth": 1.5
		  },
		  "referenceUnitsTotal": 7
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for tapeDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

	// Extracted from question: xc09eadc3cdc15723
	// Question: Complete a ratio table from a tape diagram
	// Widget key: image_1
	test("tape-diagram - [xc09eadc3cdc15723] Complete a ratio table from a tape diagram", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "type": "tapeDiagram",
		  "width": 320,
		  "height": 368,
		  "topTape": {
		    "grid": {
		      "show": true,
		      "strokeWidth": 2
		    },
		    "fills": [],
		    "label": null,
		    "extent": {
		      "by": "units",
		      "endUnit": 5,
		      "startUnit": 0
		    },
		    "unitsTotal": 5,
		    "roundedCaps": false,
		    "defaultStroke": "#000000",
		    "defaultStrokeWidth": 1.5
		  },
		  "brackets": [
		    {
		      "span": {
		        "by": "units",
		        "endUnit": 5,
		        "startUnit": 0
		      },
		      "tape": "top",
		      "style": {
		        "kind": "curly",
		        "stroke": "#000000",
		        "strokeWidth": 1.5
		      },
		      "labelTop": "Winning spaces",
		      "labelBottom": null
		    },
		    {
		      "span": {
		        "by": "units",
		        "endUnit": 6,
		        "startUnit": 0
		      },
		      "tape": "bottom",
		      "style": {
		        "kind": "curly",
		        "stroke": "#000000",
		        "strokeWidth": 1.5
		      },
		      "labelTop": null,
		      "labelBottom": "Non-winning spaces"
		    }
		  ],
		  "bottomTape": {
		    "grid": {
		      "show": true,
		      "strokeWidth": 2
		    },
		    "fills": [],
		    "label": null,
		    "extent": {
		      "by": "units",
		      "endUnit": 6,
		      "startUnit": 0
		    },
		    "unitsTotal": 6,
		    "roundedCaps": false,
		    "defaultStroke": "#000000",
		    "defaultStrokeWidth": 1.5
		  },
		  "referenceUnitsTotal": 11
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for tapeDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

	// Extracted from question: x92a4eee133015446
	// Question: Complete a table using a ratio from a tape diagram
	// Widget key: image_1
	test("tape-diagram - [x92a4eee133015446] Complete a table using a ratio from a tape diagram", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "type": "tapeDiagram",
		  "width": 400,
		  "height": 320,
		  "topTape": {
		    "grid": {
		      "show": true,
		      "strokeWidth": 1
		    },
		    "fills": [],
		    "label": " ",
		    "extent": {
		      "by": "units",
		      "endUnit": 4,
		      "startUnit": 0
		    },
		    "unitsTotal": 4,
		    "roundedCaps": false,
		    "defaultStroke": "#000000",
		    "defaultStrokeWidth": 1.5
		  },
		  "brackets": [
		    {
		      "span": {
		        "by": "units",
		        "endUnit": 4,
		        "startUnit": 0
		      },
		      "tape": "top",
		      "style": {
		        "kind": "curly",
		        "stroke": "#000000",
		        "strokeWidth": 2
		      },
		      "labelTop": "Prisms",
		      "labelBottom": " "
		    },
		    {
		      "span": {
		        "by": "units",
		        "endUnit": 1,
		        "startUnit": 0
		      },
		      "tape": "bottom",
		      "style": {
		        "kind": "curly",
		        "stroke": "#000000",
		        "strokeWidth": 2
		      },
		      "labelTop": " ",
		      "labelBottom": "Pyramids"
		    }
		  ],
		  "bottomTape": {
		    "grid": {
		      "show": true,
		      "strokeWidth": 1
		    },
		    "fills": [],
		    "label": " ",
		    "extent": {
		      "by": "units",
		      "endUnit": 1,
		      "startUnit": 0
		    },
		    "unitsTotal": 1,
		    "roundedCaps": false,
		    "defaultStroke": "#000000",
		    "defaultStrokeWidth": 1.5
		  },
		  "referenceUnitsTotal": 4
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for tapeDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

	// Extracted from question: x6ae32e36d5116582
	// Question: Find Ginny's spells from a tape diagram ratio
	// Widget key: image_1
	test("tape-diagram - [x6ae32e36d5116582] Find Ginny's spells from a tape diagram ratio", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "type": "tapeDiagram",
		  "width": 400,
		  "height": 320,
		  "topTape": {
		    "grid": {
		      "show": true,
		      "strokeWidth": 2
		    },
		    "fills": [],
		    "label": "Luna's spells",
		    "extent": {
		      "by": "units",
		      "endUnit": 4,
		      "startUnit": 0
		    },
		    "unitsTotal": 4,
		    "roundedCaps": false,
		    "defaultStroke": "#000000",
		    "defaultStrokeWidth": 2
		  },
		  "brackets": [
		    {
		      "span": {
		        "by": "units",
		        "endUnit": 4,
		        "startUnit": 0
		      },
		      "tape": "top",
		      "style": {
		        "kind": "curly",
		        "stroke": null,
		        "strokeWidth": 2
		      },
		      "labelTop": "Luna's spells",
		      "labelBottom": " "
		    },
		    {
		      "span": {
		        "by": "units",
		        "endUnit": 5,
		        "startUnit": 0
		      },
		      "tape": "bottom",
		      "style": {
		        "kind": "curly",
		        "stroke": null,
		        "strokeWidth": 2
		      },
		      "labelTop": " ",
		      "labelBottom": "Ginny's spells"
		    }
		  ],
		  "bottomTape": {
		    "grid": {
		      "show": true,
		      "strokeWidth": 2
		    },
		    "fills": [],
		    "label": "Ginny's spells",
		    "extent": {
		      "by": "units",
		      "endUnit": 5,
		      "startUnit": 0
		    },
		    "unitsTotal": 5,
		    "roundedCaps": false,
		    "defaultStroke": "#000000",
		    "defaultStrokeWidth": 2
		  },
		  "referenceUnitsTotal": 5
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for tapeDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

	// Extracted from question: x203c92ded4f962a6
	// Question: Complete the table using a ratio tape diagram
	// Widget key: image_1
	test("tape-diagram - [x203c92ded4f962a6] Complete the table using a ratio tape diagram", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "type": "tapeDiagram",
		  "width": 400,
		  "height": 320,
		  "topTape": {
		    "grid": {
		      "show": true,
		      "strokeWidth": 1
		    },
		    "fills": [],
		    "label": "Blue pieces",
		    "extent": {
		      "by": "units",
		      "endUnit": 3,
		      "startUnit": 0
		    },
		    "unitsTotal": 3,
		    "roundedCaps": false,
		    "defaultStroke": "#000000",
		    "defaultStrokeWidth": 1.5
		  },
		  "brackets": [
		    {
		      "span": {
		        "by": "units",
		        "endUnit": 3,
		        "startUnit": 0
		      },
		      "tape": "top",
		      "style": {
		        "kind": "curly",
		        "stroke": null,
		        "strokeWidth": null
		      },
		      "labelTop": "Blue pieces",
		      "labelBottom": " "
		    },
		    {
		      "span": {
		        "by": "units",
		        "endUnit": 5,
		        "startUnit": 0
		      },
		      "tape": "bottom",
		      "style": {
		        "kind": "curly",
		        "stroke": null,
		        "strokeWidth": null
		      },
		      "labelTop": " ",
		      "labelBottom": "Purple pieces"
		    }
		  ],
		  "bottomTape": {
		    "grid": {
		      "show": true,
		      "strokeWidth": 1
		    },
		    "fills": [],
		    "label": "Purple pieces",
		    "extent": {
		      "by": "units",
		      "endUnit": 5,
		      "startUnit": 0
		    },
		    "unitsTotal": 5,
		    "roundedCaps": false,
		    "defaultStroke": "#000000",
		    "defaultStrokeWidth": 1.5
		  },
		  "referenceUnitsTotal": 5
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for tapeDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

	// Extracted from question: xd29c61768fbd1fba
	// Question: Find total pizzas from a tape diagram ratio
	// Widget key: image_1
	test("tape-diagram - [xd29c61768fbd1fba] Find total pizzas from a tape diagram ratio", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "type": "tapeDiagram",
		  "width": 400,
		  "height": 300,
		  "topTape": {
		    "grid": {
		      "show": true,
		      "strokeWidth": 1
		    },
		    "fills": [],
		    "label": null,
		    "extent": null,
		    "unitsTotal": 3,
		    "roundedCaps": false,
		    "defaultStroke": "#000000",
		    "defaultStrokeWidth": 1.5
		  },
		  "brackets": [
		    {
		      "span": {
		        "by": "units",
		        "endUnit": 3,
		        "startUnit": 0
		      },
		      "tape": "top",
		      "style": {
		        "kind": "curly",
		        "stroke": null,
		        "strokeWidth": null
		      },
		      "labelTop": "Cheese pizzas",
		      "labelBottom": null
		    },
		    {
		      "span": {
		        "by": "units",
		        "endUnit": 1,
		        "startUnit": 0
		      },
		      "tape": "bottom",
		      "style": {
		        "kind": "curly",
		        "stroke": null,
		        "strokeWidth": null
		      },
		      "labelTop": null,
		      "labelBottom": "Pepperoni pizzas"
		    }
		  ],
		  "bottomTape": {
		    "grid": {
		      "show": true,
		      "strokeWidth": 1
		    },
		    "fills": [],
		    "label": null,
		    "extent": {
		      "by": "units",
		      "endUnit": 1,
		      "startUnit": 0
		    },
		    "unitsTotal": 1,
		    "roundedCaps": false,
		    "defaultStroke": "#000000",
		    "defaultStrokeWidth": 1.5
		  },
		  "referenceUnitsTotal": 3
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for tapeDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

	// Extracted from question: x5b15e7772fa32391
	// Question: Teeth on the smaller gear from a ratio
	// Widget key: image_1
	test("tape-diagram - [x5b15e7772fa32391] Teeth on the smaller gear from a ratio", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "type": "tapeDiagram",
		  "width": 400,
		  "height": 320,
		  "topTape": {
		    "grid": {
		      "show": true,
		      "strokeWidth": 2
		    },
		    "fills": [
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 6,
		          "startUnit": 0
		        },
		        "label": null,
		        "style": {
		          "fill": "#ed5fa6",
		          "kind": "solid",
		          "fillOpacity": 0.3
		        }
		      }
		    ],
		    "label": "Teeth per larger gear",
		    "extent": {
		      "by": "units",
		      "endUnit": 6,
		      "startUnit": 0
		    },
		    "unitsTotal": 6,
		    "roundedCaps": false,
		    "defaultStroke": "#000000",
		    "defaultStrokeWidth": 2
		  },
		  "brackets": [
		    {
		      "span": {
		        "by": "units",
		        "endUnit": 6,
		        "startUnit": 0
		      },
		      "tape": "top",
		      "style": {
		        "kind": "curly",
		        "stroke": null,
		        "strokeWidth": null
		      },
		      "labelTop": "Teeth per larger gear",
		      "labelBottom": null
		    },
		    {
		      "span": {
		        "by": "units",
		        "endUnit": 1,
		        "startUnit": 0
		      },
		      "tape": "bottom",
		      "style": {
		        "kind": "curly",
		        "stroke": null,
		        "strokeWidth": null
		      },
		      "labelTop": null,
		      "labelBottom": "Teeth per smaller gear"
		    }
		  ],
		  "bottomTape": {
		    "grid": {
		      "show": true,
		      "strokeWidth": 2
		    },
		    "fills": [
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 1,
		          "startUnit": 0
		        },
		        "label": null,
		        "style": {
		          "fill": "#63d9ea",
		          "kind": "solid",
		          "fillOpacity": 0.3
		        }
		      }
		    ],
		    "label": "Teeth per smaller gear",
		    "extent": {
		      "by": "units",
		      "endUnit": 1,
		      "startUnit": 0
		    },
		    "unitsTotal": 1,
		    "roundedCaps": false,
		    "defaultStroke": "#000000",
		    "defaultStrokeWidth": 2
		  },
		  "referenceUnitsTotal": 6
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for tapeDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

	// Extracted from question: x7e160d7a5ea40bc1
	// Question: Complete a table using a ratio from a tape diagram
	// Widget key: image_1
	test("tape-diagram - [x7e160d7a5ea40bc1] Complete a table using a ratio from a tape diagram", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "type": "tapeDiagram",
		  "width": 400,
		  "height": 320,
		  "topTape": {
		    "grid": {
		      "show": true,
		      "strokeWidth": 1
		    },
		    "fills": [],
		    "label": "Flies",
		    "extent": {
		      "by": "units",
		      "endUnit": 3,
		      "startUnit": 0
		    },
		    "unitsTotal": 3,
		    "roundedCaps": false,
		    "defaultStroke": "#000000",
		    "defaultStrokeWidth": 1.5
		  },
		  "brackets": [
		    {
		      "span": {
		        "by": "percent",
		        "endPct": 100,
		        "startPct": 0
		      },
		      "tape": "top",
		      "style": {
		        "kind": "curly",
		        "stroke": null,
		        "strokeWidth": null
		      },
		      "labelTop": "Flies",
		      "labelBottom": " "
		    },
		    {
		      "span": {
		        "by": "percent",
		        "endPct": 100,
		        "startPct": 0
		      },
		      "tape": "bottom",
		      "style": {
		        "kind": "curly",
		        "stroke": null,
		        "strokeWidth": null
		      },
		      "labelTop": " ",
		      "labelBottom": "Mosquitoes"
		    }
		  ],
		  "bottomTape": {
		    "grid": {
		      "show": true,
		      "strokeWidth": 1
		    },
		    "fills": [],
		    "label": "Mosquitoes",
		    "extent": {
		      "by": "units",
		      "endUnit": 7,
		      "startUnit": 0
		    },
		    "unitsTotal": 7,
		    "roundedCaps": false,
		    "defaultStroke": "#000000",
		    "defaultStrokeWidth": 1.5
		  },
		  "referenceUnitsTotal": 7
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for tapeDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

	// Extracted from question: xad341496a795b8e1
	// Question: Find text area from a tape-diagram ratio
	// Widget key: image_1
	test("tape-diagram - [xad341496a795b8e1] Find text area from a tape-diagram ratio", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "type": "tapeDiagram",
		  "width": 400,
		  "height": 320,
		  "topTape": {
		    "grid": {
		      "show": true,
		      "strokeWidth": 1
		    },
		    "fills": [],
		    "label": "Text area",
		    "extent": {
		      "by": "units",
		      "endUnit": 3,
		      "startUnit": 0
		    },
		    "unitsTotal": 3,
		    "roundedCaps": false,
		    "defaultStroke": "#000000",
		    "defaultStrokeWidth": 1.5
		  },
		  "brackets": [
		    {
		      "span": {
		        "by": "units",
		        "endUnit": 3,
		        "startUnit": 0
		      },
		      "tape": "top",
		      "style": {
		        "kind": "curly",
		        "stroke": "#000000",
		        "strokeWidth": 1.5
		      },
		      "labelTop": "Text area",
		      "labelBottom": " "
		    },
		    {
		      "span": {
		        "by": "units",
		        "endUnit": 2,
		        "startUnit": 0
		      },
		      "tape": "bottom",
		      "style": {
		        "kind": "curly",
		        "stroke": "#000000",
		        "strokeWidth": 1.5
		      },
		      "labelTop": " ",
		      "labelBottom": "Illustration area"
		    }
		  ],
		  "bottomTape": {
		    "grid": {
		      "show": true,
		      "strokeWidth": 1
		    },
		    "fills": [],
		    "label": "Illustration area",
		    "extent": {
		      "by": "units",
		      "endUnit": 2,
		      "startUnit": 0
		    },
		    "unitsTotal": 2,
		    "roundedCaps": false,
		    "defaultStroke": "#000000",
		    "defaultStrokeWidth": 1.5
		  },
		  "referenceUnitsTotal": 3
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for tapeDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

	// Extracted from question: x24829dc37c9e42af
	// Question: Find the number of brown notebooks from a tape-diagram ratio
	// Widget key: image_1
	test("tape-diagram - [x24829dc37c9e42af] Find the number of brown notebooks from a tape-diagram ratio", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "type": "tapeDiagram",
		  "width": 360,
		  "height": 300,
		  "topTape": {
		    "grid": {
		      "show": true,
		      "strokeWidth": 2
		    },
		    "fills": [
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 5,
		          "startUnit": 0
		        },
		        "label": null,
		        "style": {
		          "fill": "#a75a05",
		          "kind": "solid",
		          "fillOpacity": 0.3
		        }
		      }
		    ],
		    "label": "Brown notebooks",
		    "extent": null,
		    "unitsTotal": 5,
		    "roundedCaps": false,
		    "defaultStroke": "#000000",
		    "defaultStrokeWidth": 1.5
		  },
		  "brackets": [
		    {
		      "span": {
		        "by": "percent",
		        "endPct": 100,
		        "startPct": 0
		      },
		      "tape": "top",
		      "style": {
		        "kind": "curly",
		        "stroke": "#000000",
		        "strokeWidth": 2
		      },
		      "labelTop": "Brown notebooks",
		      "labelBottom": " "
		    },
		    {
		      "span": {
		        "by": "percent",
		        "endPct": 100,
		        "startPct": 0
		      },
		      "tape": "bottom",
		      "style": {
		        "kind": "curly",
		        "stroke": "#000000",
		        "strokeWidth": 2
		      },
		      "labelTop": " ",
		      "labelBottom": "Red notebooks"
		    }
		  ],
		  "bottomTape": {
		    "grid": {
		      "show": true,
		      "strokeWidth": 2
		    },
		    "fills": [
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 3,
		          "startUnit": 0
		        },
		        "label": null,
		        "style": {
		          "fill": "#f9685d",
		          "kind": "solid",
		          "fillOpacity": 0.3
		        }
		      }
		    ],
		    "label": "Red notebooks",
		    "extent": {
		      "by": "units",
		      "endUnit": 3,
		      "startUnit": 0
		    },
		    "unitsTotal": 3,
		    "roundedCaps": false,
		    "defaultStroke": "#000000",
		    "defaultStrokeWidth": 1.5
		  },
		  "referenceUnitsTotal": 5
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for tapeDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

	// Extracted from question: x9400830e7c702aaf
	// Question: Complete a ratio table for kazoos and whistles
	// Widget key: image_1
	test("tape-diagram - [x9400830e7c702aaf] Complete a ratio table for kazoos and whistles", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "type": "tapeDiagram",
		  "width": 400,
		  "height": 320,
		  "topTape": {
		    "grid": {
		      "show": true,
		      "strokeWidth": 1
		    },
		    "fills": [],
		    "label": "Kazoos",
		    "extent": {
		      "by": "units",
		      "endUnit": 3,
		      "startUnit": 0
		    },
		    "unitsTotal": 3,
		    "roundedCaps": false,
		    "defaultStroke": "#000000",
		    "defaultStrokeWidth": 1.5
		  },
		  "brackets": [
		    {
		      "span": {
		        "by": "units",
		        "endUnit": 3,
		        "startUnit": 0
		      },
		      "tape": "top",
		      "style": {
		        "kind": "curly",
		        "stroke": null,
		        "strokeWidth": null
		      },
		      "labelTop": "Kazoos",
		      "labelBottom": " "
		    },
		    {
		      "span": {
		        "by": "units",
		        "endUnit": 5,
		        "startUnit": 0
		      },
		      "tape": "bottom",
		      "style": {
		        "kind": "curly",
		        "stroke": null,
		        "strokeWidth": null
		      },
		      "labelTop": " ",
		      "labelBottom": "Whistles"
		    }
		  ],
		  "bottomTape": {
		    "grid": {
		      "show": true,
		      "strokeWidth": 1
		    },
		    "fills": [],
		    "label": "Whistles",
		    "extent": {
		      "by": "units",
		      "endUnit": 5,
		      "startUnit": 0
		    },
		    "unitsTotal": 5,
		    "roundedCaps": false,
		    "defaultStroke": "#000000",
		    "defaultStrokeWidth": 1.5
		  },
		  "referenceUnitsTotal": 5
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for tapeDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

	// Extracted from question: x4f09c956fbf92148
	// Question: Complete a ratio table from a tape diagram
	// Widget key: image_1
	test("tape-diagram - [x4f09c956fbf92148] Complete a ratio table from a tape diagram", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "type": "tapeDiagram",
		  "width": 400,
		  "height": 320,
		  "topTape": {
		    "grid": {
		      "show": true,
		      "strokeWidth": 1
		    },
		    "fills": [
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 5,
		          "startUnit": 0
		        },
		        "label": null,
		        "style": {
		          "fill": "#aa87ff",
		          "kind": "solid",
		          "fillOpacity": 0.3
		        }
		      }
		    ],
		    "label": "Ducklings",
		    "extent": {
		      "by": "units",
		      "endUnit": 5,
		      "startUnit": 0
		    },
		    "unitsTotal": 5,
		    "roundedCaps": false,
		    "defaultStroke": "#000000",
		    "defaultStrokeWidth": 1.5
		  },
		  "brackets": [
		    {
		      "span": {
		        "by": "units",
		        "endUnit": 5,
		        "startUnit": 0
		      },
		      "tape": "top",
		      "style": {
		        "kind": "curly",
		        "stroke": null,
		        "strokeWidth": null
		      },
		      "labelTop": "Ducklings",
		      "labelBottom": " "
		    },
		    {
		      "span": {
		        "by": "units",
		        "endUnit": 1,
		        "startUnit": 0
		      },
		      "tape": "bottom",
		      "style": {
		        "kind": "curly",
		        "stroke": null,
		        "strokeWidth": null
		      },
		      "labelTop": " ",
		      "labelBottom": "Adult ducks"
		    }
		  ],
		  "bottomTape": {
		    "grid": {
		      "show": false,
		      "strokeWidth": null
		    },
		    "fills": [
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 1,
		          "startUnit": 0
		        },
		        "label": null,
		        "style": {
		          "fill": "#63d9ea",
		          "kind": "solid",
		          "fillOpacity": 0.3
		        }
		      }
		    ],
		    "label": "Adult ducks",
		    "extent": {
		      "by": "units",
		      "endUnit": 1,
		      "startUnit": 0
		    },
		    "unitsTotal": 1,
		    "roundedCaps": false,
		    "defaultStroke": "#000000",
		    "defaultStrokeWidth": 1.5
		  },
		  "referenceUnitsTotal": 5
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for tapeDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

	// Extracted from question: x35a2d75b63b87f91
	// Question: Complete a ratio table from a tape diagram
	// Widget key: image_1
	test("tape-diagram - [x35a2d75b63b87f91] Complete a ratio table from a tape diagram", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "type": "tapeDiagram",
		  "width": 320,
		  "height": 320,
		  "topTape": {
		    "grid": {
		      "show": true,
		      "strokeWidth": 1
		    },
		    "fills": [],
		    "label": "Solid balloons",
		    "extent": {
		      "by": "units",
		      "endUnit": 4,
		      "startUnit": 0
		    },
		    "unitsTotal": 4,
		    "roundedCaps": false,
		    "defaultStroke": "#000000",
		    "defaultStrokeWidth": 1.5
		  },
		  "brackets": [
		    {
		      "span": {
		        "by": "units",
		        "endUnit": 4,
		        "startUnit": 0
		      },
		      "tape": "top",
		      "style": {
		        "kind": "curly",
		        "stroke": null,
		        "strokeWidth": null
		      },
		      "labelTop": "Solid balloons",
		      "labelBottom": null
		    },
		    {
		      "span": {
		        "by": "units",
		        "endUnit": 3,
		        "startUnit": 0
		      },
		      "tape": "bottom",
		      "style": {
		        "kind": "curly",
		        "stroke": null,
		        "strokeWidth": null
		      },
		      "labelTop": null,
		      "labelBottom": "Striped balloons"
		    }
		  ],
		  "bottomTape": {
		    "grid": {
		      "show": true,
		      "strokeWidth": 1
		    },
		    "fills": [],
		    "label": "Striped balloons",
		    "extent": {
		      "by": "units",
		      "endUnit": 3,
		      "startUnit": 0
		    },
		    "unitsTotal": 3,
		    "roundedCaps": false,
		    "defaultStroke": "#000000",
		    "defaultStrokeWidth": 1.5
		  },
		  "referenceUnitsTotal": 4
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for tapeDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

	// Extracted from question: x06344eab12fe4d26
	// Question: Complete a ratio table for donut topping
	// Widget key: image_1
	test("tape-diagram - [x06344eab12fe4d26] Complete a ratio table for donut topping", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "type": "tapeDiagram",
		  "width": 320,
		  "height": 320,
		  "topTape": {
		    "grid": {
		      "show": true,
		      "strokeWidth": 1
		    },
		    "fills": [
		      {
		        "span": {
		          "by": "percent",
		          "endPct": 100,
		          "startPct": 0
		        },
		        "label": null,
		        "style": {
		          "fill": "#aa87ff",
		          "kind": "solid",
		          "fillOpacity": 0.3
		        }
		      }
		    ],
		    "label": "Sugar",
		    "extent": {
		      "by": "units",
		      "endUnit": 3,
		      "startUnit": 0
		    },
		    "unitsTotal": 3,
		    "roundedCaps": false,
		    "defaultStroke": "#000000",
		    "defaultStrokeWidth": 1.5
		  },
		  "brackets": [
		    {
		      "span": {
		        "by": "percent",
		        "endPct": 100,
		        "startPct": 0
		      },
		      "tape": "top",
		      "style": {
		        "kind": "curly",
		        "stroke": null,
		        "strokeWidth": null
		      },
		      "labelTop": "Sugar",
		      "labelBottom": " "
		    },
		    {
		      "span": {
		        "by": "percent",
		        "endPct": 100,
		        "startPct": 0
		      },
		      "tape": "bottom",
		      "style": {
		        "kind": "curly",
		        "stroke": null,
		        "strokeWidth": null
		      },
		      "labelTop": " ",
		      "labelBottom": "Cinnamon"
		    }
		  ],
		  "bottomTape": {
		    "grid": {
		      "show": true,
		      "strokeWidth": 1
		    },
		    "fills": [
		      {
		        "span": {
		          "by": "percent",
		          "endPct": 100,
		          "startPct": 0
		        },
		        "label": null,
		        "style": {
		          "fill": "#63d9ea",
		          "kind": "solid",
		          "fillOpacity": 0.3
		        }
		      }
		    ],
		    "label": "Cinnamon",
		    "extent": {
		      "by": "units",
		      "endUnit": 2,
		      "startUnit": 0
		    },
		    "unitsTotal": 2,
		    "roundedCaps": false,
		    "defaultStroke": "#000000",
		    "defaultStrokeWidth": 1.5
		  },
		  "referenceUnitsTotal": 3
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for tapeDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

	// Extracted from question: x21db30c0bda834b0
	// Question: Complete a ratio table from a tape diagram
	// Widget key: image_1
	test("tape-diagram - [x21db30c0bda834b0] Complete a ratio table from a tape diagram", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "type": "tapeDiagram",
		  "width": 320,
		  "height": 320,
		  "topTape": {
		    "grid": {
		      "show": true,
		      "strokeWidth": 1
		    },
		    "fills": [],
		    "label": "Oil",
		    "extent": {
		      "by": "units",
		      "endUnit": 2,
		      "startUnit": 0
		    },
		    "unitsTotal": 2,
		    "roundedCaps": false,
		    "defaultStroke": "#000000",
		    "defaultStrokeWidth": 1.5
		  },
		  "brackets": [
		    {
		      "span": {
		        "by": "units",
		        "endUnit": 2,
		        "startUnit": 0
		      },
		      "tape": "top",
		      "style": {
		        "kind": "curly",
		        "stroke": null,
		        "strokeWidth": null
		      },
		      "labelTop": "Oil",
		      "labelBottom": "Oil"
		    },
		    {
		      "span": {
		        "by": "units",
		        "endUnit": 1,
		        "startUnit": 0
		      },
		      "tape": "bottom",
		      "style": {
		        "kind": "curly",
		        "stroke": null,
		        "strokeWidth": null
		      },
		      "labelTop": "Vinegar",
		      "labelBottom": "Vinegar"
		    }
		  ],
		  "bottomTape": {
		    "grid": {
		      "show": false,
		      "strokeWidth": 1
		    },
		    "fills": [],
		    "label": "Vinegar",
		    "extent": {
		      "by": "units",
		      "endUnit": 1,
		      "startUnit": 0
		    },
		    "unitsTotal": 1,
		    "roundedCaps": false,
		    "defaultStroke": "#000000",
		    "defaultStrokeWidth": 1.5
		  },
		  "referenceUnitsTotal": 2
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for tapeDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

	// Extracted from question: x71f548049a4e9f47
	// Question: Ratio of grandparents to cousins
	// Widget key: image_1
	test("tape-diagram - [x71f548049a4e9f47] Ratio of grandparents to cousins", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "type": "tapeDiagram",
		  "width": 400,
		  "height": 320,
		  "topTape": {
		    "grid": {
		      "show": true,
		      "strokeWidth": 1.5
		    },
		    "fills": [],
		    "label": "Grandparents",
		    "extent": {
		      "by": "units",
		      "endUnit": 4,
		      "startUnit": 0
		    },
		    "unitsTotal": 4,
		    "roundedCaps": false,
		    "defaultStroke": "#000000",
		    "defaultStrokeWidth": 1.5
		  },
		  "brackets": [
		    {
		      "span": {
		        "by": "units",
		        "endUnit": 4,
		        "startUnit": 0
		      },
		      "tape": "top",
		      "style": {
		        "kind": "curly",
		        "stroke": null,
		        "strokeWidth": null
		      },
		      "labelTop": "Grandparents",
		      "labelBottom": " "
		    },
		    {
		      "span": {
		        "by": "units",
		        "endUnit": 6,
		        "startUnit": 0
		      },
		      "tape": "bottom",
		      "style": {
		        "kind": "curly",
		        "stroke": null,
		        "strokeWidth": null
		      },
		      "labelTop": " ",
		      "labelBottom": "Cousins"
		    }
		  ],
		  "bottomTape": {
		    "grid": {
		      "show": true,
		      "strokeWidth": 1.5
		    },
		    "fills": [],
		    "label": "Cousins",
		    "extent": {
		      "by": "units",
		      "endUnit": 6,
		      "startUnit": 0
		    },
		    "unitsTotal": 6,
		    "roundedCaps": false,
		    "defaultStroke": "#000000",
		    "defaultStrokeWidth": 1.5
		  },
		  "referenceUnitsTotal": 6
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for tapeDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

	// Extracted from question: xcd634c9bcf28feae
	// Question: Ratio of plantains to grams of spices
	// Widget key: image_1
	test("tape-diagram - [xcd634c9bcf28feae] Ratio of plantains to grams of spices", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "type": "tapeDiagram",
		  "width": 400,
		  "height": 320,
		  "topTape": {
		    "grid": {
		      "show": true,
		      "strokeWidth": 2
		    },
		    "fills": [
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 4,
		          "startUnit": 0
		        },
		        "label": null,
		        "style": {
		          "fill": "#63d9ea",
		          "kind": "solid",
		          "fillOpacity": 0.3
		        }
		      }
		    ],
		    "label": "Plantains",
		    "extent": {
		      "by": "units",
		      "endUnit": 4,
		      "startUnit": 0
		    },
		    "unitsTotal": 4,
		    "roundedCaps": false,
		    "defaultStroke": "#000000",
		    "defaultStrokeWidth": 2
		  },
		  "brackets": [
		    {
		      "span": {
		        "by": "percent",
		        "endPct": 100,
		        "startPct": 0
		      },
		      "tape": "top",
		      "style": {
		        "kind": "curly",
		        "stroke": null,
		        "strokeWidth": null
		      },
		      "labelTop": "Plantains",
		      "labelBottom": "Plantains"
		    },
		    {
		      "span": {
		        "by": "percent",
		        "endPct": 100,
		        "startPct": 0
		      },
		      "tape": "bottom",
		      "style": {
		        "kind": "curly",
		        "stroke": null,
		        "strokeWidth": null
		      },
		      "labelTop": "Spices, grams",
		      "labelBottom": "Spices, grams"
		    }
		  ],
		  "bottomTape": {
		    "grid": {
		      "show": true,
		      "strokeWidth": 2
		    },
		    "fills": [
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 12,
		          "startUnit": 0
		        },
		        "label": null,
		        "style": {
		          "fill": "#f9685d",
		          "kind": "solid",
		          "fillOpacity": 0.3
		        }
		      }
		    ],
		    "label": "Spices, grams",
		    "extent": {
		      "by": "units",
		      "endUnit": 12,
		      "startUnit": 0
		    },
		    "unitsTotal": 12,
		    "roundedCaps": false,
		    "defaultStroke": "#000000",
		    "defaultStrokeWidth": 2
		  },
		  "referenceUnitsTotal": 12
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for tapeDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

	// Extracted from question: x7557ddfaf0f7cd2c
	// Question: Blue-to-total paint ratio from a tape diagram
	// Widget key: image_1
	test("tape-diagram - [x7557ddfaf0f7cd2c] Blue-to-total paint ratio from a tape diagram", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "type": "tapeDiagram",
		  "width": 400,
		  "height": 320,
		  "topTape": {
		    "grid": {
		      "show": true,
		      "strokeWidth": 2
		    },
		    "fills": [
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 10,
		          "startUnit": 0
		        },
		        "label": null,
		        "style": {
		          "fill": "#63d9ea",
		          "kind": "solid",
		          "fillOpacity": 0.3
		        }
		      }
		    ],
		    "label": "Blue volume",
		    "extent": {
		      "by": "units",
		      "endUnit": 10,
		      "startUnit": 0
		    },
		    "unitsTotal": 10,
		    "roundedCaps": false,
		    "defaultStroke": "#000000",
		    "defaultStrokeWidth": 2
		  },
		  "brackets": [
		    {
		      "span": {
		        "by": "units",
		        "endUnit": 10,
		        "startUnit": 0
		      },
		      "tape": "top",
		      "style": {
		        "kind": "curly",
		        "stroke": null,
		        "strokeWidth": null
		      },
		      "labelTop": "Blue volume",
		      "labelBottom": "Total volume"
		    },
		    {
		      "span": {
		        "by": "units",
		        "endUnit": 6,
		        "startUnit": 0
		      },
		      "tape": "bottom",
		      "style": {
		        "kind": "curly",
		        "stroke": null,
		        "strokeWidth": null
		      },
		      "labelTop": "Red volume",
		      "labelBottom": "Red volume"
		    }
		  ],
		  "bottomTape": {
		    "grid": {
		      "show": true,
		      "strokeWidth": 2
		    },
		    "fills": [
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 6,
		          "startUnit": 0
		        },
		        "label": null,
		        "style": {
		          "fill": "#f9685d",
		          "kind": "solid",
		          "fillOpacity": 0.3
		        }
		      }
		    ],
		    "label": "Red volume",
		    "extent": {
		      "by": "units",
		      "endUnit": 6,
		      "startUnit": 0
		    },
		    "unitsTotal": 10,
		    "roundedCaps": false,
		    "defaultStroke": "#000000",
		    "defaultStrokeWidth": 2
		  },
		  "referenceUnitsTotal": 10
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for tapeDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

	// Extracted from question: x3f83f4362194af38
	// Question: Ratio of days biking to walking
	// Widget key: image_1
	test("tape-diagram - [x3f83f4362194af38] Ratio of days biking to walking", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "type": "tapeDiagram",
		  "width": 320,
		  "height": 320,
		  "topTape": {
		    "grid": {
		      "show": true,
		      "strokeWidth": 2
		    },
		    "fills": [
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 8,
		          "startUnit": 0
		        },
		        "label": null,
		        "style": {
		          "fill": "#63d9ea",
		          "kind": "solid",
		          "fillOpacity": 0.3
		        }
		      }
		    ],
		    "label": "Days Zayn bikes",
		    "extent": {
		      "by": "units",
		      "endUnit": 8,
		      "startUnit": 0
		    },
		    "unitsTotal": 8,
		    "roundedCaps": false,
		    "defaultStroke": "#000000",
		    "defaultStrokeWidth": 2
		  },
		  "brackets": [
		    {
		      "span": {
		        "by": "units",
		        "endUnit": 8,
		        "startUnit": 0
		      },
		      "tape": "top",
		      "style": {
		        "kind": "curly",
		        "stroke": "#000000",
		        "strokeWidth": 2
		      },
		      "labelTop": "Days Zayn bikes",
		      "labelBottom": null
		    },
		    {
		      "span": {
		        "by": "units",
		        "endUnit": 6,
		        "startUnit": 0
		      },
		      "tape": "bottom",
		      "style": {
		        "kind": "curly",
		        "stroke": "#000000",
		        "strokeWidth": 2
		      },
		      "labelTop": null,
		      "labelBottom": "Days Zayn walks"
		    }
		  ],
		  "bottomTape": {
		    "grid": {
		      "show": true,
		      "strokeWidth": 2
		    },
		    "fills": [
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 6,
		          "startUnit": 0
		        },
		        "label": null,
		        "style": {
		          "fill": "#f9685d",
		          "kind": "solid",
		          "fillOpacity": 0.3
		        }
		      }
		    ],
		    "label": "Days Zayn walks",
		    "extent": {
		      "by": "units",
		      "endUnit": 6,
		      "startUnit": 0
		    },
		    "unitsTotal": 6,
		    "roundedCaps": false,
		    "defaultStroke": "#000000",
		    "defaultStrokeWidth": 2
		  },
		  "referenceUnitsTotal": 8
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for tapeDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

	// Extracted from question: x46af4842400e7795
	// Question: Ratio of puzzles started to total puzzles
	// Widget key: image_1
	test("tape-diagram - [x46af4842400e7795] Ratio of puzzles started to total puzzles", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "type": "tapeDiagram",
		  "width": 400,
		  "height": 320,
		  "topTape": {
		    "grid": {
		      "show": true,
		      "strokeWidth": 1.5
		    },
		    "fills": [
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 6,
		          "startUnit": 0
		        },
		        "label": null,
		        "style": {
		          "fill": "#63d9ea",
		          "kind": "solid",
		          "fillOpacity": 0.3
		        }
		      }
		    ],
		    "label": "Puzzles started",
		    "extent": {
		      "by": "units",
		      "endUnit": 6,
		      "startUnit": 0
		    },
		    "unitsTotal": 6,
		    "roundedCaps": false,
		    "defaultStroke": "#000000",
		    "defaultStrokeWidth": 1.5
		  },
		  "brackets": [
		    {
		      "span": {
		        "by": "units",
		        "endUnit": 6,
		        "startUnit": 0
		      },
		      "tape": "top",
		      "style": {
		        "kind": "curly",
		        "stroke": "#000000",
		        "strokeWidth": 2
		      },
		      "labelTop": "Puzzles started",
		      "labelBottom": " "
		    },
		    {
		      "span": {
		        "by": "units",
		        "endUnit": 9,
		        "startUnit": 0
		      },
		      "tape": "bottom",
		      "style": {
		        "kind": "curly",
		        "stroke": "#000000",
		        "strokeWidth": 2
		      },
		      "labelTop": " ",
		      "labelBottom": "Puzzles not started"
		    }
		  ],
		  "bottomTape": {
		    "grid": {
		      "show": true,
		      "strokeWidth": 1.5
		    },
		    "fills": [
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 9,
		          "startUnit": 0
		        },
		        "label": null,
		        "style": {
		          "fill": "#f9685d",
		          "kind": "solid",
		          "fillOpacity": 0.3
		        }
		      }
		    ],
		    "label": "Puzzles not started",
		    "extent": {
		      "by": "units",
		      "endUnit": 9,
		      "startUnit": 0
		    },
		    "unitsTotal": 9,
		    "roundedCaps": false,
		    "defaultStroke": "#000000",
		    "defaultStrokeWidth": 1.5
		  },
		  "referenceUnitsTotal": 9
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for tapeDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

	// Extracted from question: xd3c78bc95db4eb64
	// Question: Ratio of fish to total pets from a tape diagram
	// Widget key: image_1
	test("tape-diagram - [xd3c78bc95db4eb64] Ratio of fish to total pets from a tape diagram", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "type": "tapeDiagram",
		  "width": 400,
		  "height": 320,
		  "topTape": {
		    "grid": {
		      "show": true,
		      "strokeWidth": 2
		    },
		    "fills": [
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 3,
		          "startUnit": 0
		        },
		        "label": null,
		        "style": {
		          "fill": "#63d9ea",
		          "kind": "solid",
		          "fillOpacity": 0.3
		        }
		      }
		    ],
		    "label": null,
		    "extent": {
		      "by": "units",
		      "endUnit": 3,
		      "startUnit": 0
		    },
		    "unitsTotal": 3,
		    "roundedCaps": false,
		    "defaultStroke": "#000000",
		    "defaultStrokeWidth": 1.5
		  },
		  "brackets": [
		    {
		      "span": {
		        "by": "units",
		        "endUnit": 3,
		        "startUnit": 0
		      },
		      "tape": "top",
		      "style": {
		        "kind": "curly",
		        "stroke": null,
		        "strokeWidth": null
		      },
		      "labelTop": "Cats",
		      "labelBottom": null
		    },
		    {
		      "span": {
		        "by": "units",
		        "endUnit": 9,
		        "startUnit": 0
		      },
		      "tape": "bottom",
		      "style": {
		        "kind": "curly",
		        "stroke": null,
		        "strokeWidth": null
		      },
		      "labelTop": null,
		      "labelBottom": "Fish"
		    }
		  ],
		  "bottomTape": {
		    "grid": {
		      "show": true,
		      "strokeWidth": 2
		    },
		    "fills": [
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 9,
		          "startUnit": 0
		        },
		        "label": null,
		        "style": {
		          "fill": "#f9685d",
		          "kind": "solid",
		          "fillOpacity": 0.3
		        }
		      }
		    ],
		    "label": null,
		    "extent": null,
		    "unitsTotal": 9,
		    "roundedCaps": false,
		    "defaultStroke": "#000000",
		    "defaultStrokeWidth": 1.5
		  },
		  "referenceUnitsTotal": 9
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for tapeDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

	// Extracted from question: x3bd73035781ad0a3
	// Question: Find the value of f from a tape diagram
	// Widget key: image_1
	test("tape-diagram - [x3bd73035781ad0a3] Find the value of f from a tape diagram", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "type": "tapeDiagram",
		  "width": 400,
		  "height": 320,
		  "topTape": {
		    "grid": {
		      "show": false,
		      "strokeWidth": null
		    },
		    "fills": [
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 19,
		          "startUnit": 0
		        },
		        "label": {
		          "text": "19",
		          "placement": "inside"
		        },
		        "style": {
		          "fill": "#e6e6e6",
		          "kind": "solid",
		          "fillOpacity": 1
		        }
		      }
		    ],
		    "label": " ",
		    "extent": null,
		    "unitsTotal": 19,
		    "roundedCaps": false,
		    "defaultStroke": "#000000",
		    "defaultStrokeWidth": 1.5
		  },
		  "brackets": [],
		  "bottomTape": {
		    "grid": {
		      "show": false,
		      "strokeWidth": null
		    },
		    "fills": [
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 16,
		          "startUnit": 0
		        },
		        "label": {
		          "text": "16",
		          "placement": "inside"
		        },
		        "style": {
		          "fill": "#cfe8ff",
		          "kind": "solid",
		          "fillOpacity": 1
		        }
		      },
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 19,
		          "startUnit": 16
		        },
		        "label": {
		          "text": "f",
		          "placement": "inside"
		        },
		        "style": {
		          "fill": "#ffe6cc",
		          "kind": "solid",
		          "fillOpacity": 1
		        }
		      }
		    ],
		    "label": " ",
		    "extent": null,
		    "unitsTotal": 19,
		    "roundedCaps": false,
		    "defaultStroke": "#000000",
		    "defaultStrokeWidth": 1.5
		  },
		  "referenceUnitsTotal": 19
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for tapeDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

	// Extracted from question: x68a1546c1d94df40
	// Question: Solve for x from a tape diagram
	// Widget key: image_1
	test("tape-diagram - [x68a1546c1d94df40] Solve for x from a tape diagram", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "type": "tapeDiagram",
		  "width": 320,
		  "height": 320,
		  "topTape": {
		    "grid": {
		      "show": false,
		      "strokeWidth": null
		    },
		    "fills": [
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 15,
		          "startUnit": 0
		        },
		        "label": {
		          "text": "15",
		          "placement": "inside"
		        },
		        "style": {
		          "fill": "#a8d5ff",
		          "kind": "solid",
		          "fillOpacity": 0.7
		        }
		      },
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 23,
		          "startUnit": 15
		        },
		        "label": {
		          "text": "x",
		          "placement": "inside"
		        },
		        "style": {
		          "fill": "#ffd59e",
		          "kind": "solid",
		          "fillOpacity": 0.7
		        }
		      }
		    ],
		    "label": " ",
		    "extent": null,
		    "unitsTotal": 23,
		    "roundedCaps": false,
		    "defaultStroke": "#000000",
		    "defaultStrokeWidth": 2
		  },
		  "brackets": [],
		  "bottomTape": {
		    "grid": {
		      "show": false,
		      "strokeWidth": null
		    },
		    "fills": [
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 23,
		          "startUnit": 0
		        },
		        "label": {
		          "text": "23",
		          "placement": "inside"
		        },
		        "style": {
		          "fill": "#e6e6e6",
		          "kind": "solid",
		          "fillOpacity": 0.7
		        }
		      }
		    ],
		    "label": " ",
		    "extent": null,
		    "unitsTotal": 23,
		    "roundedCaps": false,
		    "defaultStroke": "#000000",
		    "defaultStrokeWidth": 2
		  },
		  "referenceUnitsTotal": null
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for tapeDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

	// Extracted from question: xe88fc3be71298a35
	// Question: Find q from a tape diagram equation
	// Widget key: image_1
	test("tape-diagram - [xe88fc3be71298a35] Find q from a tape diagram equation", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "type": "tapeDiagram",
		  "width": 400,
		  "height": 300,
		  "topTape": {
		    "grid": {
		      "show": false,
		      "strokeWidth": null
		    },
		    "fills": [
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 8,
		          "startUnit": 0
		        },
		        "label": {
		          "text": "8",
		          "placement": "inside"
		        },
		        "style": {
		          "kind": "outline",
		          "stroke": "#000000",
		          "strokeWidth": 2
		        }
		      },
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 12,
		          "startUnit": 8
		        },
		        "label": {
		          "text": "q",
		          "placement": "inside"
		        },
		        "style": {
		          "kind": "outline",
		          "stroke": "#000000",
		          "strokeWidth": 2
		        }
		      }
		    ],
		    "label": " ",
		    "extent": null,
		    "unitsTotal": 12,
		    "roundedCaps": false,
		    "defaultStroke": "#000000",
		    "defaultStrokeWidth": 2
		  },
		  "brackets": [],
		  "bottomTape": {
		    "grid": {
		      "show": false,
		      "strokeWidth": null
		    },
		    "fills": [
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 12,
		          "startUnit": 0
		        },
		        "label": {
		          "text": "12",
		          "placement": "inside"
		        },
		        "style": {
		          "kind": "outline",
		          "stroke": "#000000",
		          "strokeWidth": 2
		        }
		      }
		    ],
		    "label": " ",
		    "extent": null,
		    "unitsTotal": 12,
		    "roundedCaps": false,
		    "defaultStroke": "#000000",
		    "defaultStrokeWidth": 2
		  },
		  "referenceUnitsTotal": 12
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for tapeDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

	// Extracted from question: x5dc5fe9bdfc54ce4
	// Question: Find the value of h from a tape diagram
	// Widget key: image_1
	test("tape-diagram - [x5dc5fe9bdfc54ce4] Find the value of h from a tape diagram", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "type": "tapeDiagram",
		  "width": 400,
		  "height": 320,
		  "topTape": {
		    "grid": {
		      "show": false,
		      "strokeWidth": null
		    },
		    "fills": [
		      {
		        "span": {
		          "by": "percent",
		          "endPct": 38.095238095238095,
		          "startPct": 0
		        },
		        "label": {
		          "text": "h",
		          "placement": "inside"
		        },
		        "style": {
		          "kind": "hatch",
		          "color": "#000000",
		          "spacing": 4,
		          "angleDeg": 45,
		          "strokeWidth": 1
		        }
		      },
		      {
		        "span": {
		          "by": "percent",
		          "endPct": 100,
		          "startPct": 38.095238095238095
		        },
		        "label": {
		          "text": "26",
		          "placement": "inside"
		        },
		        "style": {
		          "fill": "#dddddd",
		          "kind": "solid",
		          "fillOpacity": 1
		        }
		      }
		    ],
		    "label": " ",
		    "extent": null,
		    "unitsTotal": 42,
		    "roundedCaps": false,
		    "defaultStroke": "#000000",
		    "defaultStrokeWidth": 1.5
		  },
		  "brackets": [],
		  "bottomTape": {
		    "grid": {
		      "show": false,
		      "strokeWidth": null
		    },
		    "fills": [
		      {
		        "span": {
		          "by": "percent",
		          "endPct": 100,
		          "startPct": 0
		        },
		        "label": {
		          "text": "42",
		          "placement": "inside"
		        },
		        "style": {
		          "fill": "#eeeeee",
		          "kind": "solid",
		          "fillOpacity": 1
		        }
		      }
		    ],
		    "label": " ",
		    "extent": null,
		    "unitsTotal": 42,
		    "roundedCaps": false,
		    "defaultStroke": "#000000",
		    "defaultStrokeWidth": 1.5
		  },
		  "referenceUnitsTotal": null
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for tapeDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

	// Extracted from question: xf94352c24b2386df
	// Question: Solve for k from a tape diagram
	// Widget key: image_1
	test("tape-diagram - [xf94352c24b2386df] Solve for k from a tape diagram", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "type": "tapeDiagram",
		  "width": 400,
		  "height": 320,
		  "topTape": {
		    "grid": {
		      "show": false,
		      "strokeWidth": null
		    },
		    "fills": [
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 17,
		          "startUnit": 0
		        },
		        "label": {
		          "text": "17",
		          "placement": "inside"
		        },
		        "style": {
		          "fill": "#f2f2f2",
		          "kind": "solid",
		          "fillOpacity": 1
		        }
		      }
		    ],
		    "label": " ",
		    "extent": null,
		    "unitsTotal": 17,
		    "roundedCaps": false,
		    "defaultStroke": "#000000",
		    "defaultStrokeWidth": 1.5
		  },
		  "brackets": [],
		  "bottomTape": {
		    "grid": {
		      "show": false,
		      "strokeWidth": null
		    },
		    "fills": [
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 4,
		          "startUnit": 0
		        },
		        "label": {
		          "text": "4",
		          "placement": "inside"
		        },
		        "style": {
		          "fill": "#add8e6",
		          "kind": "solid",
		          "fillOpacity": 1
		        }
		      },
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 17,
		          "startUnit": 4
		        },
		        "label": {
		          "text": "k",
		          "placement": "inside"
		        },
		        "style": {
		          "kind": "hatch",
		          "color": "#000000",
		          "spacing": null,
		          "angleDeg": 45,
		          "strokeWidth": 1.5
		        }
		      }
		    ],
		    "label": " ",
		    "extent": null,
		    "unitsTotal": 17,
		    "roundedCaps": false,
		    "defaultStroke": "#000000",
		    "defaultStrokeWidth": 1.5
		  },
		  "referenceUnitsTotal": null
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for tapeDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

	// Extracted from question: xe19d3516638a71be
	// Question: Find the value of y from a tape diagram
	// Widget key: image_1
	test("tape-diagram - [xe19d3516638a71be] Find the value of y from a tape diagram", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "type": "tapeDiagram",
		  "width": 400,
		  "height": 300,
		  "topTape": {
		    "grid": {
		      "show": true,
		      "strokeWidth": 2
		    },
		    "fills": [
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 1,
		          "startUnit": 0
		        },
		        "label": {
		          "text": "y",
		          "placement": "inside"
		        },
		        "style": {
		          "fill": "#ffffff",
		          "kind": "solid",
		          "fillOpacity": 0
		        }
		      },
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 2,
		          "startUnit": 1
		        },
		        "label": {
		          "text": "y",
		          "placement": "inside"
		        },
		        "style": {
		          "fill": "#ffffff",
		          "kind": "solid",
		          "fillOpacity": 0
		        }
		      },
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 3,
		          "startUnit": 2
		        },
		        "label": {
		          "text": "y",
		          "placement": "inside"
		        },
		        "style": {
		          "fill": "#ffffff",
		          "kind": "solid",
		          "fillOpacity": 0
		        }
		      }
		    ],
		    "label": null,
		    "extent": null,
		    "unitsTotal": 3,
		    "roundedCaps": false,
		    "defaultStroke": "#000000",
		    "defaultStrokeWidth": 2
		  },
		  "brackets": [],
		  "bottomTape": {
		    "grid": {
		      "show": false,
		      "strokeWidth": null
		    },
		    "fills": [
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 1,
		          "startUnit": 0
		        },
		        "label": {
		          "text": "24",
		          "placement": "inside"
		        },
		        "style": {
		          "fill": "#ffffff",
		          "kind": "solid",
		          "fillOpacity": 0
		        }
		      }
		    ],
		    "label": null,
		    "extent": null,
		    "unitsTotal": 1,
		    "roundedCaps": false,
		    "defaultStroke": "#000000",
		    "defaultStrokeWidth": 2
		  },
		  "referenceUnitsTotal": null
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for tapeDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

	// Extracted from question: x603d212624935e0d
	// Question: Solve for x using a tape diagram
	// Widget key: image_1
	test("tape-diagram - [x603d212624935e0d] Solve for x using a tape diagram", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "type": "tapeDiagram",
		  "width": 400,
		  "height": 320,
		  "topTape": {
		    "grid": {
		      "show": false,
		      "strokeWidth": null
		    },
		    "fills": [
		      {
		        "span": {
		          "by": "percent",
		          "endPct": 100,
		          "startPct": 0
		        },
		        "label": {
		          "text": "25",
		          "placement": "inside"
		        },
		        "style": {
		          "fill": "#e0e0e0",
		          "kind": "solid",
		          "fillOpacity": 1
		        }
		      }
		    ],
		    "label": " ",
		    "extent": {
		      "by": "percent",
		      "endPct": 100,
		      "startPct": 0
		    },
		    "unitsTotal": 100,
		    "roundedCaps": false,
		    "defaultStroke": "#000000",
		    "defaultStrokeWidth": 1.5
		  },
		  "brackets": [],
		  "bottomTape": {
		    "grid": {
		      "show": false,
		      "strokeWidth": null
		    },
		    "fills": [
		      {
		        "span": {
		          "by": "percent",
		          "endPct": 65,
		          "startPct": 0
		        },
		        "label": {
		          "text": "x",
		          "placement": "inside"
		        },
		        "style": {
		          "fill": "#cfe2f3",
		          "kind": "solid",
		          "fillOpacity": 1
		        }
		      },
		      {
		        "span": {
		          "by": "percent",
		          "endPct": 100,
		          "startPct": 65
		        },
		        "label": {
		          "text": "13",
		          "placement": "inside"
		        },
		        "style": {
		          "fill": "#ffe599",
		          "kind": "solid",
		          "fillOpacity": 1
		        }
		      }
		    ],
		    "label": " ",
		    "extent": {
		      "by": "percent",
		      "endPct": 100,
		      "startPct": 0
		    },
		    "unitsTotal": 100,
		    "roundedCaps": false,
		    "defaultStroke": "#000000",
		    "defaultStrokeWidth": 1.5
		  },
		  "referenceUnitsTotal": null
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for tapeDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

	// Extracted from question: xbc31c3b806bdfe76
	// Question: Find the value of d from a tape diagram
	// Widget key: image_1
	test("tape-diagram - [xbc31c3b806bdfe76] Find the value of d from a tape diagram", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "type": "tapeDiagram",
		  "width": 400,
		  "height": 320,
		  "topTape": {
		    "grid": {
		      "show": false,
		      "strokeWidth": null
		    },
		    "fills": [
		      {
		        "span": {
		          "by": "percent",
		          "endPct": 100,
		          "startPct": 0
		        },
		        "label": {
		          "text": "35 units",
		          "placement": "inside"
		        },
		        "style": {
		          "fill": "#FFFFFF",
		          "kind": "solid",
		          "fillOpacity": 0
		        }
		      }
		    ],
		    "label": null,
		    "extent": null,
		    "unitsTotal": 1,
		    "roundedCaps": false,
		    "defaultStroke": "#000000",
		    "defaultStrokeWidth": 2
		  },
		  "brackets": [],
		  "bottomTape": {
		    "grid": {
		      "show": true,
		      "strokeWidth": 2
		    },
		    "fills": [
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 1,
		          "startUnit": 0
		        },
		        "label": {
		          "text": "d units",
		          "placement": "inside"
		        },
		        "style": {
		          "fill": "#FFFFFF",
		          "kind": "solid",
		          "fillOpacity": 0
		        }
		      },
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 2,
		          "startUnit": 1
		        },
		        "label": {
		          "text": "d units",
		          "placement": "inside"
		        },
		        "style": {
		          "fill": "#FFFFFF",
		          "kind": "solid",
		          "fillOpacity": 0
		        }
		      },
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 3,
		          "startUnit": 2
		        },
		        "label": {
		          "text": "d units",
		          "placement": "inside"
		        },
		        "style": {
		          "fill": "#FFFFFF",
		          "kind": "solid",
		          "fillOpacity": 0
		        }
		      },
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 4,
		          "startUnit": 3
		        },
		        "label": {
		          "text": "d units",
		          "placement": "inside"
		        },
		        "style": {
		          "fill": "#FFFFFF",
		          "kind": "solid",
		          "fillOpacity": 0
		        }
		      },
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 5,
		          "startUnit": 4
		        },
		        "label": {
		          "text": "d units",
		          "placement": "inside"
		        },
		        "style": {
		          "fill": "#FFFFFF",
		          "kind": "solid",
		          "fillOpacity": 0
		        }
		      }
		    ],
		    "label": null,
		    "extent": null,
		    "unitsTotal": 5,
		    "roundedCaps": false,
		    "defaultStroke": "#000000",
		    "defaultStrokeWidth": 2
		  },
		  "referenceUnitsTotal": null
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for tapeDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

	// Extracted from question: xf63b6863f1b67cbd
	// Question: Find the value of p from a tape diagram
	// Widget key: image_1
	test("tape-diagram - [xf63b6863f1b67cbd] Find the value of p from a tape diagram", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "type": "tapeDiagram",
		  "width": 320,
		  "height": 300,
		  "topTape": {
		    "grid": {
		      "show": true,
		      "strokeWidth": 1
		    },
		    "fills": [],
		    "label": " ",
		    "extent": null,
		    "unitsTotal": 6,
		    "roundedCaps": false,
		    "defaultStroke": "#000000",
		    "defaultStrokeWidth": 1.5
		  },
		  "brackets": [
		    {
		      "span": {
		        "by": "units",
		        "endUnit": 1,
		        "startUnit": 0
		      },
		      "tape": "bottom",
		      "style": {
		        "kind": "straight",
		        "stroke": null,
		        "strokeWidth": null
		      },
		      "labelTop": "36",
		      "labelBottom": " "
		    }
		  ],
		  "bottomTape": {
		    "grid": {
		      "show": false,
		      "strokeWidth": null
		    },
		    "fills": [],
		    "label": " ",
		    "extent": null,
		    "unitsTotal": 1,
		    "roundedCaps": false,
		    "defaultStroke": "#000000",
		    "defaultStrokeWidth": 1.5
		  },
		  "referenceUnitsTotal": null
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for tapeDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

	// Extracted from question: x46e22289d7a730bc
	// Question: Solve for q from a tape diagram
	// Widget key: image_1
	test("tape-diagram - [x46e22289d7a730bc] Solve for q from a tape diagram", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "type": "tapeDiagram",
		  "width": 400,
		  "height": 300,
		  "topTape": {
		    "grid": {
		      "show": false,
		      "strokeWidth": null
		    },
		    "fills": [
		      {
		        "span": {
		          "by": "percent",
		          "endPct": 100,
		          "startPct": 0
		        },
		        "label": {
		          "text": "24 units",
		          "placement": "inside"
		        },
		        "style": {
		          "fill": "#ffffff",
		          "kind": "solid",
		          "fillOpacity": 0
		        }
		      }
		    ],
		    "label": "\n",
		    "extent": null,
		    "unitsTotal": 1,
		    "roundedCaps": false,
		    "defaultStroke": "#000000",
		    "defaultStrokeWidth": 2
		  },
		  "brackets": [],
		  "bottomTape": {
		    "grid": {
		      "show": true,
		      "strokeWidth": 2
		    },
		    "fills": [
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 1,
		          "startUnit": 0
		        },
		        "label": {
		          "text": "q",
		          "placement": "inside"
		        },
		        "style": {
		          "fill": "#ffffff",
		          "kind": "solid",
		          "fillOpacity": 0
		        }
		      },
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 2,
		          "startUnit": 1
		        },
		        "label": {
		          "text": "q",
		          "placement": "inside"
		        },
		        "style": {
		          "fill": "#ffffff",
		          "kind": "solid",
		          "fillOpacity": 0
		        }
		      },
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 3,
		          "startUnit": 2
		        },
		        "label": {
		          "text": "q",
		          "placement": "inside"
		        },
		        "style": {
		          "fill": "#ffffff",
		          "kind": "solid",
		          "fillOpacity": 0
		        }
		      },
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 4,
		          "startUnit": 3
		        },
		        "label": {
		          "text": "q",
		          "placement": "inside"
		        },
		        "style": {
		          "fill": "#ffffff",
		          "kind": "solid",
		          "fillOpacity": 0
		        }
		      },
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 5,
		          "startUnit": 4
		        },
		        "label": {
		          "text": "q",
		          "placement": "inside"
		        },
		        "style": {
		          "fill": "#ffffff",
		          "kind": "solid",
		          "fillOpacity": 0
		        }
		      },
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 6,
		          "startUnit": 5
		        },
		        "label": {
		          "text": "q",
		          "placement": "inside"
		        },
		        "style": {
		          "fill": "#ffffff",
		          "kind": "solid",
		          "fillOpacity": 0
		        }
		      },
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 7,
		          "startUnit": 6
		        },
		        "label": {
		          "text": "q",
		          "placement": "inside"
		        },
		        "style": {
		          "fill": "#ffffff",
		          "kind": "solid",
		          "fillOpacity": 0
		        }
		      },
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 8,
		          "startUnit": 7
		        },
		        "label": {
		          "text": "q",
		          "placement": "inside"
		        },
		        "style": {
		          "fill": "#ffffff",
		          "kind": "solid",
		          "fillOpacity": 0
		        }
		      }
		    ],
		    "label": "\n",
		    "extent": null,
		    "unitsTotal": 8,
		    "roundedCaps": false,
		    "defaultStroke": "#000000",
		    "defaultStrokeWidth": 2
		  },
		  "referenceUnitsTotal": null
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for tapeDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

	// Extracted from question: xfaf97eba50870110
	// Question: Find s from a tape diagram equation
	// Widget key: image_1
	test("tape-diagram - [xfaf97eba50870110] Find s from a tape diagram equation", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "type": "tapeDiagram",
		  "width": 400,
		  "height": 320,
		  "topTape": {
		    "grid": {
		      "show": true,
		      "strokeWidth": 1
		    },
		    "fills": [
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 1,
		          "startUnit": 0
		        },
		        "label": {
		          "text": "s",
		          "placement": "inside"
		        },
		        "style": {
		          "kind": "outline",
		          "stroke": "#000000",
		          "strokeWidth": 1
		        }
		      },
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 2,
		          "startUnit": 1
		        },
		        "label": {
		          "text": "s",
		          "placement": "inside"
		        },
		        "style": {
		          "kind": "outline",
		          "stroke": "#000000",
		          "strokeWidth": 1
		        }
		      },
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 3,
		          "startUnit": 2
		        },
		        "label": {
		          "text": "s",
		          "placement": "inside"
		        },
		        "style": {
		          "kind": "outline",
		          "stroke": "#000000",
		          "strokeWidth": 1
		        }
		      },
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 4,
		          "startUnit": 3
		        },
		        "label": {
		          "text": "s",
		          "placement": "inside"
		        },
		        "style": {
		          "kind": "outline",
		          "stroke": "#000000",
		          "strokeWidth": 1
		        }
		      }
		    ],
		    "label": "Top tape",
		    "extent": null,
		    "unitsTotal": 4,
		    "roundedCaps": false,
		    "defaultStroke": "#000000",
		    "defaultStrokeWidth": 1.5
		  },
		  "brackets": [
		    {
		      "span": {
		        "by": "percent",
		        "endPct": 100,
		        "startPct": 0
		      },
		      "tape": "bottom",
		      "style": {
		        "kind": "straight",
		        "stroke": null,
		        "strokeWidth": null
		      },
		      "labelTop": "20",
		      "labelBottom": "units"
		    }
		  ],
		  "bottomTape": {
		    "grid": {
		      "show": false,
		      "strokeWidth": null
		    },
		    "fills": [],
		    "label": "Bottom tape",
		    "extent": null,
		    "unitsTotal": 4,
		    "roundedCaps": false,
		    "defaultStroke": "#000000",
		    "defaultStrokeWidth": 1.5
		  },
		  "referenceUnitsTotal": null
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for tapeDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

	// Extracted from question: xd6ee94a6fb6705ef
	// Question: Solve for m using a tape diagram
	// Widget key: image_1
	test("tape-diagram - [xd6ee94a6fb6705ef] Solve for m using a tape diagram", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "type": "tapeDiagram",
		  "width": 320,
		  "height": 320,
		  "topTape": {
		    "grid": {
		      "show": false,
		      "strokeWidth": 1
		    },
		    "fills": [
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 1,
		          "startUnit": 0
		        },
		        "label": {
		          "text": "63",
		          "placement": "inside"
		        },
		        "style": {
		          "kind": "outline",
		          "stroke": "#000000",
		          "strokeWidth": 1.5
		        }
		      }
		    ],
		    "label": " ",
		    "extent": null,
		    "unitsTotal": 1,
		    "roundedCaps": false,
		    "defaultStroke": "#000000",
		    "defaultStrokeWidth": 1.5
		  },
		  "brackets": [],
		  "bottomTape": {
		    "grid": {
		      "show": false,
		      "strokeWidth": 1
		    },
		    "fills": [
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 1,
		          "startUnit": 0
		        },
		        "label": {
		          "text": "m",
		          "placement": "inside"
		        },
		        "style": {
		          "kind": "outline",
		          "stroke": "#000000",
		          "strokeWidth": 1.5
		        }
		      },
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 2,
		          "startUnit": 1
		        },
		        "label": {
		          "text": "m",
		          "placement": "inside"
		        },
		        "style": {
		          "kind": "outline",
		          "stroke": "#000000",
		          "strokeWidth": 1.5
		        }
		      },
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 3,
		          "startUnit": 2
		        },
		        "label": {
		          "text": "m",
		          "placement": "inside"
		        },
		        "style": {
		          "kind": "outline",
		          "stroke": "#000000",
		          "strokeWidth": 1.5
		        }
		      },
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 4,
		          "startUnit": 3
		        },
		        "label": {
		          "text": "m",
		          "placement": "inside"
		        },
		        "style": {
		          "kind": "outline",
		          "stroke": "#000000",
		          "strokeWidth": 1.5
		        }
		      },
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 5,
		          "startUnit": 4
		        },
		        "label": {
		          "text": "m",
		          "placement": "inside"
		        },
		        "style": {
		          "kind": "outline",
		          "stroke": "#000000",
		          "strokeWidth": 1.5
		        }
		      },
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 6,
		          "startUnit": 5
		        },
		        "label": {
		          "text": "m",
		          "placement": "inside"
		        },
		        "style": {
		          "kind": "outline",
		          "stroke": "#000000",
		          "strokeWidth": 1.5
		        }
		      },
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 7,
		          "startUnit": 6
		        },
		        "label": {
		          "text": "m",
		          "placement": "inside"
		        },
		        "style": {
		          "kind": "outline",
		          "stroke": "#000000",
		          "strokeWidth": 1.5
		        }
		      }
		    ],
		    "label": " ",
		    "extent": null,
		    "unitsTotal": 7,
		    "roundedCaps": false,
		    "defaultStroke": "#000000",
		    "defaultStrokeWidth": 1.5
		  },
		  "referenceUnitsTotal": null
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for tapeDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

	// Extracted from question: xb0c1ad2fcf557168
	// Question: Write an equation from a tape diagram
	// Widget key: image_1
	test("tape-diagram - [xb0c1ad2fcf557168] Write an equation from a tape diagram", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "type": "tapeDiagram",
		  "width": 400,
		  "height": 320,
		  "topTape": {
		    "grid": {
		      "show": true,
		      "strokeWidth": 1
		    },
		    "fills": [
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 1,
		          "startUnit": 0
		        },
		        "label": {
		          "text": "y",
		          "placement": "inside"
		        },
		        "style": {
		          "fill": "#ffffff",
		          "kind": "solid",
		          "fillOpacity": 0
		        }
		      },
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 2,
		          "startUnit": 1
		        },
		        "label": {
		          "text": "y",
		          "placement": "inside"
		        },
		        "style": {
		          "fill": "#ffffff",
		          "kind": "solid",
		          "fillOpacity": 0
		        }
		      }
		    ],
		    "label": " ",
		    "extent": null,
		    "unitsTotal": 2,
		    "roundedCaps": false,
		    "defaultStroke": "#000000",
		    "defaultStrokeWidth": 1.5
		  },
		  "brackets": [],
		  "bottomTape": {
		    "grid": {
		      "show": false,
		      "strokeWidth": null
		    },
		    "fills": [
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 1,
		          "startUnit": 0
		        },
		        "label": {
		          "text": "7",
		          "placement": "inside"
		        },
		        "style": {
		          "fill": "#ffffff",
		          "kind": "solid",
		          "fillOpacity": 0
		        }
		      }
		    ],
		    "label": " ",
		    "extent": null,
		    "unitsTotal": 1,
		    "roundedCaps": false,
		    "defaultStroke": "#000000",
		    "defaultStrokeWidth": 1.5
		  },
		  "referenceUnitsTotal": null
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for tapeDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

	// Extracted from question: xbaf90abe21a83789
	// Question: Write an equation from a tape diagram
	// Widget key: image_1
	test("tape-diagram - [xbaf90abe21a83789] Write an equation from a tape diagram", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "type": "tapeDiagram",
		  "width": 400,
		  "height": 300,
		  "topTape": {
		    "grid": {
		      "show": false,
		      "strokeWidth": null
		    },
		    "fills": [
		      {
		        "span": {
		          "by": "percent",
		          "endPct": 30,
		          "startPct": 0
		        },
		        "label": {
		          "text": "1/4",
		          "placement": "inside"
		        },
		        "style": {
		          "fill": "#cce5ff",
		          "kind": "solid",
		          "fillOpacity": 1
		        }
		      },
		      {
		        "span": {
		          "by": "percent",
		          "endPct": 100,
		          "startPct": 30
		        },
		        "label": {
		          "text": "m",
		          "placement": "inside"
		        },
		        "style": {
		          "kind": "hatch",
		          "color": "#000000",
		          "spacing": 4,
		          "angleDeg": 45,
		          "strokeWidth": 1
		        }
		      }
		    ],
		    "label": "Top",
		    "extent": null,
		    "unitsTotal": 10,
		    "roundedCaps": false,
		    "defaultStroke": "#000000",
		    "defaultStrokeWidth": 1.5
		  },
		  "brackets": [],
		  "bottomTape": {
		    "grid": {
		      "show": false,
		      "strokeWidth": null
		    },
		    "fills": [
		      {
		        "span": {
		          "by": "percent",
		          "endPct": 100,
		          "startPct": 0
		        },
		        "label": {
		          "text": "2/3",
		          "placement": "inside"
		        },
		        "style": {
		          "fill": "#ffd966",
		          "kind": "solid",
		          "fillOpacity": 1
		        }
		      }
		    ],
		    "label": "Bottom",
		    "extent": null,
		    "unitsTotal": 10,
		    "roundedCaps": false,
		    "defaultStroke": "#000000",
		    "defaultStrokeWidth": 1.5
		  },
		  "referenceUnitsTotal": null
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for tapeDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

	// Extracted from question: xecb69f289dd126b5
	// Question: Write an equation from a tape diagram and solve
	// Widget key: image_1
	test("tape-diagram - [xecb69f289dd126b5] Write an equation from a tape diagram and solve", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "type": "tapeDiagram",
		  "width": 320,
		  "height": 320,
		  "topTape": {
		    "grid": {
		      "show": false,
		      "strokeWidth": null
		    },
		    "fills": [
		      {
		        "span": {
		          "by": "percent",
		          "endPct": 100,
		          "startPct": 0
		        },
		        "label": {
		          "text": "16 units",
		          "placement": "inside"
		        },
		        "style": {
		          "fill": "#ffffff",
		          "kind": "solid",
		          "fillOpacity": 0
		        }
		      }
		    ],
		    "label": null,
		    "extent": null,
		    "unitsTotal": 1,
		    "roundedCaps": false,
		    "defaultStroke": "#000000",
		    "defaultStrokeWidth": 2
		  },
		  "brackets": [],
		  "bottomTape": {
		    "grid": {
		      "show": true,
		      "strokeWidth": 2
		    },
		    "fills": [
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 1,
		          "startUnit": 0
		        },
		        "label": {
		          "text": "y",
		          "placement": "inside"
		        },
		        "style": {
		          "fill": "#ffffff",
		          "kind": "solid",
		          "fillOpacity": 0
		        }
		      },
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 2,
		          "startUnit": 1
		        },
		        "label": {
		          "text": "y",
		          "placement": "inside"
		        },
		        "style": {
		          "fill": "#ffffff",
		          "kind": "solid",
		          "fillOpacity": 0
		        }
		      },
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 3,
		          "startUnit": 2
		        },
		        "label": {
		          "text": "y",
		          "placement": "inside"
		        },
		        "style": {
		          "fill": "#ffffff",
		          "kind": "solid",
		          "fillOpacity": 0
		        }
		      },
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 4,
		          "startUnit": 3
		        },
		        "label": {
		          "text": "y",
		          "placement": "inside"
		        },
		        "style": {
		          "fill": "#ffffff",
		          "kind": "solid",
		          "fillOpacity": 0
		        }
		      }
		    ],
		    "label": null,
		    "extent": null,
		    "unitsTotal": 4,
		    "roundedCaps": false,
		    "defaultStroke": "#000000",
		    "defaultStrokeWidth": 2
		  },
		  "referenceUnitsTotal": null
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for tapeDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

	// Extracted from question: x9b187096bb636675
	// Question: Write an equation from a tape diagram and find the value of a
	// Widget key: image_1
	test("tape-diagram - [x9b187096bb636675] Write an equation from a tape diagram and find the value of a", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "type": "tapeDiagram",
		  "width": 400,
		  "height": 320,
		  "topTape": {
		    "grid": {
		      "show": false,
		      "strokeWidth": null
		    },
		    "fills": [
		      {
		        "span": {
		          "by": "percent",
		          "endPct": 52,
		          "startPct": 0
		        },
		        "label": {
		          "text": "a",
		          "placement": "inside"
		        },
		        "style": {
		          "kind": "outline",
		          "stroke": "#000000",
		          "strokeWidth": 2
		        }
		      },
		      {
		        "span": {
		          "by": "percent",
		          "endPct": 100,
		          "startPct": 52
		        },
		        "label": {
		          "text": "17",
		          "placement": "inside"
		        },
		        "style": {
		          "kind": "outline",
		          "stroke": "#000000",
		          "strokeWidth": 2
		        }
		      }
		    ],
		    "label": "Top tape",
		    "extent": null,
		    "unitsTotal": 100,
		    "roundedCaps": false,
		    "defaultStroke": "#000000",
		    "defaultStrokeWidth": 1.5
		  },
		  "brackets": [],
		  "bottomTape": {
		    "grid": {
		      "show": false,
		      "strokeWidth": null
		    },
		    "fills": [
		      {
		        "span": {
		          "by": "percent",
		          "endPct": 100,
		          "startPct": 0
		        },
		        "label": {
		          "text": "35",
		          "placement": "inside"
		        },
		        "style": {
		          "kind": "outline",
		          "stroke": "#000000",
		          "strokeWidth": 2
		        }
		      }
		    ],
		    "label": "Bottom tape",
		    "extent": null,
		    "unitsTotal": 100,
		    "roundedCaps": false,
		    "defaultStroke": "#000000",
		    "defaultStrokeWidth": 1.5
		  },
		  "referenceUnitsTotal": null
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for tapeDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

	// Extracted from question: x6089758dca05221e
	// Question: Write an equation from a tape diagram and solve for w
	// Widget key: image_1
	test("tape-diagram - [x6089758dca05221e] Write an equation from a tape diagram and solve for w", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "type": "tapeDiagram",
		  "width": 400,
		  "height": 300,
		  "topTape": {
		    "grid": {
		      "show": false,
		      "strokeWidth": null
		    },
		    "fills": [
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 25,
		          "startUnit": 0
		        },
		        "label": {
		          "text": "25",
		          "placement": "inside"
		        },
		        "style": {
		          "fill": "#cfe5ff",
		          "kind": "solid",
		          "fillOpacity": 1
		        }
		      }
		    ],
		    "label": " ",
		    "extent": null,
		    "unitsTotal": 25,
		    "roundedCaps": false,
		    "defaultStroke": "#000000",
		    "defaultStrokeWidth": 2
		  },
		  "brackets": [],
		  "bottomTape": {
		    "grid": {
		      "show": false,
		      "strokeWidth": null
		    },
		    "fills": [
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 10,
		          "startUnit": 0
		        },
		        "label": {
		          "text": "10",
		          "placement": "inside"
		        },
		        "style": {
		          "fill": "#ffe08a",
		          "kind": "solid",
		          "fillOpacity": 1
		        }
		      },
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 25,
		          "startUnit": 10
		        },
		        "label": {
		          "text": "w",
		          "placement": "inside"
		        },
		        "style": {
		          "fill": "#ffd1d1",
		          "kind": "solid",
		          "fillOpacity": 1
		        }
		      }
		    ],
		    "label": " ",
		    "extent": null,
		    "unitsTotal": 25,
		    "roundedCaps": false,
		    "defaultStroke": "#000000",
		    "defaultStrokeWidth": 2
		  },
		  "referenceUnitsTotal": null
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for tapeDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

	// Extracted from question: xec3628ab2fd554f5
	// Question: Write an equation from a tape diagram and solve for g
	// Widget key: image_1
	test("tape-diagram - [xec3628ab2fd554f5] Write an equation from a tape diagram and solve for g", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "type": "tapeDiagram",
		  "width": 400,
		  "height": 320,
		  "topTape": {
		    "grid": {
		      "show": true,
		      "strokeWidth": 1
		    },
		    "fills": [
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 1,
		          "startUnit": 0
		        },
		        "label": {
		          "text": "20 units",
		          "placement": "inside"
		        },
		        "style": {
		          "fill": "#cfe8ff",
		          "kind": "solid",
		          "fillOpacity": 1
		        }
		      }
		    ],
		    "label": " ",
		    "extent": null,
		    "unitsTotal": 1,
		    "roundedCaps": false,
		    "defaultStroke": "#000000",
		    "defaultStrokeWidth": 1.5
		  },
		  "brackets": [],
		  "bottomTape": {
		    "grid": {
		      "show": true,
		      "strokeWidth": 1
		    },
		    "fills": [
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 1,
		          "startUnit": 0
		        },
		        "label": {
		          "text": "g units",
		          "placement": "inside"
		        },
		        "style": {
		          "fill": "#ffe4b5",
		          "kind": "solid",
		          "fillOpacity": 1
		        }
		      },
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 2,
		          "startUnit": 1
		        },
		        "label": {
		          "text": "g units",
		          "placement": "inside"
		        },
		        "style": {
		          "fill": "#ffe4b5",
		          "kind": "solid",
		          "fillOpacity": 1
		        }
		      }
		    ],
		    "label": " ",
		    "extent": null,
		    "unitsTotal": 2,
		    "roundedCaps": false,
		    "defaultStroke": "#000000",
		    "defaultStrokeWidth": 1.5
		  },
		  "referenceUnitsTotal": null
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for tapeDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

	// Extracted from question: xc1b390ca506f8849
	// Question: Write an equation from a tape diagram and solve for t
	// Widget key: image_1
	test("tape-diagram - [xc1b390ca506f8849] Write an equation from a tape diagram and solve for t", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "type": "tapeDiagram",
		  "width": 400,
		  "height": 320,
		  "topTape": {
		    "grid": {
		      "show": false,
		      "strokeWidth": null
		    },
		    "fills": [
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 13,
		          "startUnit": 0
		        },
		        "label": {
		          "text": "13",
		          "placement": "inside"
		        },
		        "style": {
		          "fill": "#a6cee3",
		          "kind": "solid",
		          "fillOpacity": 1
		        }
		      },
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 17,
		          "startUnit": 13
		        },
		        "label": {
		          "text": "t",
		          "placement": "inside"
		        },
		        "style": {
		          "fill": "#fdae61",
		          "kind": "solid",
		          "fillOpacity": 1
		        }
		      }
		    ],
		    "label": " ",
		    "extent": null,
		    "unitsTotal": 17,
		    "roundedCaps": false,
		    "defaultStroke": "#000000",
		    "defaultStrokeWidth": 1.5
		  },
		  "brackets": [],
		  "bottomTape": {
		    "grid": {
		      "show": false,
		      "strokeWidth": null
		    },
		    "fills": [
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 17,
		          "startUnit": 0
		        },
		        "label": {
		          "text": "17",
		          "placement": "inside"
		        },
		        "style": {
		          "fill": "#b2df8a",
		          "kind": "solid",
		          "fillOpacity": 1
		        }
		      }
		    ],
		    "label": " ",
		    "extent": null,
		    "unitsTotal": 17,
		    "roundedCaps": false,
		    "defaultStroke": "#000000",
		    "defaultStrokeWidth": 1.5
		  },
		  "referenceUnitsTotal": 17
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for tapeDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

	// Extracted from question: xe13027b9154dc152
	// Question: Write an equation from a tape diagram and solve for p
	// Widget key: image_1
	test("tape-diagram - [xe13027b9154dc152] Write an equation from a tape diagram and solve for p", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "type": "tapeDiagram",
		  "width": 400,
		  "height": 320,
		  "topTape": {
		    "grid": {
		      "show": true,
		      "strokeWidth": 1
		    },
		    "fills": [
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 1,
		          "startUnit": 0
		        },
		        "label": {
		          "text": "p",
		          "placement": "inside"
		        },
		        "style": {
		          "kind": "outline",
		          "stroke": "#000000",
		          "strokeWidth": 0
		        }
		      },
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 2,
		          "startUnit": 1
		        },
		        "label": {
		          "text": "p",
		          "placement": "inside"
		        },
		        "style": {
		          "kind": "outline",
		          "stroke": "#000000",
		          "strokeWidth": 0
		        }
		      },
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 3,
		          "startUnit": 2
		        },
		        "label": {
		          "text": "p",
		          "placement": "inside"
		        },
		        "style": {
		          "kind": "outline",
		          "stroke": "#000000",
		          "strokeWidth": 0
		        }
		      },
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 4,
		          "startUnit": 3
		        },
		        "label": {
		          "text": "p",
		          "placement": "inside"
		        },
		        "style": {
		          "kind": "outline",
		          "stroke": "#000000",
		          "strokeWidth": 0
		        }
		      },
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 5,
		          "startUnit": 4
		        },
		        "label": {
		          "text": "p",
		          "placement": "inside"
		        },
		        "style": {
		          "kind": "outline",
		          "stroke": "#000000",
		          "strokeWidth": 0
		        }
		      },
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 6,
		          "startUnit": 5
		        },
		        "label": {
		          "text": "p",
		          "placement": "inside"
		        },
		        "style": {
		          "kind": "outline",
		          "stroke": "#000000",
		          "strokeWidth": 0
		        }
		      }
		    ],
		    "label": "Top tape",
		    "extent": {
		      "by": "units",
		      "endUnit": 6,
		      "startUnit": 0
		    },
		    "unitsTotal": 6,
		    "roundedCaps": false,
		    "defaultStroke": "#000000",
		    "defaultStrokeWidth": 1.5
		  },
		  "brackets": [],
		  "bottomTape": {
		    "grid": {
		      "show": false,
		      "strokeWidth": null
		    },
		    "fills": [
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 6,
		          "startUnit": 0
		        },
		        "label": {
		          "text": "120",
		          "placement": "inside"
		        },
		        "style": {
		          "kind": "outline",
		          "stroke": "#000000",
		          "strokeWidth": 0
		        }
		      }
		    ],
		    "label": "Bottom tape",
		    "extent": {
		      "by": "units",
		      "endUnit": 6,
		      "startUnit": 0
		    },
		    "unitsTotal": 6,
		    "roundedCaps": false,
		    "defaultStroke": "#000000",
		    "defaultStrokeWidth": 1.5
		  },
		  "referenceUnitsTotal": 6
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for tapeDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

	// Extracted from question: x32a041c99571d151
	// Question: Write an equation from a tape diagram
	// Widget key: image_1
	test("tape-diagram - [x32a041c99571d151] Write an equation from a tape diagram", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "type": "tapeDiagram",
		  "width": 400,
		  "height": 320,
		  "topTape": {
		    "grid": {
		      "show": true,
		      "strokeWidth": 1
		    },
		    "fills": [
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 1,
		          "startUnit": 0
		        },
		        "label": {
		          "text": "t",
		          "placement": "inside"
		        },
		        "style": {
		          "fill": "#e0f0ff",
		          "kind": "solid",
		          "fillOpacity": 0.4
		        }
		      },
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 2,
		          "startUnit": 1
		        },
		        "label": {
		          "text": "t",
		          "placement": "inside"
		        },
		        "style": {
		          "fill": "#e0f0ff",
		          "kind": "solid",
		          "fillOpacity": 0.4
		        }
		      },
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 3,
		          "startUnit": 2
		        },
		        "label": {
		          "text": "t",
		          "placement": "inside"
		        },
		        "style": {
		          "fill": "#e0f0ff",
		          "kind": "solid",
		          "fillOpacity": 0.4
		        }
		      },
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 4,
		          "startUnit": 3
		        },
		        "label": {
		          "text": "t",
		          "placement": "inside"
		        },
		        "style": {
		          "fill": "#e0f0ff",
		          "kind": "solid",
		          "fillOpacity": 0.4
		        }
		      },
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 5,
		          "startUnit": 4
		        },
		        "label": {
		          "text": "t",
		          "placement": "inside"
		        },
		        "style": {
		          "fill": "#e0f0ff",
		          "kind": "solid",
		          "fillOpacity": 0.4
		        }
		      },
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 6,
		          "startUnit": 5
		        },
		        "label": {
		          "text": "t",
		          "placement": "inside"
		        },
		        "style": {
		          "fill": "#e0f0ff",
		          "kind": "solid",
		          "fillOpacity": 0.4
		        }
		      }
		    ],
		    "label": " ",
		    "extent": null,
		    "unitsTotal": 6,
		    "roundedCaps": false,
		    "defaultStroke": "#000000",
		    "defaultStrokeWidth": 1.5
		  },
		  "brackets": [],
		  "bottomTape": {
		    "grid": {
		      "show": false,
		      "strokeWidth": null
		    },
		    "fills": [
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 1,
		          "startUnit": 0
		        },
		        "label": {
		          "text": "9",
		          "placement": "inside"
		        },
		        "style": {
		          "fill": "#fdeccb",
		          "kind": "solid",
		          "fillOpacity": 0.5
		        }
		      }
		    ],
		    "label": " ",
		    "extent": null,
		    "unitsTotal": 1,
		    "roundedCaps": false,
		    "defaultStroke": "#000000",
		    "defaultStrokeWidth": 1.5
		  },
		  "referenceUnitsTotal": null
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for tapeDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

	// Extracted from question: x19c01514937a688a
	// Question: Write an equation from a tape diagram
	// Widget key: image_1
	test("tape-diagram - [x19c01514937a688a] Write an equation from a tape diagram", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "type": "tapeDiagram",
		  "width": 400,
		  "height": 320,
		  "topTape": {
		    "grid": {
		      "show": false,
		      "strokeWidth": null
		    },
		    "fills": [],
		    "label": " ",
		    "extent": null,
		    "unitsTotal": 1,
		    "roundedCaps": false,
		    "defaultStroke": "#000000",
		    "defaultStrokeWidth": 1.5
		  },
		  "brackets": [
		    {
		      "span": {
		        "by": "percent",
		        "endPct": 100,
		        "startPct": 0
		      },
		      "tape": "top",
		      "style": {
		        "kind": "straight",
		        "stroke": null,
		        "strokeWidth": null
		      },
		      "labelTop": "1.75 units",
		      "labelBottom": " "
		    }
		  ],
		  "bottomTape": {
		    "grid": {
		      "show": true,
		      "strokeWidth": 1
		    },
		    "fills": [
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 1,
		          "startUnit": 0
		        },
		        "label": {
		          "text": "n units",
		          "placement": "inside"
		        },
		        "style": {
		          "kind": "outline",
		          "stroke": "#000000",
		          "strokeWidth": 1
		        }
		      },
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 2,
		          "startUnit": 1
		        },
		        "label": {
		          "text": "n units",
		          "placement": "inside"
		        },
		        "style": {
		          "kind": "outline",
		          "stroke": "#000000",
		          "strokeWidth": 1
		        }
		      },
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 3,
		          "startUnit": 2
		        },
		        "label": {
		          "text": "n units",
		          "placement": "inside"
		        },
		        "style": {
		          "kind": "outline",
		          "stroke": "#000000",
		          "strokeWidth": 1
		        }
		      },
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 4,
		          "startUnit": 3
		        },
		        "label": {
		          "text": "n units",
		          "placement": "inside"
		        },
		        "style": {
		          "kind": "outline",
		          "stroke": "#000000",
		          "strokeWidth": 1
		        }
		      },
		      {
		        "span": {
		          "by": "units",
		          "endUnit": 5,
		          "startUnit": 4
		        },
		        "label": {
		          "text": "n units",
		          "placement": "inside"
		        },
		        "style": {
		          "kind": "outline",
		          "stroke": "#000000",
		          "strokeWidth": 1
		        }
		      }
		    ],
		    "label": " ",
		    "extent": null,
		    "unitsTotal": 5,
		    "roundedCaps": false,
		    "defaultStroke": "#000000",
		    "defaultStrokeWidth": 1.5
		  },
		  "referenceUnitsTotal": null
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for tapeDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

	// Extracted from question: xf6d2dfeea49770e6
	// Question: Write an equation to represent a tape diagram
	// Widget key: image_1
	test("tape-diagram - [xf6d2dfeea49770e6] Write an equation to represent a tape diagram", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "type": "tapeDiagram",
		  "width": 400,
		  "height": 320,
		  "topTape": {
		    "grid": {
		      "show": false,
		      "strokeWidth": null
		    },
		    "fills": [
		      {
		        "span": {
		          "by": "percent",
		          "endPct": 51.85,
		          "startPct": 0
		        },
		        "label": {
		          "text": "w",
		          "placement": "inside"
		        },
		        "style": {
		          "fill": "#cfe8ff",
		          "kind": "solid",
		          "fillOpacity": 1
		        }
		      },
		      {
		        "span": {
		          "by": "percent",
		          "endPct": 100,
		          "startPct": 51.85
		        },
		        "label": {
		          "text": "1.3",
		          "placement": "inside"
		        },
		        "style": {
		          "fill": "#ffe0b2",
		          "kind": "solid",
		          "fillOpacity": 1
		        }
		      }
		    ],
		    "label": " ",
		    "extent": null,
		    "unitsTotal": 10,
		    "roundedCaps": false,
		    "defaultStroke": "#000000",
		    "defaultStrokeWidth": 1.5
		  },
		  "brackets": [],
		  "bottomTape": {
		    "grid": {
		      "show": false,
		      "strokeWidth": null
		    },
		    "fills": [
		      {
		        "span": {
		          "by": "percent",
		          "endPct": 100,
		          "startPct": 0
		        },
		        "label": {
		          "text": "2.7",
		          "placement": "inside"
		        },
		        "style": {
		          "fill": "#d6f5d6",
		          "kind": "solid",
		          "fillOpacity": 1
		        }
		      }
		    ],
		    "label": " ",
		    "extent": null,
		    "unitsTotal": 10,
		    "roundedCaps": false,
		    "defaultStroke": "#000000",
		    "defaultStrokeWidth": 1.5
		  },
		  "referenceUnitsTotal": null
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for tapeDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

	// Extracted from question: x33c65be34d97c49c
	// Question: Write an equation from a tape diagram
	// Widget key: image_1
	test("tape-diagram - [x33c65be34d97c49c] Write an equation from a tape diagram", async () => {
		// Note: Database data may not match current library schemas exactly
		// Using runtime validation in generateWidget for flexibility
		const input = {
		  "type": "tapeDiagram",
		  "width": 400,
		  "height": 300,
		  "topTape": {
		    "grid": {
		      "show": false,
		      "strokeWidth": null
		    },
		    "fills": [
		      {
		        "span": {
		          "by": "percent",
		          "endPct": 100,
		          "startPct": 0
		        },
		        "label": {
		          "text": "11",
		          "placement": "inside"
		        },
		        "style": {
		          "fill": "#ffffff",
		          "kind": "solid",
		          "fillOpacity": 0
		        }
		      }
		    ],
		    "label": " ",
		    "extent": null,
		    "unitsTotal": 11,
		    "roundedCaps": false,
		    "defaultStroke": "#000000",
		    "defaultStrokeWidth": 1.5
		  },
		  "brackets": [],
		  "bottomTape": {
		    "grid": {
		      "show": false,
		      "strokeWidth": null
		    },
		    "fills": [
		      {
		        "span": {
		          "by": "percent",
		          "endPct": 45.45,
		          "startPct": 0
		        },
		        "label": {
		          "text": "5",
		          "placement": "inside"
		        },
		        "style": {
		          "kind": "outline",
		          "stroke": "#000000",
		          "strokeWidth": 1.5
		        }
		      },
		      {
		        "span": {
		          "by": "percent",
		          "endPct": 100,
		          "startPct": 45.45
		        },
		        "label": {
		          "text": "b",
		          "placement": "inside"
		        },
		        "style": {
		          "kind": "outline",
		          "stroke": "#000000",
		          "strokeWidth": 1.5
		        }
		      }
		    ],
		    "label": " ",
		    "extent": null,
		    "unitsTotal": 11,
		    "roundedCaps": false,
		    "defaultStroke": "#000000",
		    "defaultStrokeWidth": 1.5
		  },
		  "referenceUnitsTotal": null
		} as unknown as WidgetInput

		// Generate the widget (includes runtime validation)
		const result = await errors.try(generateWidget(input as unknown as Widget))
		if (result.error) {
			// If widget generation fails, it likely means the database data doesn't match current schema
			logger.error("widget generation failed for tapeDiagram", { 
				error: result.error,
				inputData: input
			})
			throw errors.wrap(result.error, "widget generation")
		}
		
		const svg = result.data
		expect(svg).toMatchSnapshot()
	})

})
